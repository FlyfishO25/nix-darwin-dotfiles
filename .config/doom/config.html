<!DOCTYPE html>
<html lang="en">
<head>
<!-- 2021-08-19 Thu 05:31 -->
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Doom Emacs Configuration</title>
<meta name="author" content="Shaurya Singh" />
<meta name="generator" content="org mode" />
<meta name="theme-color" content="#77aa99" />
<meta property="og:type" content="article" />
<meta property="og:title" content="Doom Emacs Configuration" />
<meta property="og:image" content="https://tecosaur.com/resources/org/nib.png" />
<meta property="og:image:type" content="image/png" />
<meta property="og:image:width" content="200" />
<meta property="og:image:height" content="200" />
<meta property="og:image:alt" content="Green fountain pen nib" />
<meta property="og:article:author:first_name" content="Shaurya" />
<meta property="og:article:author:last_name" content="Singh" />
<meta property="og:article:published_time" content="2021-08-19T00:00:00+0000" />
<meta property="og:article:modified_time" content="2021-08-19T04:46:50+0000" />
<link rel="icon" href="https://tecosaur.com/resources/org/nib.ico" type="image/ico" />

<link rel="preload" as="font" crossorigin="anonymous" type="font/woff2" href="https://tecosaur.com/resources/org/etbookot-roman-webfont.woff2">
<link rel="preload" as="font" crossorigin="anonymous" type="font/woff2" href="https://tecosaur.com/resources/org/etbookot-italic-webfont.woff2">
<link rel="preload" as="font" crossorigin="anonymous" type="font/woff2" href="https://tecosaur.com/resources/org/Merriweather-TextRegular.woff2">
<link rel="preload" as="font" crossorigin="anonymous" type="font/woff2" href="https://tecosaur.com/resources/org/Merriweather-TextItalic.woff2">
<link rel="preload" as="font" crossorigin="anonymous" type="font/woff2" href="https://tecosaur.com/resources/org/Merriweather-TextBold.woff2">
<script>
// @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&dn=expat.txt Expat
function copyPreToClipbord(btn) {
    const pre = btn.parentElement.parentElement.getElementsByTagName("PRE")[0];
    const range = document.createRange();
    range.selectNodeContents(pre);
    range.setEnd(pre.childNodes[pre.childNodes.length-1], 0);
    window.getSelection().addRange(range);
    var successful = document.execCommand('copy');
    window.getSelection().removeRange(range);
}
window.addEventListener('DOMContentLoaded', () => {
    if (document.getElementById("text-table-of-contents")) {
        const sections = document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]');
        const activate = (entry) => {
            entry.classList.add('active');
            if (["LI", "UL"].includes(entry.parentElement.tagName)) {
                activate(entry.parentElement);
            }
        };
        const activateLast = () => {
            document.querySelectorAll('#text-table-of-contents li.active, #text-table-of-contents ul.active').forEach(a => {
                a.classList.remove('active')
            });
            let mostRecent = { section: sections[0], bottom: -Infinity };
            const windowHeight = window.innerHeight;
            sections.forEach((section) => {
                const bounds = section.getBoundingClientRect()
                if ( bounds.bottom > mostRecent.bottom && bounds.top < windowHeight ) {
                    mostRecent = { section, bottom: bounds.bottom };
                }
            })
            activate(document.querySelector(`#text-table-of-contents li a[href="#${mostRecent.section.getAttribute('id')}"]`).parentElement);
        }
        const observer = new IntersectionObserver(entries => {
            activateLast();
        });
        sections.forEach((section) => {
            observer.observe(section);
        });}
});
// @license-end
</script>
<style>
﻿/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}h1{font-size:2em;margin:0.67em 0}hr{box-sizing:content-box;height:0}pre{font-family:monospace, monospace;font-size:1em}b{font-weight:bolder}code,kbd,samp{font-family:monospace, monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-0.25em}sup{top:-0.5em}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,select{text-transform:none}button{-webkit-appearance:button}button::-moz-focus-inner{border-style:none;padding:0}button:-moz-focusring{outline:1px dotted ButtonText}details{display:block}summary{display:list-item}/*! end normalise.css */#page{--accent: #2a2e38;--accent-dark: #5D656B;--code-foreground: #bbc2cf;--code-background: #2a2e38;--code-func: #7bc275;--code-const: #C57BDB;--code-regex: #51afef;--back-white: #000;--back-light: #242730;--back-medium: #484854;--text-light: #c57BDB;--text-gray: #51afef;--text-medium: #c57BDB;--text-dark: #BBC2cf;--switch-icon: "🌝";--switch-shadow-color: #FCCE7b;--switch-text: "light mode?"}#page img.invertible,#page object[type="image/svg+xml"].invertible{filter:invert(90%) hue-rotate(180deg) sepia(1%)}#theme-switch:checked~#page{--accent: #002642;--accent-dark: #00151c;--code-foreground: #2c3e50;--code-background: #efefef;--code-func: #6c3163;--code-const: #4e3163;--code-regex: #655370;--back-white: #fff;--back-light: #f0eeed;--back-medium: #c8c8c8;--text-light: #7b7b7b;--text-gray: #444;--text-medium: #222;--text-dark: #000;--switch-icon: "🌚";--switch-shadow-color: #373d4e;--switch-text: "dark mode?"}#theme-switch{display:none}#switch-label{position:fixed;bottom:4rem;left:3rem}#switch-label::before{content:var(--switch-icon);font-size:20px;transition:text-shadow .2s}#switch-label::after{content:var(--switch-text);color:var(--switch-shadow-color);font-size:12px;visibility:hidden;margin-left:0.5em;z-index:1;position:fixed;bottom:calc(4rem - 25px);left:calc(3rem - 10px)}@media (max-width: 1000px){#switch-label{left:auto;bottom:auto;right:1vw;top:1vh}#switch-label::after{position:fixed;top:calc(1vh + 3px);right:calc(1vw + 30px);left:auto;bottom:auto}}#theme-switch:focus~#page #switch-label::before,#switch-label:hover::before{text-shadow:0 0 15px var(--switch-shadow-color)}#theme-switch:focus~#page #switch-label::after,#switch-label:hover::after{visibility:visible}@font-face{font-family:"Merriweather";src:url("https://tecosaur.com/resources/org/Merriweather-TextRegular.woff2") format("woff2");font-weight:normal;font-style:normal;font-display:fallback}@font-face{font-family:"Merriweather";src:url("https://tecosaur.com/resources/org/Merriweather-TextItalic.woff2") format("woff2");font-weight:normal;font-style:italic;font-display:fallback}@font-face{font-family:"Merriweather";src:url("https://tecosaur.com/resources/org/Merriweather-TextBold.woff2") format("woff2");font-weight:bold;font-style:normal;font-display:fallback}@font-face{font-family:"et-book";src:url("https://tecosaur.com/resources/org/etbookot-roman-webfont.woff2") format("woff2");font-weight:normal;font-style:normal;font-display:fallback}@font-face{font-family:"et-book";src:url("https://tecosaur.com/resources/org/etbookot-italic-webfont.woff2") format("woff2");font-weight:normal;font-style:italic;font-display:fallback}*::selection{background:var(--back-medium)}.pace .pace-progress{background-color:var(--accent) !important}html,body{height:100%}body{display:flex;flex-direction:column;font-size:16px;font-family:"Merriweather",serif}#page{color:var(--text-dark);background-color:var(--back-light);transition-property:color, background-color;transition-duration:100ms}#content,header,.page-header{margin:32px;flex:1 0 auto}#content{margin-top:4rem;min-height:calc(100vh - 4rem - 48px)}.clearfix::after{clear:both}.clearfix::before,.clearfix::after{content:" ";display:table}.page-header{margin-top:80px;margin-left:0 !important}.page-header h1{font-size:40px;margin-bottom:10px;margin-top:10px;text-transform:none}.page-header h1 .subtitle{font-size:24px;color:var(--text-light);margin:0}.page-meta{font-family:"Open Sans",sans;font-weight:normal;font-style:normal;font-size:12px;line-height:1.9;color:var(--text-light)}header .site-nav{font-family:"Open Sans",sans;font-weight:normal;font-style:normal;font-size:12px;line-height:1.9;color:var(--text-light);font-weight:bold;line-height:2.0;margin-top:22px}header .site-nav a{color:var(--text-light);text-decoration:none;margin-left:10px}header .site-nav a:hover{color:var(--text-gray)}header .site-nav a.active{border-bottom:solid;border-bottom-width:2px}header .site-nav a:first-child{margin-left:0}header>div{display:inherit}.site-title{font-size:16px}.site-title span{display:none !important}.site-title ul{display:block !important;list-style:none;padding:0;margin:0}.site-title ul img{border-radius:2px;max-width:32px}.site-header nav a{color:var(--text-light);font-family:"Open Sans",sans;font-size:12px;font-weight:bold;text-transform:uppercase}.site-header nav a:hover{border:0;color:var(--accent)}@media (max-width: 1000px){header *{display:inline}}@media (min-width: 1000px){#content,header,.page-header{max-width:720px;margin-left:164px}header .site-title{float:left}header .site-nav{float:right;margin-top:0}}@media (min-width: 2800px){#content,header,.page-header{margin-left:auto;margin-right:auto}}#content .page-intro{font-family:"Open Sans",sans;font-weight:normal;font-size:15px;line-height:1.6;color:var(--text-gray);margin-bottom:40px}#content p,#content li,#content dd{line-height:1.9}#footer{margin-top:70px;height:10px;background:var(--accent-dark)}.archive-item{margin:50px 0}.archive-item .archive-title{font-size:25px;margin:5px 0;background:none;text-shadow:none;text-decoration:none}.archive-item .archive-title:hover{background:none;text-shadow:none;text-decoration:none}#postamble{display:none}aside{background-color:var(--code-background);border-radius:5px;font-family:"Open Sans",sans;font-weight:normal;font-size:15px;line-height:1.6;color:var(--text-gray);margin:20px 0;padding:5px 20px 10px;line-height:1.6 !important}aside p{font-family:"Open Sans",sans;font-weight:normal;font-size:15px;line-height:1.6;color:var(--text-gray);line-height:1.6 !important}aside pre{font-size:12px;border:none;padding-left:0}@media (min-width: 1280px){aside{float:right;clear:right;background-color:var(--back-white);max-width:45% !important;margin-right:-52%}aside::before{content:''}}blockquote{border-width:0;border-left-style:solid;border-left-width:1px;border-left-color:var(--back-medium);margin:20px 0;padding:0;padding-left:15px}blockquote p{display:inline;font-size:13px}blockquote footer{font-family:"Open Sans",sans;font-weight:normal;font-style:normal;font-size:12px;line-height:1.9;color:var(--text-light);text-transform:none}div.info{background:rgba(81,175,239,0.15);border-left:4px solid rgba(81,175,239,0.45);margin:1.8rem 0 1.25rem 15px;padding:0.8em;line-height:1.4;text-align:center;position:relative;clear:both}div.info p{margin:0}div.info::before{content:"i";color:var(--back-white);background:rgba(81,175,239,0.8);align-items:flex-end;top:-1rem;font-weight:700;font-size:1.4rem;-webkit-clip-path:circle(50% at 50% 50%);clip-path:circle(50% at 50% 50%);width:30px;height:30px;display:inline-flex;justify-content:center;position:absolute;left:-1.2rem;line-height:1.3;text-align:center}div.success{background:rgba(123,194,117,0.15);border-left:4px solid rgba(123,194,117,0.45);margin:1.8rem 0 1.25rem 15px;padding:0.8em;line-height:1.4;text-align:center;position:relative;clear:both}div.success p{margin:0}div.success::before{content:"✔";color:var(--back-white);background:rgba(123,194,117,0.8);align-items:flex-end;top:-1rem;font-weight:700;font-size:1.4rem;-webkit-clip-path:polygon(50% 0%, 100% 50%, 50% 100%, 0% 50%);clip-path:polygon(50% 0%, 100% 50%, 50% 100%, 0% 50%);width:35px;height:35px;display:inline-flex;justify-content:center;position:absolute;left:-1.2rem;line-height:1.5;text-align:center}div.warning{background:rgba(230,144,85,0.15);border-left:4px solid rgba(230,144,85,0.45);margin:1.8rem 0 1.25rem 15px;padding:0.8em;line-height:1.4;text-align:center;position:relative;clear:both}div.warning p{margin:0}div.warning::before{content:"!";color:var(--back-white);background:rgba(230,144,85,0.8);align-items:flex-end;top:-1rem;font-weight:700;font-size:1.4rem;-webkit-clip-path:polygon(50% 0, 0 100%, 100% 100%);clip-path:polygon(50% 0, 0 100%, 100% 100%);width:35px;height:35px;display:inline-flex;justify-content:center;position:absolute;left:-1.2rem;line-height:1.1;text-align:center}div.error{background:rgba(255,102,92,0.15);border-left:4px solid rgba(255,102,92,0.45);margin:1.8rem 0 1.25rem 15px;padding:0.8em;line-height:1.4;text-align:center;position:relative;clear:both}div.error p{margin:0}div.error::before{content:"!";color:var(--back-white);background:rgba(255,102,92,0.8);align-items:flex-end;top:-1rem;font-weight:700;font-size:1.4rem;-webkit-clip-path:polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%);clip-path:polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%);width:35px;height:30px;display:inline-flex;justify-content:center;position:absolute;left:-1.2rem;line-height:1.1;text-align:center}.org-ref-bib-h1{margin-top:70px;padding-top:30px;border-width:0;border-top-style:solid;border-top-width:1px;border-color:var(--back-light);font-family:"Open Sans",sans;font-family:"Open Sans",sans;font-weight:normal;font-size:20px;line-height:1.6;color:var(--text-gray)}.org-ref-bib{font-family:"Open Sans",sans;font-weight:normal;font-size:15px;line-height:1.6;color:var(--text-gray)}.org-ref-bib li>a:nth-child(2){background:none;text-shadow:none;text-decoration:none}.org-ref-bib li>a:nth-child(2):hover{background:none;text-shadow:none;text-decoration:none}.org-ref-bib .bib-link{font-family:"Open Sans",sans;font-weight:normal;font-style:normal;font-size:12px;line-height:1.9;color:var(--text-light);background:none;text-shadow:none;text-decoration:none}pre.src,pre.example{border-width:0;border-left-style:solid;border-left-width:1px;border-left-color:var(--back-medium);margin:20px 0;padding:0;padding-left:15px;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:14px;line-height:1.9;overflow-x:visible;box-shadow:none;white-space:pre-wrap;position:relative}pre.example{border-left-style:dotted;border-left-width:2px}pre.src::before{display:inline-block;position:absolute;background-color:transparent;top:unset;bottom:-16px;left:20px;padding:0px;border:none;font-size:80%;font-style:italic;color:var(--text-light)}pre.src:empty{display:none}code{font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;color:var(--code-foreground);font-size:15px;padding:0 5px}kbd{display:inline-block;padding:0.25em 0.35em;font:80% SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;line-height:normal;line-height:80%;color:var(--text-gray);vertical-align:middle;background-color:var(--back-light);border:1px solid #91959a88;border-radius:0.35em;box-shadow:inset 0 -1px 0 #91959a88}li code{font-size:14px}li p code{font-size:15px}details.code{position:relative}details.code summary{position:relative;left:-3px;padding-left:10px;padding-bottom:4px;margin-left:-10px;z-index:1;outline:none;font-family:"Open Sans",sans;font-weight:normal;font-style:normal;font-size:12px;line-height:1.9;color:var(--text-light)}details.code summary .name{font-size:14px;color:var(--text-medium);margin-right:0.7em}details.code summary .lang{font-family:SFMono-Regular, Consolas, Liberation Mono, Menlo, monospace;font-style:italic}details.code summary::marker{color:var(--back-medium)}details.code[open] summary{margin-bottom:-32px}details.code[open] summary .lang{display:none}details.code[open] summary.named{margin-bottom:-26px}details.code:not([open]) summary{margin-bottom:-5px}p+details.code{margin-top:-20px}li p+details.code{margin-top:-5px}.example,.src{color:var(--code-foreground)}.example .org-keyword,.src .org-keyword{color:#51afef}.example .org-variable-name,.src .org-variable-name{color:#c57BDB}.example .org-rainbow-delimiters-depth-1,.example .org-rainbow-delimiters-depth-2,.example .org-rainbow-delimiters-depth-3,.example .org-rainbow-delimiters-depth-4,.example .org-rainbow-delimiters-depth-5,.example .org-rainbow-delimiters-depth-6,.example .org-rainbow-delimiters-depth-7,.example .org-rainbow-delimiters-depth-8,.example .org-rainbow-delimiters-depth-9,.src .org-rainbow-delimiters-depth-1,.src .org-rainbow-delimiters-depth-2,.src .org-rainbow-delimiters-depth-3,.src .org-rainbow-delimiters-depth-4,.src .org-rainbow-delimiters-depth-5,.src .org-rainbow-delimiters-depth-6,.src .org-rainbow-delimiters-depth-7,.src .org-rainbow-delimiters-depth-8,.src .org-rainbow-delimiters-depth-9{color:#555}.example .org-string,.src .org-string{color:#7bc275}.example .org-comment,.example .org-comment-delimiter,.src .org-comment,.src .org-comment-delimiter{color:#555}.example .org-function-name,.src .org-function-name{color:var(--code-func)}.example .org-constant,.example .org-highlight-numbers-number,.src .org-constant,.src .org-highlight-numbers-number{color:var(--code-const)}.gutter{position:absolute;top:0;left:-2.5rem;width:2rem;padding-right:0.3rem;padding-top:5px;height:calc(100% - 10px);z-index:1;transition:opacity 200ms;opacity:0;font-size:15px}.gutter:hover{opacity:1}.gutter *{display:block;width:100%;text-align:right;padding:0;margin:0;color:var(--text-light)}.gutter *:hover{color:var(--text-gray)}.gutter *:active{font-weight:bold}.gutter a{text-decoration:none;font-size:110%}.gutter button{background:none;border:none}pre.src-asymptote::before{content:'Asymptote'}pre.src-authinfo::before{content:'Authinfo'}pre.src-awk::before{content:'Awk'}pre.src-C::before{content:'C'}pre.src-clojure::before{content:'Clojure'}pre.src-css::before{content:'CSS'}pre.src-D::before{content:'D'}pre.src-ditaa::before{content:'ditaa'}pre.src-dot::before{content:'Graphviz'}pre.src-calc::before{content:'Emacs Calc'}pre.src-emacs-lisp::before{content:'Emacs Lisp'}pre.src-fortran::before{content:'Fortran'}pre.src-gnuplot::before{content:'gnuplot'}pre.src-haskell::before{content:'Haskell'}pre.src-hledger::before{content:'hledger'}pre.src-java::before{content:'Java'}pre.src-js::before{content:'Javascript'}pre.src-latex::before{content:'LaTeX'}pre.src-ledger::before{content:'Ledger'}pre.src-lisp::before{content:'Lisp'}pre.src-lilypond::before{content:'Lilypond'}pre.src-lua::before{content:'Lua'}pre.src-matlab::before{content:'MATLAB'}pre.src-mscgen::before{content:'Mscgen'}pre.src-ocaml::before{content:'Objective Caml'}pre.src-octave::before{content:'Octave'}pre.src-org::before{content:'Org mode'}pre.src-oz::before{content:'OZ'}pre.src-plantuml::before{content:'Plantuml'}pre.src-processing::before{content:'Processing.js'}pre.src-python::before{content:'Python'}pre.src-R::before{content:'R'}pre.src-ruby::before{content:'Ruby'}pre.src-sass::before{content:'Sass'}pre.src-scheme::before{content:'Scheme'}pre.src-screen::before{content:'Gnu Screen'}pre.src-sed::before{content:'Sed'}pre.src-sh::before{content:'shell'}pre.src-sql::before{content:'SQL'}pre.src-sqlite::before{content:'SQLite'}pre.src-forth::before{content:'Forth'}pre.src-io::before{content:'IO'}pre.src-J::before{content:'J'}pre.src-makefile::before{content:'Makefile'}pre.src-maxima::before{content:'Maxima'}pre.src-perl::before{content:'Perl'}pre.src-picolisp::before{content:'Pico Lisp'}pre.src-scala::before{content:'Scala'}pre.src-shell::before{content:'Shell Script'}pre.src-systemd::before{content:'Systemd'}pre.src-ebnf2ps::before{content:'ebfn2ps'}pre.src-cpp::before{content:'C++'}pre.src-abc::before{content:'ABC'}pre.src-coq::before{content:'Coq'}pre.src-groovy::before{content:'Groovy'}pre.src-bash::before{content:'bash'}pre.src-csh::before{content:'csh'}pre.src-ash::before{content:'ash'}pre.src-dash::before{content:'dash'}pre.src-ksh::before{content:'ksh'}pre.src-mksh::before{content:'mksh'}pre.src-posh::before{content:'posh'}pre.src-ada::before{content:'Ada'}pre.src-asm::before{content:'Assembler'}pre.src-caml::before{content:'Caml'}pre.src-delphi::before{content:'Delphi'}pre.src-html::before{content:'HTML'}pre.src-idl::before{content:'IDL'}pre.src-mercury::before{content:'Mercury'}pre.src-metapost::before{content:'MetaPost'}pre.src-modula-2::before{content:'Modula-2'}pre.src-pascal::before{content:'Pascal'}pre.src-ps::before{content:'PostScript'}pre.src-prolog::before{content:'Prolog'}pre.src-simula::before{content:'Simula'}pre.src-tcl::before{content:'tcl'}pre.src-tex::before{content:'LaTeX'}pre.src-plain-tex::before{content:'TeX'}pre.src-verilog::before{content:'Verilog'}pre.src-vhdl::before{content:'VHDL'}pre.src-xml::before{content:'XML'}pre.src-nxml::before{content:'XML'}pre.src-conf::before{content:'Configuration File'}.dropcap{float:left;font-size:55px;font-style:normal;line-height:.1;margin-right:0.2em;margin-top:0.5em;padding:0}figure{text-align:center}figure figcaption{margin-top:10px;font-family:"Open Sans",sans;font-weight:normal;font-size:15px;line-height:1.6;color:var(--text-gray)}figure figcaption .figure-number{font-family:"Open Sans",sans;font-weight:normal;font-style:normal;font-size:12px;line-height:1.9;color:var(--text-light)}img.zoomTarget:hover{cursor:default !important}img,object[type="image/svg+xml"]{filter:invert(7%) sepia(4%);max-width:100%}.org-svg{width:90%}#footnotes{margin-top:70px;padding-top:30px;border-width:0;border-top-style:solid;border-top-width:1px;border-color:var(--back-light);font-family:"Open Sans",sans;font-weight:normal;font-size:15px;line-height:1.6;color:var(--text-gray)}#footnotes p,#footnotes li{font-family:"Open Sans",sans;font-weight:normal;font-size:15px;line-height:1.6;color:var(--text-gray)}#footnotes h2.footnotes{margin-top:0;margin-bottom:30px;font-family:"Open Sans",sans;font-size:18px;letter-spacing:5px;display:none}#footnotes .footnum{color:var(--text-dark)}h1,h2,h3,h4,h5,h6{font-family:"et-book",serif;font-weight:normal;margin-bottom:0;margin-top:60px}h1>a[aria-hidden='true'],h2>a[aria-hidden='true'],h3>a[aria-hidden='true'],h4>a[aria-hidden='true'],h5>a[aria-hidden='true'],h6>a[aria-hidden='true']{color:var(--back-medium);position:relative;top:0.06em;line-height:1;font-size:110%;padding-left:0.2em;text-decoration:none;visibility:hidden}h1>a[aria-hidden='true']:hover,h2>a[aria-hidden='true']:hover,h3>a[aria-hidden='true']:hover,h4>a[aria-hidden='true']:hover,h5>a[aria-hidden='true']:hover,h6>a[aria-hidden='true']:hover{color:var(--text-light)}h1:hover>a[aria-hidden='true'],h2:hover>a[aria-hidden='true'],h3:hover>a[aria-hidden='true'],h4:hover>a[aria-hidden='true'],h5:hover>a[aria-hidden='true'],h6:hover>a[aria-hidden='true']{visibility:visible}h1,h2,h3,h4,h5,h6{padding-left:30px;margin-left:-30px;position:relative}h1,.section-number-1{font-size:40px}h2,.section-number-2{font-size:30px}h3,.section-number-3{font-size:24px}h4,.section-number-4{font-size:20px;font-style:italic}h5{font-size:20px;font-variant:small-caps}.section-number-5{font-size:20px}h6{font-size:18px;font-style:italic}.section-number-6{font-size:18px}.section-number-1,.section-number-2,.section-number-3,.section-number-4,.section-number-5,.section-number-6{font-family:"Open Sans",sans;font-weight:normal;font-style:normal;font-size:12px;line-height:1.9;color:var(--text-light);font-size:inherit;color:var(--text-light);line-height:1}@media (min-width: 1000px){.section-number-1,.section-number-2,.section-number-3,.section-number-4,.section-number-5,.section-number-6{position:absolute;transform:translateX(-100%) translateX(-10px)}}.outline-text-2:empty+.outline-3>h3,.outline-text-2:-moz-only-whitespace+.outline-3>h3{margin-top:20px}.outline-text-3:empty+.outline-4>h4,.outline-text-3:-moz-only-whitespace+.outline-4>h4{margin-top:15px}.outline-text-4:empty+.outline-5>h5,.outline-text-4:-moz-only-whitespace+.outline-5>h5{margin-top:15px}.outline-text-5:empty+.outline-6>h6,.outline-text-5:-moz-only-whitespace+.outline-6>h6{margin-top:10px}hr{border:none;border-top-style:solid;border-top-width:1px;color:var(--back-medium);margin-bottom:30px;margin-top:40px}a{color:inherit}figcaption a,p a,.page-tags a,table a,li a,dl a{background-image:linear-gradient(var(--text-dark), var(--text-dark));background-size:1px 1px;background-repeat:repeat-x;background-position:0% 95%;border-radius:1px;text-decoration:none}figcaption a::selection,p a::selection,.page-tags a::selection,table a::selection,li a::selection,dl a::selection{background:var(--back-medium)}figcaption a *,figcaption a *:after,figcaption a:after,figcaption a *:before,figcaption a:before,p a *,p a *:after,p a:after,p a *:before,p a:before,.page-tags a *,.page-tags a *:after,.page-tags a:after,.page-tags a *:before,.page-tags a:before,table a *,table a *:after,table a:after,table a *:before,table a:before,li a *,li a *:after,li a:after,li a *:before,li a:before,dl a *,dl a *:after,dl a:after,dl a *:before,dl a:before{text-shadow:none}figcaption a:visited,p a:visited,.page-tags a:visited,table a:visited,li a:visited,dl a:visited{color:var(--text-dark)}figcaption a:hover,p a:hover,.page-tags a:hover,table a:hover,li a:hover,dl a:hover{opacity:0.9;filter:drop-shadow(1px 1px 1px var(--back-white));background-image:linear-gradient(var(--text-dark), var(--text-dark));background-size:1px 1px;background-repeat:repeat-x;background-position:0% 95%;background-image:url("data:image/svg+xml;charset=utf8,%3Csvg id='squiggle-link' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns:ev='http://www.w3.org/2001/xml-events' viewBox='0 0 20 4'%3E%3Cstyle type='text/css'%3E.squiggle{animation:shift .3s linear infinite;}@keyframes shift {from {transform:translateX(0);}to {transform:translateX(-20px);}}%3C/style%3E%3Cpath fill='none' stroke='%23000000' stroke-width='2' class='squiggle' d='M0,3.5 c 5,0,5,-3,10,-3 s 5,3,10,3 c 5,0,5,-3,10,-3 s 5,3,10,3'/%3E%3C/svg%3E") !important;background-position:0% 100%;background-size:0.8em auto;text-decoration:none}figcaption a:hover::selection,p a:hover::selection,.page-tags a:hover::selection,table a:hover::selection,li a:hover::selection,dl a:hover::selection{background:var(--back-white)}figcaption a[href^="#"],p a[href^="#"],.page-tags a[href^="#"],table a[href^="#"],li a[href^="#"],dl a[href^="#"]{background-image:linear-gradient(var(--text-gray), var(--text-gray));background-size:1px 1px;background-repeat:repeat-x;background-position:0% 95%}figcaption a[href^="#"]::selection,p a[href^="#"]::selection,.page-tags a[href^="#"]::selection,table a[href^="#"]::selection,li a[href^="#"]::selection,dl a[href^="#"]::selection{background:var(--back-white)}figcaption a[href^="#"]:hover,p a[href^="#"]:hover,.page-tags a[href^="#"]:hover,table a[href^="#"]:hover,li a[href^="#"]:hover,dl a[href^="#"]:hover{opacity:0.9;filter:drop-shadow(1px 1px 1px var(--back-white));background-image:linear-gradient(var(--text-medium), var(--text-medium));background-size:1px 1px;background-repeat:repeat-x;background-position:0% 95%}figcaption a[href^="#"]:hover::selection,p a[href^="#"]:hover::selection,.page-tags a[href^="#"]:hover::selection,table a[href^="#"]:hover::selection,li a[href^="#"]:hover::selection,dl a[href^="#"]:hover::selection{background:var(--back-white)}#theme-switch:checked~#page #breadcrumbs a:hover,#theme-switch:checked~#page figcaption a:hover,#theme-switch:checked~#page p a:hover,#theme-switch:checked~#page .page-tags a:hover,#theme-switch:checked~#page table a:hover,#theme-switch:checked~#page #crosslinks a:not(.highlight):hover,#theme-switch:checked~#page li a:hover,#theme-switch:checked~#page dl a:hover{background-image:url("data:image/svg+xml;charset=utf8,%3Csvg id='squiggle-link' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns:ev='http://www.w3.org/2001/xml-events' viewBox='0 0 20 4'%3E%3Cstyle type='text/css'%3E.squiggle{animation:shift .3s linear infinite;}@keyframes shift {from {transform:translateX(0);}to {transform:translateX(-20px);}}%3C/style%3E%3Cpath fill='none' stroke='%23ffffff' stroke-width='2' class='squiggle' d='M0,3.5 c 5,0,5,-3,10,-3 s 5,3,10,3 c 5,0,5,-3,10,-3 s 5,3,10,3'/%3E%3C/svg%3E")}*:target::before{content:"🠖";position:absolute;left:-7rem;top:calc(0.5em - 2rem);line-height:1;color:#e65353aa;font-size:3rem;font-style:normal}@media (max-width: 1000px){*:target::before{content:"🠔";left:unset;right:0}}#content .page-intro p a,#footnotes a{background-image:linear-gradient(var(--text-gray), var(--text-gray));background-size:1px 1px;background-repeat:repeat-x;background-position:0% 95%;border-radius:1px;text-decoration:none}#content .page-intro p a::selection,#footnotes a::selection{background:var(--back-medium)}#content .page-intro p a *,#content .page-intro p a *:after,#content .page-intro p a:after,#content .page-intro p a *:before,#content .page-intro p a:before,#footnotes a *,#footnotes a *:after,#footnotes a:after,#footnotes a *:before,#footnotes a:before{text-shadow:none}#content .page-intro p a:visited,#footnotes a:visited{color:var(--text-gray)}#content .page-intro p a:hover,#footnotes a:hover{background-image:linear-gradient(var(--text-gray), var(--text-gray));background-size:1px 1px;background-repeat:repeat-x;background-position:0% 95%;border-radius:1px;text-decoration:none}#content .page-intro p a:hover::selection,#footnotes a:hover::selection{background:var(--back-medium)}#content .page-intro p a:hover *,#content .page-intro p a:hover *:after,#content .page-intro p a:hover:after,#content .page-intro p a:hover *:before,#content .page-intro p a:hover:before,#footnotes a:hover *,#footnotes a:hover *:after,#footnotes a:hover:after,#footnotes a:hover *:before,#footnotes a:hover:before{text-shadow:none}#content .page-intro p a:hover:visited,#footnotes a:hover:visited{color:var(--text-gray)}.btn{padding:7px 14px;border-style:solid;border-width:1px;border-color:var(--back-light);border-radius:1px;font-family:"Open Sans",sans;font-variant:all-small-caps;font-size:14px;font-style:normal;letter-spacing:2px;background-image:none;cursor:pointer}.btn:hover{background-color:var(--back-light);background-image:none}.btn.disabled{color:var(--text-light)}.btn.disabled:hover{cursor:default}.btn.small{padding:3px 6px;border-style:solid;border-width:1px;border-color:var(--back-light);border-radius:1px;font-family:"Open Sans",sans;font-variant:all-small-caps;font-size:12px;font-style:normal;letter-spacing:2px;background-image:none;padding-right:9px;padding-left:9px}.btn.small:hover{background-color:var(--back-light);background-image:none}.btn.highlight{text-shadow:none;text-decoration:none;color:var(--text-dark);background-color:yellow}.btn.primary{text-shadow:none;text-decoration:none;color:var(--back-white);background-color:var(--accent)}.btn.primary:hover{background-color:var(--back-light);background-image:none;color:var(--text-dark)}.image-link,.image-link:hover{background:none;text-shadow:none;text-decoration:none}div.link-preview{border:1px solid var(--back-medium);border-radius:0.5em;overflow:hidden;position:relative;max-height:5em;padding-left:0.5em}div.link-preview a{color:initial;text-decoration:none}div.link-preview img{border-right:1px solid var(--back-medium);float:left;height:5em;margin-left:-0.5em;margin-right:0.5em}div.link-preview p{margin:0;font-size:10pt}div.link-preview p b{font-size:11pt}div.link-preview small{float:right;font-family:sans;color:var(--text-light);margin:0.45em 0.6em}ul,ol,dl{list-style:none;list-style-position:outside;padding:0}ul li::before,ul dt::before,ol li::before,ol dt::before,dl li::before,dl dt::before{display:inline-block;width:1em;font-family:"Open Sans",sans;font-weight:normal;font-size:15px;line-height:1.6;color:var(--text-gray)}ul li,ol li,dl li{margin:5px 0;font-size:14px}ul li p,ol li p,dl li p{font-size:15px}ul li::before{content:"•";margin-left:-1em}ol{counter-reset:li}ol li::before{content:counter(li);margin-left:-1.5em;margin-right:0.5em;text-align:right;direction:rtl}ol li{counter-increment:li}ul ul,ol ol{padding-left:20px}ul ul ul,ol ol ol{padding-left:30px}li p:first-child{display:inline-block;margin-bottom:0}dl dt::before{content:"•";margin-left:-1em}dl dt{font-weight:normal;margin-bottom:10px}dl dd{font-style:italic;margin-bottom:20px}li .checkbox{display:inline-block;width:0.9em;height:0.9em;border-radius:3px;margin:3px;top:4px;position:relative}li.on>.checkbox{background:#7bc275;box-shadow:0 0 2px #7bc275}li.trans>.checkbox{background:#e69055;box-shadow:0 0 2px #e69055}li.off>.checkbox{background:#ff665c;box-shadow:0 0 2px #ff665c;top:6px}li.on>.checkbox::after{content:'';height:0.45em;width:0.225em;-webkit-transform-origin:left top;transform-origin:left top;transform:scaleX(-1) rotate(135deg);border-right:2.8px solid #fff;border-top:2.8px solid #fff;opacity:0.9;left:0.10em;top:0.45em;position:absolute}li.trans>.checkbox::after{content:'';font-weight:bold;font-size:1.6em;position:absolute;top:0.2em;left:0.11em;width:0.35em;height:0.12em;background:#fff;opacity:0.9;border-radius:0.1em}li.off>.checkbox::after{content:'✖';color:#fff;opacity:0.9;position:relative;top:-0.50rem;left:0.17em;font-size:0.75em}#org-div-home-and-up{display:none !important}.outline-2 h2{font-size:30px}.outline-3 h3{font-size:24px;font-style:normal}.outline-2 .section-number-2{font-size:30px}.outline-3 .section-number-3{font-size:24px}.timestamp,.timestamp-kwd{font-family:"Open Sans",sans;font-weight:normal;font-style:normal;font-size:12px;line-height:1.9;color:var(--text-light);background-color:var(--back-white);border-radius:1px}.todo,.done{padding:.1em .2em;border-style:solid;border-width:1px;border-color:var(--back-light);border-radius:1px;font-family:"Open Sans",sans;font-variant:all-small-caps;font-size:max(0.4em, 10px);font-style:normal;letter-spacing:2px;background-image:none;line-height:1;white-space:nowrap;vertical-align:middle;padding:0.1em 0.5em;background-color:var(--back-white);background-color:transparent;border:none;font-weight:bold}.todo:hover,.done:hover{background-color:var(--back-light);background-image:none}.todo:not(.active),.done:not(.active){border-color:var(--back-white)}.todo.active,.done.active{text-shadow:none;text-decoration:none;color:var(--back-white);background-color:var(--code-foreground)}.todo.active:hover,.done.active:hover{background-color:var(--back-light);background-image:none;color:var(--text-dark)}.outline-2,.outline-3,.outline-4{contain:layout}.outline-2 .todo,.outline-2 .done,.outline-3 .todo,.outline-3 .done,.outline-4 .todo,.outline-4 .done{font-size:18px}.todo{color:#ee3333}.done{color:var(--text-light)}.tag>span{padding:.1em .2em;border-style:solid;border-width:1px;border-color:var(--back-light);border-radius:1px;font-family:"Open Sans",sans;font-variant:all-small-caps;font-size:max(0.4em, 10px);font-style:normal;letter-spacing:2px;background-image:none;line-height:1;white-space:nowrap;vertical-align:middle;padding:0.1em 0.5em;background-color:var(--back-white);border-radius:100px}.tag>span:hover{background-color:var(--back-light);background-image:none}.tag>span:not(.active){border-color:var(--back-white)}.tag>span.active{text-shadow:none;text-decoration:none;color:var(--back-white);background-color:var(--code-foreground)}.tag>span.active:hover{background-color:var(--back-light);background-image:none;color:var(--text-dark)}.priority{color:var(--text-light);font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace}.footref{text-shadow:none}.footpara{display:inline}.footdef{margin-bottom:1em}th.org-right{text-align:center}th.org-left{text-align:center}th.org-center{text-align:center}td.org-right{text-align:right}td.org-left{text-align:left}td.org-center{text-align:center}div.org-center{text-align:center}span.acr{font-variant-caps:all-small-caps;letter-spacing:0.1em}.music-track{display:flex;justify-content:center;align-items:center;flex-wrap:wrap}.music-track img{height:6rem;margin-right:2rem}.music-track a{text-decoration:none}.music-track span{min-width:35%}div.table{position:relative}div.table .gutter{left:calc(20px - 2.5rem);padding-top:18px}div.table .tabular{max-width:100%;overflow-x:auto}table{border-color:var(--text-light);border-left:transparent;border-right:transparent;border-style:solid;border-width:2px;border-collapse:collapse;font-size:15px;font-family:"Open Sans",sans;margin:20px;padding:20px}table thead{font-family:"Open Sans",sans;font-weight:normal;font-style:normal;font-size:12px;line-height:1.9;color:var(--text-light);font-size:15px}table thead tr th{padding:4px 10px;background-color:#9991}table thead tr:last-of-type th{border-bottom:solid 1px var(--text-light)}table tr,table th,table td{border:none}table tbody tr td{border-top:0;padding:0 10px}table tr{line-height:1.9}table caption{margin-bottom:10px;font-family:"Open Sans",sans;font-weight:normal;font-size:15px;line-height:1.6;color:var(--text-gray)}table caption .table-number{font-family:"Open Sans",sans;font-weight:normal;font-style:normal;font-size:12px;line-height:1.9;color:var(--text-light)}::-webkit-scrollbar{width:10px;height:8px}::-webkit-scrollbar-track{background:#9992}::-webkit-scrollbar-thumb{background:#ccc}::-webkit-scrollbar-thumb:hover{background:#888}@media (min-width: 1280px){#table-of-contents{position:fixed;width:18rem;right:1rem;top:0;padding:1em;line-height:1.5;margin-top:4rem}#table-of-contents h2{margin-top:0}#table-of-contents #text-table-of-contents{position:relative}#table-of-contents #text-table-of-contents::before,#table-of-contents #text-table-of-contents::after{position:absolute;content:'';width:calc(100% - 10px);height:0.7rem;left:0;z-index:1}#table-of-contents #text-table-of-contents::before{top:0;background:linear-gradient(180deg, var(--back-light) 0%, var(--back-light) 35%, rgba(0,0,0,0) 100%)}#table-of-contents #text-table-of-contents::after{bottom:0;background:linear-gradient(0deg, var(--back-light) 0%, var(--back-light) 35%, rgba(0,0,0,0) 100%)}#table-of-contents #text-table-of-contents>ul{list-style:none;padding:0;margin:0;max-height:calc(100vh - 5rem - 50px);overflow-y:auto;overflow-x:hidden;scrollbar-width:thin}#table-of-contents #text-table-of-contents>ul ul{padding-left:2em}#table-of-contents #text-table-of-contents>ul ul.active{display:inline-block}#table-of-contents #text-table-of-contents>ul li.active>ul{display:inline-block}#table-of-contents #text-table-of-contents>ul li.active>label a,#table-of-contents #text-table-of-contents>ul li.active>a{color:var(--text-dark)}#table-of-contents #text-table-of-contents>ul li.active>input:not(:checked)~label::after{transform:rotate(90deg);top:5px;opacity:0.35}#table-of-contents #text-table-of-contents>ul>li:last-child{margin-bottom:2rem}}@media (min-width: 1440px){#table-of-contents{width:20rem;right:2rem}}@media (min-width: 1640px){#table-of-contents{right:5rem}}@media (min-width: 2000px){#table-of-contents{width:25rem}}#table-of-contents #text-table-of-contents ul{width:100%}#table-of-contents #text-table-of-contents>ul ul{display:none}#table-of-contents #text-table-of-contents li input[type=checkbox]{display:none}#table-of-contents #text-table-of-contents li label{display:inline-block;width:100%;position:relative}#table-of-contents #text-table-of-contents li a{display:inline-block;color:var(--text-gray);text-decoration:none !important;text-shadow:none;background:none !important}#table-of-contents #text-table-of-contents li label::after{content:"\25b6";color:var(--text-gray);margin-left:0.5em;font-size:10px;display:inline-block;position:absolute;top:3.4px;left:-20px;opacity:0.8}#table-of-contents #text-table-of-contents li input:checked~ul{display:inline-block !important}#table-of-contents #text-table-of-contents li input:checked~label a{font-weight:bold}#table-of-contents #text-table-of-contents li input:checked~label::after{transform:rotate(90deg);top:5px}#table-of-contents #text-table-of-contents li::before{content:"" !important}.page-tags a{padding:.1em .2em;border-style:solid;border-width:1px;border-color:var(--back-light);border-radius:1px;font-family:"Open Sans",sans;font-variant:all-small-caps;font-size:max(0.4em, 10px);font-style:normal;letter-spacing:2px;background-image:none;line-height:1;white-space:nowrap;vertical-align:middle;padding:0.1em 0.5em;background-color:var(--back-white);margin-right:5px;line-height:3em}.page-tags a:hover{background-color:var(--back-light);background-image:none}.page-tags a:not(.active){border-color:var(--back-white)}.page-tags a.active{text-shadow:none;text-decoration:none;color:var(--back-white);background-color:var(--code-foreground)}.page-tags a.active:hover{background-color:var(--back-light);background-image:none;color:var(--text-dark)}@media print{h2{page-break-before:always}h1,h2,h3,h4,h5{page-break-after:avoid}#switch-label{display:none}#content,#page-header{margin-top:0}#table-of-contents #text-table-of-contents>ul ul{display:inline-block}#table-of-contents #text-table-of-contents>ul a::after{content:leader(".") target-counter(attr(href), page)}#table-of-contents #text-table-of-contents li label::after{display:none}img{filter:none}}@page{size:auto;margin-top:4mm;margin-bottom:4mm}
</style>
<link rel='shortcut icon' type='image/png' href='https://www.gnu.org/software/emacs/favicon.png'>
</head>
<body>
<input type='checkbox' id='theme-switch'><div id='page'><label id='switch-label' for='theme-switch'></label><div id="content">
<header class="page-header"><div class="page-meta"><!--<a href="https://github.com/shaunsingh/vimrc-dotfiles/commit/fatal: not a git repository (or any of the parent directories): .git" style="text-decoration: none"><code style="padding: 0; color: var(--text-light); font-size: inherit; opacity: 0.7">fatal: not a git repository (or any of the parent directories): .git</code></a>--> 2021-08-19 04:46 UTC, <a href="https://github.com/shaunsingh/vimrc-dotfiles/commit/fatal: not a git repository (or any of the parent directories): .git" style="text-decoration: none"><code style="padding: 0; color: var(--text-light); font-size: inherit; opacity: 0.7">fatal: not a git repository (or any of the parent directories): .git</code></a>, Shaurya Singh</div>

<h1 class="title">Doom Emacs Configuration</h1>
</header><nav id="table-of-contents">
<h2><a href="#" style="color:inherit; text-decoration: none;">Table of Contents</a></h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgb30c5a4">1. Intro</a></li>
<li><input type='checkbox' id='toc--orgff600d2'/><label for='toc--orgff600d2'><a href="#orgff600d2">2. Basic Configuration</a></label>
<ul>
<li><a href="#org7713997">2.1. Personal information</a></li>
<li><a href="#org10b2955">2.2. Shell</a></li>
<li><a href="#org7fcd527">2.3. Clipboard</a></li>
<li><a href="#org4107d9b">2.4. Fonts</a></li>
<li><a href="#org8c033f6">2.5. Themes</a></li>
<li><a href="#org015c46e">2.6. Lsp, and Company</a></li>
<li><a href="#org78b4245">2.7. Better Defaults</a></li>
<li><a href="#org3f30fa7">2.8. Periodic Table</a></li>
<li><a href="#org021bd5f">2.9. Selectric mode</a></li>
</ul>
</li>
<li><input type='checkbox' id='toc--org58e8370'/><label for='toc--org58e8370'><a href="#org58e8370">3. Visual configuration</a></label>
<ul>
<li><a href="#orgb49dd40">3.1. Modeline</a></li>
<li><a href="#org4581db3">3.2. Centaur tabs</a></li>
<li><a href="#orgf13c3b6">3.3. Treemacs</a></li>
<li><a href="#org067e591">3.4. Emojis</a></li>
<li><a href="#org85b1d1a">3.5. Splash screen</a></li>
<li><a href="#org568b75d">3.6. Writeroom</a></li>
<li><a href="#orgd3670d6">3.7. Font Display</a></li>
<li><a href="#org69ca059">3.8. Symbols</a></li>
<li><a href="#orgf6b2ea8">3.9. Keycast</a></li>
<li><a href="#org1453cf7">3.10. Transparency</a></li>
<li><a href="#org07669b4">3.11. Screenshots</a></li>
</ul>
</li>
<li><input type='checkbox' id='toc--org515ae4c'/><label for='toc--org515ae4c'><a href="#org515ae4c">4. Org</a></label>
<ul>
<li><input type='checkbox' id='toc--org15d8182'/><label for='toc--org15d8182'><a href="#org15d8182">4.1. Org-Mode</a></label>
<ul>
<li><a href="#org9a682a0">4.1.1. HTML</a></li>
</ul>
</li>
<li><a href="#orgd233f41">4.2. Org-Roam</a></li>
<li><a href="#org78c2af6">4.3. Org-Agenda</a></li>
<li><input type='checkbox' id='toc--orga3275a3'/><label for='toc--orga3275a3'><a href="#orga3275a3">4.4. Org-Capture</a></label>
<ul>
<li><a href="#orgd822abd">4.4.1. Prettify</a></li>
<li><a href="#org1ae83c8">4.4.2. Templates</a></li>
</ul>
</li>
<li><a href="#orga712749">4.5. ORG Plot</a></li>
<li><a href="#orgb2fcc3d">4.6. View Exported File</a></li>
</ul>
</li>
<li><input type='checkbox' id='toc--org8710952'/><label for='toc--org8710952'><a href="#org8710952">5. Latex</a></label>
<ul>
<li><a href="#org775d136">5.1. Basic configuration</a></li>
<li><input type='checkbox' id='toc--orgd22314f'/><label for='toc--orgd22314f'><a href="#orgd22314f">5.2. CalcTeX</a></label>
<ul>
<li><a href="#orgfbbf7fe">5.2.1. Embedded calc</a></li>
</ul>
</li>
<li><a href="#orgc16a3b4">5.3. PDF-Tools</a></li>
<li><a href="#orgb27de7d">5.4. Export</a></li>
</ul>
</li>
<li><a href="#orgdcacedd">6. Mu4e</a></li>
<li><a href="#org79640b8">7. Magit</a></li>
</ul>
</div>
</nav>
<a href="https://github.com/tecosaur/emacs-config/"
   style="font-family: 'Open Sans'; background-image: none; color: inherit;
   text-decoration: none; position: relative; top: clamp(-26px, calc(1280px - 100vw), 0px); opacity: 0.7;">
  <img src="https://upload.wikimedia.org/wikipedia/commons/9/91/Octicons-mark-github.svg"
       class="invertible" alt="GitHub Octicon"
       style="height: 1em; position: relative; top: 0.1em;">
  View on GitHub</a>

<blockquote>
<p>
Let us change our traditional attitude to the construction of programs:
Instead of imagining that our main task is to instruct a computer what to do,
let us concentrate rather on explaining to human beings what we want a
computer to do. &#x2014; Donald Knuth
</p>
</blockquote>

<div id="outline-container-orgb30c5a4" class="outline-2">
<h2 id="orgb30c5a4"><span class="section-number-2">1.</span> Intro<a aria-hidden="true" href="#orgb30c5a4">#</a> </h2>
<div class="outline-text-2" id="text-1">
<p>
Customizing an editor can be very rewarding &#x2026; until you have to leave it.
For years I have been looking for ways to avoid this pain.
Then I discovered <a href="https://github.com/cknadler/vim-anywhere">vim-anywhere</a>. The issue is
</p>

<ol class="org-ol">
<li>I switched to neovim, not vim.</li>
<li>Firenvim is only for browsers</li>
<li>Even if I found a neovim alternative, you can&rsquo;t do everything.</li>
</ol>

<p>
I wanted everything, in one place. Hence why I (mostly) switched to Emacs.
</p>

<p>
This was enough for me to install Emacs, but I soon learned there are <a href="https://github.com/remacs/remacs#why-emacs">far more
compelling reasons</a> to keep using it.
</p>
</div>
</div>

<div id="outline-container-orgff600d2" class="outline-2">
<h2 id="orgff600d2"><span class="section-number-2">2.</span> Basic Configuration<a aria-hidden="true" href="#orgff600d2">#</a> </h2>
<div class="outline-text-2" id="text-2">
<p>
Make this file run (slightly) faster with lexical binding
</p>
<details id='orga8fc79f' class='code' open><summary><span class="lang">elisp</span></summary>
<div class='gutter'>
<a href='#orga8fc79f'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-elisp"><span class="org-comment-delimiter">;;; </span><span class="org-comment">config.el -*- lexical-binding: t; -*-</span>
</pre>
</div>
</details>

<p>
I also don&rsquo;t want to compile my org config every time I make a change. Lets fix that
</p>
<details id='org128b9bd' class='code' open><summary><span class="lang">elisp</span></summary>
<div class='gutter'>
<a href='#org128b9bd'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-elisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">remove-hook</span> <span class="org-highlight-quoted-quote">'</span><span class="org-variable-name">org-mode-hook</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">+literate-enable-recompile-h</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>
</div>

<div id="outline-container-org7713997" class="outline-3">
<h3 id="org7713997"><span class="section-number-3">2.1.</span> Personal information<a aria-hidden="true" href="#org7713997">#</a> </h3>
<div class="outline-text-3" id="text-2-1">
<p>
Of course we need to tell emacs who I am
</p>
<details id='orged4993c' class='code' open><summary><span class="lang">elisp</span></summary>
<div class='gutter'>
<a href='#orged4993c'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-elisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">user-full-name</span> <span class="org-string">"Shaurya Singh"</span>
      <span class="org-variable-name">user-mail-address</span> <span class="org-string">"shaunsingh0207@gmail.com"</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>
</div>
</div>

<div id="outline-container-org10b2955" class="outline-3">
<h3 id="org10b2955"><span class="section-number-3">2.2.</span> Shell<a aria-hidden="true" href="#org10b2955">#</a> </h3>
<div class="outline-text-3" id="text-2-2">
<p>
I use the fish shell. If you use zsh/bash, be sure to change this
</p>
<details id='org5603869' class='code' open><summary><span class="lang">elisp</span></summary>
<div class='gutter'>
<a href='#org5603869'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-elisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">explicit-shell-file-name</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">executable-find</span> <span class="org-string">"fish"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>
</div>
</div>

<div id="outline-container-org7fcd527" class="outline-3">
<h3 id="org7fcd527"><span class="section-number-3">2.3.</span> Clipboard<a aria-hidden="true" href="#org7fcd527">#</a> </h3>
<div class="outline-text-3" id="text-2-3">
<p>
Using pgtk/wayland, theres a bug where it can&rsquo;t use the clipboard, to fix this we can use the following snippet
</p>
<details id='orge721597' class='code' open><summary><span class="lang">elisp</span></summary>
<div class='gutter'>
<a href='#orge721597'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-elisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">getenv</span> <span class="org-string">"WAYLAND_DISPLAY"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> wl-copy-p nil
        <span class="org-variable-name">interprogram-cut-function</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-4">(</span>text<span class="org-rainbow-delimiters-depth-4">)</span>
                                    <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">setq-local</span> <span class="org-variable-name">process-connection-type</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">pipe</span><span class="org-rainbow-delimiters-depth-4">)</span>
                                    <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">setq</span> wl-copy-p <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">start-process</span> <span class="org-string">"wl-copy"</span> nil <span class="org-string">"wl-copy"</span> <span class="org-string">"-f"</span> <span class="org-string">"-n"</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
                                    <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">process-send-string</span> wl-copy-p text<span class="org-rainbow-delimiters-depth-4">)</span>
                                    <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">process-send-eof</span> wl-copy-p<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-variable-name">interprogram-paste-function</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-4">()</span>
                                      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">unless</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">and</span> wl-copy-p <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">process-live-p</span> wl-copy-p<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
                                        <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">shell-command-to-string</span> <span class="org-string">"wl-paste -n | tr -d '\r'"</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

</pre>
</div>
</details>
</div>
</div>

<div id="outline-container-org4107d9b" class="outline-3">
<h3 id="org4107d9b"><span class="section-number-3">2.4.</span> Fonts<a aria-hidden="true" href="#org4107d9b">#</a> </h3>
<div class="outline-text-3" id="text-2-4">
<p>
I like the apple fonts for programming, so I&rsquo;ll go with Liga SFMono Nerd Font. I prefer a rounder font for plain text, so I&rsquo;ll go with Menlo for that. I have a retina display as well, so lets keep the fonts light.
</p>
<details id='org54803fe' class='code' open><summary><span class="lang">elisp</span></summary>
<div class='gutter'>
<a href='#org54803fe'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-elisp"><span class="org-comment-delimiter">;;</span><span class="org-comment">fonts</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">doom-font</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">font-spec</span> <span class="org-builtin">:family</span> <span class="org-string">"Liga SFMono Nerd Font"</span> <span class="org-builtin">:size</span> <span class="org-highlight-numbers-number">14</span><span class="org-rainbow-delimiters-depth-2">)</span>
      <span class="org-variable-name">doom-big-font</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">font-spec</span> <span class="org-builtin">:family</span> <span class="org-string">"Liga SFMono Nerd Font"</span> <span class="org-builtin">:size</span> <span class="org-highlight-numbers-number">20</span><span class="org-rainbow-delimiters-depth-2">)</span>
      <span class="org-variable-name">doom-variable-pitch-font</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">font-spec</span> <span class="org-builtin">:family</span> <span class="org-string">"SF Pro"</span> <span class="org-builtin">:size</span> <span class="org-highlight-numbers-number">16</span><span class="org-rainbow-delimiters-depth-2">)</span>
      <span class="org-variable-name">doom-unicode-font</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">font-spec</span> <span class="org-builtin">:family</span> <span class="org-string">"Liga SFMono Nerd Font"</span><span class="org-rainbow-delimiters-depth-2">)</span>
      <span class="org-variable-name">doom-serif-font</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">font-spec</span> <span class="org-builtin">:family</span> <span class="org-string">"Liga SFMono Nerd Font"</span> <span class="org-builtin">:weight</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">Regular</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>

<p>
For mixed pitch, I would go with something comfier. I like helvetica, so lets go with that
</p>
<details id='orgae8a7c5' class='code' open><summary><span class="lang">elisp</span></summary>
<div class='gutter'>
<a href='#orgae8a7c5'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-elisp"><span class="org-comment-delimiter">;;</span><span class="org-comment">mixed pitch modes</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">mixed-pitch-modes</span> <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-2">(</span>org-mode LaTeX-mode markdown-mode gfm-mode Info-mode<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Modes that `</span><span class="org-doc"><span class="org-constant">mixed-pitch-mode</span></span><span class="org-doc">' should be enabled in, but only after UI initialisation."</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">init-mixed-pitch-h</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-doc">"Hook `</span><span class="org-doc"><span class="org-constant">mixed-pitch-mode</span></span><span class="org-doc">' into each mode in `</span><span class="org-doc"><span class="org-constant">mixed-pitch-modes</span></span><span class="org-doc">'.</span>
<span class="org-doc">Also immediately enables `</span><span class="org-doc"><span class="org-constant">mixed-pitch-modes</span></span><span class="org-doc">' if currently in one of the modes."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">memq</span> <span class="org-variable-name">major-mode</span> <span class="org-variable-name">mixed-pitch-modes</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-variable-name">mixed-pitch-mode</span> <span class="org-highlight-numbers-number">1</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">dolist</span> <span class="org-rainbow-delimiters-depth-3">(</span>hook <span class="org-variable-name">mixed-pitch-modes</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">add-hook</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">intern</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">concat</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">symbol-name</span> hook<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-string">"-hook"</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-variable-name">mixed-pitch-mode</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">add-hook</span> <span class="org-highlight-quoted-quote">'</span><span class="org-variable-name">doom-init-ui-hook</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">init-mixed-pitch-h</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">add-hook!</span> <span class="org-highlight-quoted-quote">'</span><span class="org-variable-name">org-mode-hook</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-variable-name">+org-pretty-mode</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-comment-delimiter">;</span><span class="org-comment">enter mixed pitch mode in org mode</span>

<span class="org-comment-delimiter">;;</span><span class="org-comment">set mixed pitch font</span>
 <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">after!</span> mixed-pitch
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defface</span> <span class="org-variable-name">variable-pitch-serif</span>
    <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>t <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-builtin">:family</span> <span class="org-string">"serif"</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-doc">"A variable-pitch face with serifs."</span>
    <span class="org-builtin">:group</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">basic-faces</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">mixed-pitch-set-height</span> t<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> variable-pitch-serif-font <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">font-spec</span> <span class="org-builtin">:family</span> <span class="org-string">"SF Pro"</span> <span class="org-builtin">:size</span> <span class="org-highlight-numbers-number">16</span> <span class="org-builtin">:weight</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">Medium</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">set-face-attribute</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">variable-pitch-serif</span> nil <span class="org-builtin">:font</span> variable-pitch-serif-font<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defun</span> <span class="org-function-name">mixed-pitch-serif-mode</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-type">&amp;optional</span> arg<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-doc">"Change the default face of the current buffer to a serifed variable pitch, while keeping some faces fixed pitch."</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-variable-name">mixed-pitch-face</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">variable-pitch-serif</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-variable-name">mixed-pitch-mode</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">or</span> arg <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">toggle</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>

<p>
Just in case the fonts aren&rsquo;t there, lets add a fallback
</p>
<details id='org7464dd3' class='code' open><summary class='named'><span class="name">detect-missing-fonts</span><span class="lang">elisp</span></summary>
<div class='gutter'>
<a href='#org7464dd3'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-elisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">required-fonts</span> <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"SF Pro"</span> <span class="org-string">"Liga SFMono Nerd Font"</span> <span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">available-fonts</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">delete-dups</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">or</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">font-family-list</span><span class="org-rainbow-delimiters-depth-4">)</span>
                   <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">split-string</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">shell-command-to-string</span> <span class="org-string">"fc-list : family"</span><span class="org-rainbow-delimiters-depth-1">)</span>
                                 <span class="org-string">"[,\n]"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">missing-fonts</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">delq</span> nil <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">mapcar</span>
             <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-1">(</span>font<span class="org-rainbow-delimiters-depth-1">)</span>
               <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">unless</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">delq</span> nil <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">mapcar</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-1">(</span>f<span class="org-rainbow-delimiters-depth-1">)</span>
                           <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">string-match-p</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">format</span> <span class="org-string">"^%s$"</span> font<span class="org-rainbow-delimiters-depth-2">)</span> f<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
                                         <span class="org-variable-name">available-fonts</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
                                         font<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
                                         <span class="org-variable-name">required-fonts</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">if</span> <span class="org-variable-name">missing-fonts</span>
    <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">pp-to-string</span>
     <span class="org-highlight-quoted-quote">`</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">unless</span> <span class="org-variable-name">noninteractive</span>
        <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">add-hook!</span> <span class="org-highlight-quoted-quote">'</span><span class="org-variable-name">doom-init-ui-hook</span>
          <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">run-at-time</span> nil nil
                       <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-3">()</span>
                         <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">message</span> <span class="org-string">"%s missing the following fonts: %s"</span>
                                  <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">propertize</span> <span class="org-string">"Warning!"</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">face</span> <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-1">(</span>bold warning<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
                                  <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">mapconcat</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-2">(</span>font<span class="org-rainbow-delimiters-depth-2">)</span>
                                               <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">propertize</span> font <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">face</span> <span class="org-highlight-quoted-quote">'</span><span class="org-variable-name">font-lock-variable-name-face</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
                                             <span class="org-highlight-quoted-quote">'</span>,<span class="org-variable-name">missing-fonts</span>
                                             <span class="org-string">", "</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
                         <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">sleep-for</span> <span class="org-highlight-numbers-number">0.5</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-string">";; No missing fonts detected"</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>

<details id='orga9f5932' class='code' open><summary><span class="lang">Emacs Lisp</span></summary>
<div class='gutter'>
<a href='#orga9f5932'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-emacs-lisp">&lt;&lt;detect-missing-fonts<span class="org-rainbow-delimiters-depth-1">()</span>&gt;&gt;
</pre>
</div>
</details>
</div>
</div>

<div id="outline-container-org8c033f6" class="outline-3">
<h3 id="org8c033f6"><span class="section-number-3">2.5.</span> Themes<a aria-hidden="true" href="#org8c033f6">#</a> </h3>
<div class="outline-text-3" id="text-2-5">
<p>
Right now I&rsquo;m using doom-vibrant, but I use doom-flatwhite sometimes
</p>
<details id='org6fcd29f' class='code' open><summary><span class="lang">elisp</span></summary>
<div class='gutter'>
<a href='#org6fcd29f'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-elisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">doom-theme</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">doom-vibrant</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">doom-vibrant-padded-modeline</span> t<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-comment-delimiter">;;</span><span class="org-comment">(setq doom-theme 'doom-flatwhite)</span>
<span class="org-comment-delimiter">;;</span><span class="org-comment">(setq doom-fw-padded-modeline t)</span>
</pre>
</div>
</details>
</div>
</div>

<div id="outline-container-org015c46e" class="outline-3">
<h3 id="org015c46e"><span class="section-number-3">2.6.</span> Lsp, and Company<a aria-hidden="true" href="#org015c46e">#</a> </h3>
<div class="outline-text-3" id="text-2-6">
<p>
The default lsp config is nice, but has a few invasive features we can disable. Lets set up the java LSP as well
</p>
<details id='orga5cfb24' class='code' open><summary><span class="lang">elisp</span></summary>
<div class='gutter'>
<a href='#orga5cfb24'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-elisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">after!</span> company
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">company-idle-delay</span> <span class="org-highlight-numbers-number">0.5</span>
        <span class="org-variable-name">company-minimum-prefix-length</span> <span class="org-highlight-numbers-number">2</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">set-company-backend!</span>
  <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-2">(</span>text-mode
    markdown-mode
    gfm-mode<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-builtin">:seperate</span>
    company-yasnippet
    company-ispell
    company-files<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">;;</span><span class="org-comment">nested snippets</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">yas-triggers-in-field</span> t<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>

<p>
Lets add some snippets for latex
</p>
<details id='org05a9cd7' class='code' open><summary><span class="lang">elisp</span></summary>
<div class='gutter'>
<a href='#org05a9cd7'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-elisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package!</span> aas
  <span class="org-builtin">:commands</span> <span class="org-variable-name">aas-mode</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package!</span> laas
  <span class="org-builtin">:hook</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">LaTeX-mode</span> . <span class="org-variable-name">laas-mode</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:config</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defun</span> <span class="org-function-name">laas-tex-fold-maybe</span> <span class="org-rainbow-delimiters-depth-3">()</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">unless</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">equal</span> <span class="org-string">"/"</span> <span class="org-variable-name">aas-transient-snippet-key</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-function-name">+latex-fold-last-macro-a</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">add-hook</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">org-mode</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-variable-name">laas-mode</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">add-hook</span> <span class="org-highlight-quoted-quote">'</span><span class="org-variable-name">aas-post-snippet-expand-hook</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">laas-tex-fold-maybe</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

</pre>
</div>
</details>

<p>
And with a little help from henrik, lets use those snippets in org mode
</p>
<details id='org365bac7' class='code' open><summary><span class="lang">elisp</span></summary>
<div class='gutter'>
<a href='#org365bac7'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-elisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defadvice!</span> fixed-org-yas-expand-maybe-h <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-doc">"Expand a yasnippet snippet, if trigger exists at point or region is active.</span>
<span class="org-doc">Made for `</span><span class="org-doc"><span class="org-constant">org-tab-first-hook</span></span><span class="org-doc">'."</span>
  <span class="org-builtin">:override</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">+org-yas-expand-maybe-h</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">and</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">featurep!</span> <span class="org-builtin">:editor</span> snippets<span class="org-rainbow-delimiters-depth-4">)</span>
             <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">require</span> <span class="org-highlight-quoted-quote">'</span><span class="org-constant">yasnippet</span> nil t<span class="org-rainbow-delimiters-depth-4">)</span>
             <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">bound-and-true-p</span> <span class="org-variable-name">yas-minor-mode</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">and</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-variable-name">major-mode</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">cond</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">org-in-src-block-p</span> t<span class="org-rainbow-delimiters-depth-1">)</span>
                                  <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">org-src-get-lang-mode</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">org-eldoc-get-src-lang</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
                                 <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">org-inside-LaTeX-fragment-p</span><span class="org-rainbow-delimiters-depth-1">)</span>
                                  <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">latex-mode</span><span class="org-rainbow-delimiters-depth-4">)</span>
                                 <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-variable-name">major-mode</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
               <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-variable-name">org-src-tab-acts-natively</span> nil<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-comment-delimiter">; </span><span class="org-comment">causes breakages</span>
               <span class="org-comment-delimiter">;; </span><span class="org-comment">Smart indentation doesn't work with yasnippet, and painfully slow</span>
               <span class="org-comment-delimiter">;; </span><span class="org-comment">in the few cases where it does.</span>
               <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-variable-name">yas-indent-line</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">fixed</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
           <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">cond</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">and</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">or</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">not</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">bound-and-true-p</span> <span class="org-variable-name">evil-local-mode</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
                           <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">evil-insert-state-p</span><span class="org-rainbow-delimiters-depth-1">)</span>
                           <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">evil-emacs-state-p</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
                       <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">or</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">and</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">bound-and-true-p</span> <span class="org-variable-name">yas--tables</span><span class="org-rainbow-delimiters-depth-2">)</span>
                                <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">gethash</span> <span class="org-variable-name">major-mode</span> <span class="org-variable-name">yas--tables</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
                           <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">progn</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">yas-reload-all</span><span class="org-rainbow-delimiters-depth-2">)</span> t<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
                       <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-function-name">yas--templates-for-key-at-point</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
                  <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">yas-expand</span><span class="org-rainbow-delimiters-depth-3">)</span>
                  t<span class="org-rainbow-delimiters-depth-2">)</span>
                 <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">use-region-p</span><span class="org-rainbow-delimiters-depth-3">)</span>
                  <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">yas-insert-snippet</span><span class="org-rainbow-delimiters-depth-3">)</span>
                  t<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-comment-delimiter">;; </span><span class="org-comment"><span class="org-bold"><span class="org-constant">HACK</span></span></span><span class="org-comment"> Yasnippet breaks org-superstar-mode because yasnippets is</span>
         <span class="org-comment-delimiter">;;      </span><span class="org-comment">overzealous about cleaning up overlays.</span>
         <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">bound-and-true-p</span> <span class="org-variable-name">org-superstar-mode</span><span class="org-rainbow-delimiters-depth-1">)</span>
           <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">org-superstar-restart</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>

<p>
I think the LSP is a bit intrusive (especially with inline suggestions), so lets make it behave a bit more
</p>
<details id='org4982c7c' class='code' open><summary><span class="lang">elisp</span></summary>
<div class='gutter'>
<a href='#org4982c7c'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-elisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package!</span> lsp-ui
  <span class="org-builtin">:hook</span> <span class="org-rainbow-delimiters-depth-2">(</span>lsp-mode . lsp-ui-mode<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:config</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> lsp-ui-sideline-enable nil<span class="org-comment-delimiter">; </span><span class="org-comment">not anymore useful than flycheck</span>
        lsp-ui-doc-enable nil
        lsp-enable-symbol-highlighting nil<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">;;</span><span class="org-comment">java home for java-lsp</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">setenv</span> <span class="org-string">"JAVA_HOME"</span>  <span class="org-string">"/Library/Java/JavaVirtualMachines/zulu-11.jdk/Contents/Home"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> lsp-java-java-path <span class="org-string">"/Library/Java/JavaVirtualMachines/zulu-11.jdk/Contents/Home/bin/java"</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">;;</span><span class="org-comment">latex</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> lsp-tex-server <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">digestif</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>

<p>
Lets also setup lsp for org-mode
</p>
<details id='orgc92c21b' class='code' open><summary><span class="lang">elisp</span></summary>
<div class='gutter'>
<a href='#orgc92c21b'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-elisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">cl-defmacro</span> <span class="org-function-name">lsp-org-babel-enable</span> <span class="org-rainbow-delimiters-depth-2">(</span>lang<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Support LANG in org source code block."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> centaur-lsp <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">lsp-mode</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-warning">cl-check-type</span> lang stringp<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let*</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>edit-pre <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">intern</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">format</span> <span class="org-string">"org-babel-edit-prep:%s"</span> lang<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>intern-pre <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">intern</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">format</span> <span class="org-string">"lsp--%s"</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">symbol-name</span> edit-pre<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-highlight-quoted-quote">`</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">progn</span>
       <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">defun</span> ,intern-pre <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">info</span><span class="org-rainbow-delimiters-depth-1">)</span>
         <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>file-name <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">-&gt;&gt;</span> info caddr <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">alist-get</span> <span class="org-builtin">:file</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
           <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">unless</span> file-name
             <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">setq</span> file-name <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">make-temp-file</span> <span class="org-string">"babel-lsp-"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
           <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">buffer-file-name</span> file-name<span class="org-rainbow-delimiters-depth-2">)</span>
           <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">lsp-deferred</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
       <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">put</span> <span class="org-highlight-quoted-quote">'</span>,intern-pre <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">function-documentation</span>
            <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">format</span> <span class="org-string">"Enable lsp-mode in the buffer of org source block (%s)."</span>
                    <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">upcase</span> ,lang<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
       <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">fboundp</span> <span class="org-highlight-quoted-quote">'</span>,edit-pre<span class="org-rainbow-delimiters-depth-1">)</span>
           <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">advice-add</span> <span class="org-highlight-quoted-quote">'</span>,edit-pre <span class="org-builtin">:after</span> <span class="org-highlight-quoted-quote">'</span>,intern-pre<span class="org-rainbow-delimiters-depth-1">)</span>
         <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">progn</span>
           <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defun</span> ,edit-pre <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">info</span><span class="org-rainbow-delimiters-depth-3">)</span>
             <span class="org-rainbow-delimiters-depth-3">(</span>,intern-pre info<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
           <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">put</span> <span class="org-highlight-quoted-quote">'</span>,edit-pre <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">function-documentation</span>
                <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">format</span> <span class="org-string">"Prepare local buffer environment for org source block (%s)."</span>
                        <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">upcase</span> ,lang<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">org-babel-lang-list</span>
  <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"go"</span> <span class="org-string">"python"</span> <span class="org-string">"ipython"</span> <span class="org-string">"bash"</span> <span class="org-string">"sh"</span> <span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">dolist</span> <span class="org-rainbow-delimiters-depth-2">(</span>lang <span class="org-variable-name">org-babel-lang-list</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">eval</span> <span class="org-highlight-quoted-quote">`</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">lsp-org-babel-enable</span> ,lang<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>

<p>
Lets add some smarter parenthesis
</p>
<details id='orgcd84935' class='code' open><summary><span class="lang">Emacs Lisp</span></summary>
<div class='gutter'>
<a href='#orgcd84935'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">sp-local-pair</span>
 <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-2">(</span>org-mode<span class="org-rainbow-delimiters-depth-2">)</span>
 <span class="org-string">"&lt;&lt;"</span> <span class="org-string">"&gt;&gt;"</span>
 <span class="org-builtin">:actions</span> <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-2">(</span>insert<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>

<p>
And lastly lets add some helpful snippets for org-mode, and add a better templete
</p>
<details id='orgaa0e9d6' class='code' open><summary><span class="lang">elisp</span></summary>
<div class='gutter'>
<a href='#orgaa0e9d6'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-elisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">set-file-template!</span> <span class="org-string">"\\.org$"</span> <span class="org-builtin">:trigger</span> <span class="org-string">"__"</span> <span class="org-builtin">:mode</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">org-mode</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>
</div>
</div>

<div id="outline-container-org78b4245" class="outline-3">
<h3 id="org78b4245"><span class="section-number-3">2.7.</span> Better Defaults<a aria-hidden="true" href="#org78b4245">#</a> </h3>
<div class="outline-text-3" id="text-2-7">
<p>
The defaults for emacs aren&rsquo;t so good nowadays. Lets fix that up a bit
</p>
<details id='orga83250d' class='code' open><summary><span class="lang">elisp</span></summary>
<div class='gutter'>
<a href='#orga83250d'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-elisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">undo-limit</span> <span class="org-highlight-numbers-number">80000000</span>                          <span class="org-comment-delimiter">;</span><span class="org-comment">I mess up too much</span>
      <span class="org-variable-name">evil-want-fine-undo</span> t                        <span class="org-comment-delimiter">;</span><span class="org-comment">By default while in insert all changes are one big blob. Be more granular</span>
      <span class="org-variable-name">scroll-margin</span> <span class="org-highlight-numbers-number">2</span>                              <span class="org-comment-delimiter">;</span><span class="org-comment">having a little margin is nice</span>
      <span class="org-variable-name">auto-save-default</span> t                          <span class="org-comment-delimiter">;</span><span class="org-comment">I dont like to lose work</span>
      <span class="org-variable-name">display-line-numbers-type</span> nil                <span class="org-comment-delimiter">;</span><span class="org-comment">I dislike line numbers</span>
      <span class="org-variable-name">truncate-string-ellipsis</span> <span class="org-string">"&#8230;"</span>                 <span class="org-comment-delimiter">;</span><span class="org-comment">default ellipses suck</span>
      <span class="org-variable-name">browse-url-browser-function</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">xwidget-webkit-browse-url</span> <span class="org-comment-delimiter">;;</span><span class="org-comment">use xwidgets as my browser</span>
      <span class="org-variable-name">frame-resize-pixelwise</span> t<span class="org-rainbow-delimiters-depth-1">)</span>                    <span class="org-comment-delimiter">;</span><span class="org-comment">needed for twms</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq-default</span> <span class="org-variable-name">delete-by-moving-to-trash</span> t<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-comment-delimiter">;</span><span class="org-comment">delete to system trash instead</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">add-to-list</span> <span class="org-highlight-quoted-quote">'</span><span class="org-variable-name">default-frame-alist</span> <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-2">(</span>inhibit-double-buffering . t<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-comment-delimiter">;;</span><span class="org-comment">stops flickering</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-variable-name">fringe-mode</span> <span class="org-highlight-numbers-number">0</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-comment-delimiter">;;</span><span class="org-comment">disable fringe</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-variable-name">global-subword-mode</span> <span class="org-highlight-numbers-number">1</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-comment-delimiter">;;</span><span class="org-comment">navigate through Camel Case words</span>
</pre>
</div>
</details>

<p>
Ask for splits
</p>
<details id='org2b5b7c3' class='code' open><summary><span class="lang">elisp</span></summary>
<div class='gutter'>
<a href='#org2b5b7c3'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-elisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">evil-vsplit-window-right</span> t
      <span class="org-variable-name">evil-split-window-below</span> t<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>

<p>
&#x2026;and open a buffer for it
</p>
<details id='org0bde9b6' class='code' open><summary><span class="lang">elisp</span></summary>
<div class='gutter'>
<a href='#org0bde9b6'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-elisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defadvice!</span> prompt-for-buffer <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">&amp;rest</span> _<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:after</span> <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-2">(</span>evil-window-split evil-window-vsplit<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">consult-buffer</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>

<p>
The default bindings of doom are pretty good. I&rsquo;m not so good with motions though, so lets make life easier with avy
</p>
<details id='org5a7e60f' class='code' open><summary><span class="lang">elisp</span></summary>
<div class='gutter'>
<a href='#org5a7e60f'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-elisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">map!</span> <span class="org-builtin">:leader</span>
      <span class="org-builtin">:desc</span> <span class="org-string">"hop to word"</span> <span class="org-string">"w w"</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">avy-goto-word-0</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">map!</span> <span class="org-builtin">:leader</span>
      <span class="org-builtin">:desc</span> <span class="org-string">"hop to line"</span>
      <span class="org-string">"l"</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">avy-goto-line</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>

<p>
I also fine ; more intuitive than : for entering command mode
</p>
<details id='org99d6406' class='code' open><summary><span class="lang">elisp</span></summary>
<div class='gutter'>
<a href='#org99d6406'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-elisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">after!</span> evil
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">map!</span> <span class="org-builtin">:nmv</span> <span class="org-string">";"</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">evil-ex</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>

<p>
When im doing regexes, its usually with /g anyways, lets make that the default
</p>
<details id='orge594f39' class='code' open><summary><span class="lang">elisp</span></summary>
<div class='gutter'>
<a href='#orge594f39'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-elisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">after!</span> evil
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">evil-ex-substitute-global</span> t     <span class="org-comment-delimiter">; </span><span class="org-comment">I like my s/../.. to by global by default</span>
        <span class="org-variable-name">evil-move-cursor-back</span> nil       <span class="org-comment-delimiter">; </span><span class="org-comment">Don't move the block cursor when toggling insert mode</span>
        <span class="org-variable-name">evil-kill-on-visual-paste</span> nil<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-comment-delimiter">; </span><span class="org-comment">Don't put overwritten text in the kill ring</span>
</pre>
</div>
</details>

<p>
Doom looks much cleaner with the dividers removed. Not sure why it isn&rsquo;t the default honestly
</p>
<details id='org5b4f2ac' class='code' open><summary><span class="lang">elisp</span></summary>
<div class='gutter'>
<a href='#org5b4f2ac'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-elisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">custom-set-faces!</span>
  <span class="org-highlight-quoted-quote">`</span><span class="org-rainbow-delimiters-depth-2">(</span>vertical-border <span class="org-builtin">:background</span> ,<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">doom-color</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">bg</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-builtin">:foreground</span> ,<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">doom-color</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">bg</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">boundp</span> <span class="org-highlight-quoted-quote">'</span><span class="org-variable-name">window-divider-mode</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">window-divider-default-places</span> nil
        <span class="org-variable-name">window-divider-default-bottom-width</span> <span class="org-highlight-numbers-number">0</span>
        <span class="org-variable-name">window-divider-default-right-width</span> <span class="org-highlight-numbers-number">0</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-variable-name">window-divider-mode</span> <span class="org-highlight-numbers-number">-1</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>

<p>
I don&rsquo;t like seeing the cursorline, especially while writing. Lets disable that
</p>
<details id='orge6258d1' class='code' open><summary><span class="lang">elisp</span></summary>
<div class='gutter'>
<a href='#orge6258d1'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-elisp"><span class="org-comment-delimiter">;;</span><span class="org-comment">disable cursorline</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">remove-hook</span> <span class="org-highlight-quoted-quote">'</span><span class="org-variable-name">doom-first-buffer-hook</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-variable-name">global-hl-line-mode</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>

<p>
Doom has a weird bug with emacs-plus where the cursor will just turn white on a light theme. Lets fix that.
</p>
<details id='orgadc1d22' class='code' open><summary><span class="lang">elisp</span></summary>
<div class='gutter'>
<a href='#orgadc1d22'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-elisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defadvice!</span> fix-+evil-default-cursor-fn <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-builtin">:override</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">+evil-default-cursor-fn</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">evil-set-cursor-color</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">face-background</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">cursor</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defadvice!</span> fix-+evil-emacs-cursor-fn <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-builtin">:override</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">+evil-emacs-cursor-fn</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">evil-set-cursor-color</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">face-foreground</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">warning</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>

<p>
I like using the minimap, even if its slow. Looks cool in my opinion, lets make it a little cooler by removing the scroll highlighting
</p>
<details id='org546972d' class='code' open><summary><span class="lang">elisp</span></summary>
<div class='gutter'>
<a href='#org546972d'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-elisp"><span class="org-comment-delimiter">;;</span><span class="org-comment">make minimap transparent</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> minimap-highlight-line nil<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">custom-set-faces!</span>
  <span class="org-highlight-quoted-quote">`</span><span class="org-rainbow-delimiters-depth-2">(</span>minimap-active-region-background <span class="org-builtin">:background</span> unspecified<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>

<p>
I like a bit of padding on the left hand side, and lets make the line spacing comfier
</p>
<details id='org697cc83' class='code' open><summary><span class="lang">elisp</span></summary>
<div class='gutter'>
<a href='#org697cc83'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-elisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">set-frame-parameter</span> nil <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">internal-border-width</span> <span class="org-highlight-numbers-number">15</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq-default</span> <span class="org-variable-name">left-margin-width</span> <span class="org-highlight-numbers-number">2</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq-default</span> <span class="org-variable-name">right-margin-width</span> <span class="org-highlight-numbers-number">2</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq-default</span> <span class="org-variable-name">line-spacing</span> <span class="org-highlight-numbers-number">0.35</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>
</div>
</div>

<div id="outline-container-org3f30fa7" class="outline-3">
<h3 id="org3f30fa7"><span class="section-number-3">2.8.</span> Periodic Table<a aria-hidden="true" href="#org3f30fa7">#</a> </h3>
<div class="outline-text-3" id="text-2-8">
<p>
Comes in more usefull then you would think
</p>
<details id='org2dfc6f2' class='code' open><summary><span class="lang">elisp</span></summary>
<div class='gutter'>
<a href='#org2dfc6f2'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-elisp"><span class="org-comment-delimiter">;;</span><span class="org-comment">(use-package! eperiodic</span>
  <span class="org-comment-delimiter">;;</span><span class="org-comment">:commands eperiodic)</span>
</pre>
</div>
</details>
</div>
</div>

<div id="outline-container-org021bd5f" class="outline-3">
<h3 id="org021bd5f"><span class="section-number-3">2.9.</span> Selectric mode<a aria-hidden="true" href="#org021bd5f">#</a> </h3>
<div class="outline-text-3" id="text-2-9">
<p>
Typewriter go br
</p>
<details id='orgc97eecf' class='code' open><summary><span class="lang">elisp</span></summary>
<div class='gutter'>
<a href='#orgc97eecf'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-elisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package!</span> <span class="org-variable-name">selectric-mode</span>
  <span class="org-builtin">:commands</span> <span class="org-variable-name">selectric-mode</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>
</div>
</div>
</div>

<div id="outline-container-org58e8370" class="outline-2">
<h2 id="org58e8370"><span class="section-number-2">3.</span> Visual configuration<a aria-hidden="true" href="#org58e8370">#</a> </h2>
<div class="outline-text-2" id="text-3">
</div>
<div id="outline-container-orgb49dd40" class="outline-3">
<h3 id="orgb49dd40"><span class="section-number-3">3.1.</span> Modeline<a aria-hidden="true" href="#orgb49dd40">#</a> </h3>
<div class="outline-text-3" id="text-3-1">
<p>
Tecosaurs PDF improvements:
</p>
<details id='org17cb7c0' class='code' open><summary><span class="lang">elisp</span></summary>
<div class='gutter'>
<a href='#org17cb7c0'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-elisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">after!</span> doom-modeline
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">doom-modeline-def-segment</span> buffer-name
    <span class="org-doc">"Display the current buffer's name, without any other information."</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">concat</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-function-name">doom-modeline-spc</span><span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-function-name">doom-modeline--buffer-name</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">doom-modeline-def-segment</span> pdf-icon
    <span class="org-doc">"PDF icon from all-the-icons."</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">concat</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-function-name">doom-modeline-spc</span><span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-variable-name">doom-modeline-icon</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">octicon</span> <span class="org-string">"file-pdf"</span> nil nil
                         <span class="org-builtin">:face</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">doom-modeline--active</span><span class="org-rainbow-delimiters-depth-2">)</span>
                                   <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">all-the-icons-red</span>
                                 <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">mode-line-inactive</span><span class="org-rainbow-delimiters-depth-1">)</span>
                         <span class="org-builtin">:v-adjust</span> <span class="org-highlight-numbers-number">0.02</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defun</span> <span class="org-function-name">doom-modeline-update-pdf-pages</span> <span class="org-rainbow-delimiters-depth-3">()</span>
    <span class="org-doc">"Update PDF pages."</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">doom-modeline--pdf-pages</span>
          <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">(</span>current-page-str <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">number-to-string</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">eval</span> <span class="org-highlight-quoted-quote">`</span><span class="org-rainbow-delimiters-depth-1">(</span>pdf-view-current-page<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
                <span class="org-rainbow-delimiters-depth-2">(</span>total-page-str <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">number-to-string</span> <span class="org-rainbow-delimiters-depth-4">(</span>pdf-cache-number-of-pages<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
            <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">concat</span>
             <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">propertize</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">concat</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">make-string</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">-</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">length</span> total-page-str<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">length</span> current-page-str<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span> ? <span class="org-rainbow-delimiters-depth-4">)</span>
                      <span class="org-string">" P"</span> current-page-str<span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">face</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">mode-line</span><span class="org-rainbow-delimiters-depth-2">)</span>
             <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">propertize</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">concat</span> <span class="org-string">"/"</span> total-page-str<span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">face</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">doom-modeline-buffer-minor-mode</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">doom-modeline-def-segment</span> pdf-pages
    <span class="org-doc">"Display PDF pages."</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-function-name">doom-modeline--active</span><span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-variable-name">doom-modeline--pdf-pages</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">propertize</span> <span class="org-variable-name">doom-modeline--pdf-pages</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">face</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">mode-line-inactive</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">doom-modeline-def-modeline</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">pdf</span>
    <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-3">(</span>bar window-number pdf-pages pdf-icon buffer-name<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-3">(</span>misc-info matches <span class="org-variable-name">major-mode</span> process vcs<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>

<p>
Doom modeline already looks good, but it can be better. Lets add some icons, the battery status, and make sure we don&rsquo;t lose track of time
</p>
<details id='orga1a8cf8' class='code' open><summary><span class="lang">elisp</span></summary>
<div class='gutter'>
<a href='#orga1a8cf8'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-elisp"><span class="org-comment-delimiter">;;</span><span class="org-comment">modeline (icons, config, battery)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-variable-name">display-time-mode</span> <span class="org-highlight-numbers-number">1</span><span class="org-rainbow-delimiters-depth-1">)</span>                              <span class="org-comment-delimiter">;</span><span class="org-comment">Enable time in the mode-line</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-variable-name">display-battery-mode</span> <span class="org-highlight-numbers-number">1</span><span class="org-rainbow-delimiters-depth-1">)</span>                             <span class="org-comment-delimiter">;</span><span class="org-comment">display the battery</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">doom-modeline-major-mode-icon</span> t<span class="org-rainbow-delimiters-depth-1">)</span>             <span class="org-comment-delimiter">;</span><span class="org-comment">Show major mode name</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">doom-modeline-enable-word-count</span> t<span class="org-rainbow-delimiters-depth-1">)</span>           <span class="org-comment-delimiter">;</span><span class="org-comment">Show word count</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">doom-modeline-modal-icon</span> t<span class="org-rainbow-delimiters-depth-1">)</span>                  <span class="org-comment-delimiter">;</span><span class="org-comment">Show vim mode icon</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">inhibit-compacting-font-caches</span> t<span class="org-rainbow-delimiters-depth-1">)</span>            <span class="org-comment-delimiter">;</span><span class="org-comment">Don't compact font caches in gc</span>
</pre>
</div>
</details>

<p>
The encoding is always UTF-8, so its a bit redundant. Lets take that out
</p>
<details id='orga4ff374' class='code' open><summary><span class="lang">elisp</span></summary>
<div class='gutter'>
<a href='#orga4ff374'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-elisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">doom-modeline-conditional-buffer-encoding</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-doc">"We expect the encoding to be LF UTF-8, so only show the modeline when this is not the case"</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq-local</span> <span class="org-variable-name">doom-modeline-buffer-encoding</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">unless</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">and</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">memq</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">plist-get</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">coding-system-plist</span> <span class="org-variable-name">buffer-file-coding-system</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-builtin">:category</span><span class="org-rainbow-delimiters-depth-2">)</span>
                                 <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-2">(</span>coding-category-undecided coding-category-utf-8<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
                           <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">not</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">memq</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">coding-system-eol-type</span> <span class="org-variable-name">buffer-file-coding-system</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-highlight-numbers-number">1</span> <span class="org-highlight-numbers-number">2</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
                t<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">add-hook</span> <span class="org-highlight-quoted-quote">'</span><span class="org-variable-name">after-change-major-mode-hook</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">doom-modeline-conditional-buffer-encoding</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-comment-delimiter">;;</span><span class="org-comment">remove encoding</span>
</pre>
</div>
</details>
</div>
</div>

<div id="outline-container-org4581db3" class="outline-3">
<h3 id="org4581db3"><span class="section-number-3">3.2.</span> Centaur tabs<a aria-hidden="true" href="#org4581db3">#</a> </h3>
<div class="outline-text-3" id="text-3-2">
<p>
There isn&rsquo;t much of a point having tabs when you only have one buffer open. This checks the number of tabs, and hides them if theres only one left
</p>
<details id='org847f3db' class='code' open><summary><span class="lang">elisp</span></summary>
<div class='gutter'>
<a href='#org847f3db'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-elisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">centaur-tabs-get-total-tab-length</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">length</span> <span class="org-rainbow-delimiters-depth-3">(</span>centaur-tabs-tabs <span class="org-rainbow-delimiters-depth-4">(</span>centaur-tabs-current-tabset<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">centaur-tabs-hide-on-window-change</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">run-at-time</span> nil nil
               <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-4">()</span>
                 <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-function-name">centaur-tabs-hide-check</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">centaur-tabs-get-total-tab-length</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">centaur-tabs-hide-check</span> <span class="org-rainbow-delimiters-depth-2">(</span>len<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">shut-up</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">cond</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">and</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">=</span> len <span class="org-highlight-numbers-number">1</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">not</span> <span class="org-rainbow-delimiters-depth-3">(</span>centaur-tabs-local-mode<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">call-interactively</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">centaur-tabs-local-mode</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">and</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">&gt;=</span> len <span class="org-highlight-numbers-number">2</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">(</span>centaur-tabs-local-mode<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">call-interactively</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">centaur-tabs-local-mode</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>

<p>
I also like to have icons with my tabs.
</p>
<details id='org96af47a' class='code' open><summary><span class="lang">elisp</span></summary>
<div class='gutter'>
<a href='#org96af47a'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-elisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">after!</span> centaur-tabs
  <span class="org-rainbow-delimiters-depth-2">(</span>centaur-tabs-mode <span class="org-highlight-numbers-number">-1</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> centaur-tabs-height <span class="org-highlight-numbers-number">36</span>
        centaur-tabs-set-icons t
        centaur-tabs-gray-out-icons <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">buffer</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">add-hook</span> <span class="org-highlight-quoted-quote">'</span><span class="org-variable-name">window-configuration-change-hook</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">centaur-tabs-hide-on-window-change</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>centaur-tabs-change-fonts <span class="org-string">"Liga SFMono Nerd Font"</span> <span class="org-highlight-numbers-number">140</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>centaur-tabs-headline-match<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>

<p>
Lastly lets swap the bg and fg colors so it looks cleaner
</p>
<details id='org98302ba' class='code' open><summary><span class="lang">elisp</span></summary>
<div class='gutter'>
<a href='#org98302ba'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-elisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">custom-set-faces!</span>
  <span class="org-highlight-quoted-quote">`</span><span class="org-rainbow-delimiters-depth-2">(</span>centaur-tabs-default <span class="org-builtin">:background</span> ,<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">doom-color</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">bg</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-highlight-quoted-quote">`</span><span class="org-rainbow-delimiters-depth-2">(</span>centaur-tabs-selected <span class="org-builtin">:background</span> ,<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">doom-color</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">bg_alt</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-highlight-quoted-quote">`</span><span class="org-rainbow-delimiters-depth-2">(</span>centaur-tabs-unselected <span class="org-builtin">:background</span> ,<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">doom-color</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">bg</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>
</div>
</div>

<div id="outline-container-orgf13c3b6" class="outline-3">
<h3 id="orgf13c3b6"><span class="section-number-3">3.3.</span> Treemacs<a aria-hidden="true" href="#orgf13c3b6">#</a> </h3>
<div class="outline-text-3" id="text-3-3">
<p>
Lets theme treemacs while we&rsquo;re at it
</p>
<details id='orgee309db' class='code' open><summary><span class="lang">elisp</span></summary>
<div class='gutter'>
<a href='#orgee309db'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-elisp"><span class="org-comment-delimiter">;;</span><span class="org-comment">make treemacs thinner</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> treemacs-width <span class="org-highlight-numbers-number">25</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-comment-delimiter">;;</span><span class="org-comment">set treemacs to use the theme</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">doom-themes-treemacs-theme</span> <span class="org-string">"doom-colors"</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>
</div>
</div>

<div id="outline-container-org067e591" class="outline-3">
<h3 id="org067e591"><span class="section-number-3">3.4.</span> Emojis<a aria-hidden="true" href="#org067e591">#</a> </h3>
<div class="outline-text-3" id="text-3-4">
<p>
Disable some annoying emojis
</p>
<details id='org886d8b4' class='code' open><summary><span class="lang">elisp</span></summary>
<div class='gutter'>
<a href='#org886d8b4'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-elisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">emojify-disabled-emojis</span>
  <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-comment-delimiter">;; </span><span class="org-comment">Org</span>
    <span class="org-string">"&#9724;"</span> <span class="org-string">"&#9745;"</span> <span class="org-string">"&#9784;"</span> <span class="org-string">"&#9881;"</span> <span class="org-string">"&#9193;"</span> <span class="org-string">"&#9194;"</span> <span class="org-string">"&#11014;"</span> <span class="org-string">"&#11015;"</span> <span class="org-string">"&#10067;"</span>
    <span class="org-comment-delimiter">;; </span><span class="org-comment">Terminal powerline</span>
    <span class="org-string">"&#10004;"</span>
    <span class="org-comment-delimiter">;; </span><span class="org-comment">Box drawing</span>
    <span class="org-string">"&#9654;"</span> <span class="org-string">"&#9664;"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Characters that should never be affected by `</span><span class="org-doc"><span class="org-constant">emojify-mode</span></span><span class="org-doc">'."</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defadvice!</span> emojify-delete-from-data <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-doc">"Ensure `</span><span class="org-doc"><span class="org-constant">emojify-disabled-emojis</span></span><span class="org-doc">' don't appear in `</span><span class="org-doc"><span class="org-constant">emojify-emojis</span></span><span class="org-doc">'."</span>
  <span class="org-builtin">:after</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">emojify-set-emoji-data</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">dolist</span> <span class="org-rainbow-delimiters-depth-3">(</span>emoji <span class="org-variable-name">emojify-disabled-emojis</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">remhash</span> emoji <span class="org-variable-name">emojify-emojis</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">add-hook!</span> <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-2">(</span>mu4e-compose-mode org-msg-edit-mode<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">(</span>emoticon-to-emoji <span class="org-highlight-numbers-number">1</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>
</div>
</div>

<div id="outline-container-org85b1d1a" class="outline-3">
<h3 id="org85b1d1a"><span class="section-number-3">3.5.</span> Splash screen<a aria-hidden="true" href="#org85b1d1a">#</a> </h3>
<div class="outline-text-3" id="text-3-5">
<p>
Emacs can render an image as the splash screen, and the emacs logo looks pretty cool
Now we just make it theme-appropriate, and resize with the frame.
</p>
<details id='org5427d63' class='code' open><summary><span class="lang">Emacs Lisp</span></summary>
<div class='gutter'>
<a href='#org5427d63'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">fancy-splash-image-template</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">expand-file-name</span> <span class="org-string">"misc/splash-images/emacs-e-template.svg"</span> <span class="org-variable-name">doom-private-dir</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Default template svg used for the splash image, with substitutions from "</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">fancy-splash-sizes</span>
  <span class="org-highlight-quoted-quote">`</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-builtin">:height</span> <span class="org-highlight-numbers-number">300</span> <span class="org-builtin">:min-height</span> <span class="org-highlight-numbers-number">50</span> <span class="org-builtin">:padding</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-highlight-numbers-number">0</span> . <span class="org-highlight-numbers-number">2</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-builtin">:height</span> <span class="org-highlight-numbers-number">250</span> <span class="org-builtin">:min-height</span> <span class="org-highlight-numbers-number">42</span> <span class="org-builtin">:padding</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-highlight-numbers-number">2</span> . <span class="org-highlight-numbers-number">4</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-builtin">:height</span> <span class="org-highlight-numbers-number">200</span> <span class="org-builtin">:min-height</span> <span class="org-highlight-numbers-number">35</span> <span class="org-builtin">:padding</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-highlight-numbers-number">3</span> . <span class="org-highlight-numbers-number">3</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-builtin">:height</span> <span class="org-highlight-numbers-number">150</span> <span class="org-builtin">:min-height</span> <span class="org-highlight-numbers-number">28</span> <span class="org-builtin">:padding</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-highlight-numbers-number">3</span> . <span class="org-highlight-numbers-number">3</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-builtin">:height</span> <span class="org-highlight-numbers-number">100</span> <span class="org-builtin">:min-height</span> <span class="org-highlight-numbers-number">20</span> <span class="org-builtin">:padding</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-highlight-numbers-number">2</span> . <span class="org-highlight-numbers-number">2</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-builtin">:height</span> <span class="org-highlight-numbers-number">75</span>  <span class="org-builtin">:min-height</span> <span class="org-highlight-numbers-number">15</span> <span class="org-builtin">:padding</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-highlight-numbers-number">2</span> . <span class="org-highlight-numbers-number">1</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-builtin">:height</span> <span class="org-highlight-numbers-number">50</span>  <span class="org-builtin">:min-height</span> <span class="org-highlight-numbers-number">10</span> <span class="org-builtin">:padding</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-highlight-numbers-number">1</span> . <span class="org-highlight-numbers-number">0</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-builtin">:height</span> <span class="org-highlight-numbers-number">1</span>   <span class="org-builtin">:min-height</span> <span class="org-highlight-numbers-number">0</span>  <span class="org-builtin">:padding</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-highlight-numbers-number">0</span> . <span class="org-highlight-numbers-number">0</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"list of plists with the following properties</span>
<span class="org-doc">  :height the height of the image</span>
<span class="org-doc">  :min-height minimum `</span><span class="org-doc"><span class="org-constant">frame-height</span></span><span class="org-doc">' for image</span>
<span class="org-doc">  :padding `</span><span class="org-doc"><span class="org-constant">+doom-dashboard-banner-padding</span></span><span class="org-doc">' (top . bottom) to apply</span>
<span class="org-doc">  :template non-default template file</span>
<span class="org-doc">  :file file to use instead of template"</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">fancy-splash-template-colours</span>
  <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"$colour1"</span> . keywords<span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"$colour2"</span> . type<span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"$colour3"</span> . base5<span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"$colour4"</span> . base8<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"list of colour-replacement alists of the form (\"$placeholder\" . 'theme-colour) which applied the template"</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">unless</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">file-exists-p</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">expand-file-name</span> <span class="org-string">"theme-splashes"</span> <span class="org-variable-name">doom-cache-dir</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">make-directory</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">expand-file-name</span> <span class="org-string">"theme-splashes"</span> <span class="org-variable-name">doom-cache-dir</span><span class="org-rainbow-delimiters-depth-3">)</span> t<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">fancy-splash-filename</span> <span class="org-rainbow-delimiters-depth-2">(</span>theme-name height<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">expand-file-name</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">concat</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">file-name-as-directory</span> <span class="org-string">"theme-splashes"</span><span class="org-rainbow-delimiters-depth-4">)</span>
                            theme-name
                            <span class="org-string">"-"</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">number-to-string</span> height<span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-string">".svg"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                    <span class="org-variable-name">doom-cache-dir</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">fancy-splash-clear-cache</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-doc">"Delete all cached fancy splash images"</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">delete-directory</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">expand-file-name</span> <span class="org-string">"theme-splashes"</span> <span class="org-variable-name">doom-cache-dir</span><span class="org-rainbow-delimiters-depth-3">)</span> t<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">message</span> <span class="org-string">"Cache cleared!"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">fancy-splash-generate-image</span> <span class="org-rainbow-delimiters-depth-2">(</span>template height<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Read TEMPLATE and create an image if HEIGHT with colour substitutions as</span>
<span class="org-doc">   described by `</span><span class="org-doc"><span class="org-constant">fancy-splash-template-colours</span></span><span class="org-doc">' for the current theme"</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">with-temp-buffer</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">insert-file-contents</span> template<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">re-search-forward</span> <span class="org-string">"$height"</span> nil t<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">replace-match</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">number-to-string</span> height<span class="org-rainbow-delimiters-depth-4">)</span> nil nil<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">dolist</span> <span class="org-rainbow-delimiters-depth-4">(</span>substitution <span class="org-variable-name">fancy-splash-template-colours</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">goto-char</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">point-min</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">while</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">re-search-forward</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">car</span> substitution<span class="org-rainbow-delimiters-depth-2">)</span> nil t<span class="org-rainbow-delimiters-depth-1">)</span>
        <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">replace-match</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">doom-color</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">cdr</span> substitution<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span> nil nil<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">write-region</span> nil nil
                  <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-function-name">fancy-splash-filename</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">symbol-name</span> <span class="org-variable-name">doom-theme</span><span class="org-rainbow-delimiters-depth-1">)</span> height<span class="org-rainbow-delimiters-depth-4">)</span> nil nil<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">fancy-splash-generate-images</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-doc">"Perform `</span><span class="org-doc"><span class="org-constant">fancy-splash-generate-image</span></span><span class="org-doc">' in bulk"</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">dolist</span> <span class="org-rainbow-delimiters-depth-3">(</span>size <span class="org-variable-name">fancy-splash-sizes</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">unless</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">plist-get</span> size <span class="org-builtin">:file</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-function-name">fancy-splash-generate-image</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">or</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">plist-get</span> size <span class="org-builtin">:template</span><span class="org-rainbow-delimiters-depth-2">)</span>
                                       <span class="org-variable-name">fancy-splash-image-template</span><span class="org-rainbow-delimiters-depth-1">)</span>
                                   <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">plist-get</span> size <span class="org-builtin">:height</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">ensure-theme-splash-images-exist</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">&amp;optional</span> height<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">unless</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">file-exists-p</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-function-name">fancy-splash-filename</span>
                          <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">symbol-name</span> <span class="org-variable-name">doom-theme</span><span class="org-rainbow-delimiters-depth-1">)</span>
                          <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">or</span> height
                              <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">plist-get</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">car</span> <span class="org-variable-name">fancy-splash-sizes</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-builtin">:height</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">fancy-splash-generate-images</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">get-appropriate-splash</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>height <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">frame-height</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">cl-some</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-1">(</span>size<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">&gt;=</span> height <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">plist-get</span> size <span class="org-builtin">:min-height</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span> size<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
             <span class="org-variable-name">fancy-splash-sizes</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> fancy-splash-last-size nil<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> fancy-splash-last-theme nil<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">set-appropriate-splash</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">&amp;rest</span> _<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>appropriate-image <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">get-appropriate-splash</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">unless</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">and</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">equal</span> appropriate-image fancy-splash-last-size<span class="org-rainbow-delimiters-depth-1">)</span>
                 <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">equal</span> <span class="org-variable-name">doom-theme</span> fancy-splash-last-theme<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">unless</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">plist-get</span> appropriate-image <span class="org-builtin">:file</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-function-name">ensure-theme-splash-images-exist</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">plist-get</span> appropriate-image <span class="org-builtin">:height</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">fancy-splash-image</span>
          <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">or</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">plist-get</span> appropriate-image <span class="org-builtin">:file</span><span class="org-rainbow-delimiters-depth-1">)</span>
              <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">fancy-splash-filename</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">symbol-name</span> <span class="org-variable-name">doom-theme</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">plist-get</span> appropriate-image <span class="org-builtin">:height</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">+doom-dashboard-banner-padding</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">plist-get</span> appropriate-image <span class="org-builtin">:padding</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">setq</span> fancy-splash-last-size appropriate-image<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">setq</span> fancy-splash-last-theme <span class="org-variable-name">doom-theme</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">+doom-dashboard-reload</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">add-hook</span> <span class="org-highlight-quoted-quote">'</span><span class="org-variable-name">window-size-change-functions</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">set-appropriate-splash</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">add-hook</span> <span class="org-highlight-quoted-quote">'</span><span class="org-variable-name">doom-load-theme-hook</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">set-appropriate-splash</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>

<p>
Lets add a little phrase in there as well
</p>
<details id='org0143eea' class='code' open><summary><span class="lang">elisp</span></summary>
<div class='gutter'>
<a href='#org0143eea'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-elisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">phrase-api-url</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">nth</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">random</span> <span class="org-highlight-numbers-number">3</span><span class="org-rainbow-delimiters-depth-3">)</span>
       <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"https://corporatebs-generator.sameerkumar.website/"</span> <span class="org-builtin">:phrase</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"https://useless-facts.sameerkumar.website/api"</span> <span class="org-builtin">:data</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"https://dev-excuses-api.herokuapp.com/"</span> <span class="org-builtin">:text</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defmacro</span> <span class="org-function-name">phrase-generate-callback</span> <span class="org-rainbow-delimiters-depth-2">(</span>token <span class="org-type">&amp;optional</span> format-fn ignore-read-only callback buffer-name<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-highlight-quoted-quote">`</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-3">(</span>status<span class="org-rainbow-delimiters-depth-3">)</span>
     <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">unless</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">plist-get</span> status <span class="org-builtin">:error</span><span class="org-rainbow-delimiters-depth-4">)</span>
       <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">goto-char</span> url-http-end-of-headers<span class="org-rainbow-delimiters-depth-4">)</span>
       <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">(</span>phrase <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">plist-get</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">json-parse-buffer</span> <span class="org-builtin">:object-type</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">plist</span><span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">cadr</span> <span class="org-variable-name">phrase-api-url</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
             <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-variable-name">inhibit-read-only</span> ,<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">eval</span> ignore-read-only<span class="org-rainbow-delimiters-depth-4">)</span> t<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
         <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">phrase-last</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">cons</span> phrase <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">float-time</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
         <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">with-current-buffer</span> ,<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">or</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">eval</span> buffer-name<span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">buffer-name</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">current-buffer</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
           <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">save-excursion</span>
             <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">goto-char</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">point-min</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
             <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">search-forward</span> ,token nil t<span class="org-rainbow-delimiters-depth-4">)</span>
               <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">with-silent-modifications</span>
                 <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">replace-match</span> <span class="org-string">""</span><span class="org-rainbow-delimiters-depth-1">)</span>
                 <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">insert</span> ,<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">if</span> format-fn format-fn <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">phrase</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
           ,callback<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">phrase-last</span> nil<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">phrase-timeout</span> <span class="org-highlight-numbers-number">5</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defmacro</span> <span class="org-function-name">phrase-insert-async</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">&amp;optional</span> format-fn token ignore-read-only callback buffer-name<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-highlight-quoted-quote">`</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span><span class="org-variable-name">inhibit-message</span> t<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
     <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">and</span> <span class="org-variable-name">phrase-last</span>
              <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">&gt;</span> <span class="org-variable-name">phrase-timeout</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">-</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">float-time</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">cdr</span> <span class="org-variable-name">phrase-last</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">(</span>phrase <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">car</span> <span class="org-variable-name">phrase-last</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
           ,<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">if</span> format-fn format-fn <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">phrase</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
       <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">url-retrieve</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">car</span> <span class="org-variable-name">phrase-api-url</span><span class="org-rainbow-delimiters-depth-1">)</span>
                     <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">phrase-generate-callback</span> ,<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">or</span> token <span class="org-string">"\ufeff"</span><span class="org-rainbow-delimiters-depth-2">)</span> ,format-fn ,ignore-read-only ,callback ,buffer-name<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
       <span class="org-comment-delimiter">;; </span><span class="org-comment">For reference, \ufeff = Zero-width no-break space / BOM</span>
       ,<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">or</span> token <span class="org-string">"\ufeff"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">doom-dashboard-phrase</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">phrase-insert-async</span>
   <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">progn</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">setq-local</span> phrase-position <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">point</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">mapconcat</span>
      <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-2">(</span>line<span class="org-rainbow-delimiters-depth-2">)</span>
        <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">+doom-dashboard--center</span>
         <span class="org-variable-name">+doom-dashboard--width</span>
         <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">with-temp-buffer</span>
           <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">insert-text-button</span>
            line
            <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">action</span>
            <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-2">(</span>_<span class="org-rainbow-delimiters-depth-2">)</span>
              <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">phrase-last</span> nil<span class="org-rainbow-delimiters-depth-2">)</span>
              <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">+doom-dashboard-reload</span> t<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
            <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">face</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">doom-dashboard-menu-title</span>
            <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">mouse-face</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">doom-dashboard-menu-title</span>
            <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">help-echo</span> <span class="org-string">"Random phrase"</span>
            <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">follow-link</span> t<span class="org-rainbow-delimiters-depth-4">)</span>
           <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">buffer-string</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
      <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">split-string</span>
       <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">with-temp-buffer</span>
         <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">insert</span> phrase<span class="org-rainbow-delimiters-depth-3">)</span>
         <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">fill-column</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">min</span> <span class="org-highlight-numbers-number">70</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">/</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">*</span> <span class="org-highlight-numbers-number">2</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">window-width</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-highlight-numbers-number">3</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
         <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">fill-region</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">point-min</span><span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">point-max</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
         <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">buffer-string</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
       <span class="org-string">"\n"</span><span class="org-rainbow-delimiters-depth-1">)</span>
      <span class="org-string">"\n"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
   nil t
   <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">progn</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">goto-char</span> phrase-position<span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">forward-whitespace</span> <span class="org-highlight-numbers-number">1</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-variable-name">+doom-dashboard-name</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defadvice!</span> doom-dashboard-widget-loaded-with-phrase <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-builtin">:override</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">doom-dashboard-widget-loaded</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">line-spacing</span> <span class="org-highlight-numbers-number">0.2</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">insert</span>
   <span class="org-string">"\n\n"</span>
   <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">propertize</span>
    <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-function-name">+doom-dashboard--center</span>
     <span class="org-variable-name">+doom-dashboard--width</span>
     <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">doom-display-benchmark-h</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">return</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
    <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">face</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">doom-dashboard-loaded</span><span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-string">"\n"</span>
   <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">doom-dashboard-phrase</span><span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-string">"\n"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>

<p>
Lastly, the doom dashboard &ldquo;useful commands&rdquo; are no longer useful to me. So, we&rsquo;ll disable them and then for a particularly <i>clean</i> look disable the modeline, then also hide the cursor.
</p>
<details id='org051d70d' class='code' open><summary><span class="lang">Emacs Lisp</span></summary>
<div class='gutter'>
<a href='#org051d70d'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">remove-hook</span> <span class="org-highlight-quoted-quote">'</span><span class="org-variable-name">+doom-dashboard-functions</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">doom-dashboard-widget-shortmenu</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">add-hook!</span> <span class="org-highlight-quoted-quote">'</span><span class="org-variable-name">+doom-dashboard-mode-hook</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-variable-name">hide-mode-line-mode</span> <span class="org-highlight-numbers-number">1</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-variable-name">hl-line-mode</span> <span class="org-highlight-numbers-number">-1</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq-hook!</span> <span class="org-highlight-quoted-quote">'</span><span class="org-variable-name">+doom-dashboard-mode-hook</span> <span class="org-variable-name">evil-normal-state-cursor</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">list</span> nil<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>
</div>
</div>

<div id="outline-container-org568b75d" class="outline-3">
<h3 id="org568b75d"><span class="section-number-3">3.6.</span> Writeroom<a aria-hidden="true" href="#org568b75d">#</a> </h3>
<div class="outline-text-3" id="text-3-6">
<p>
For starters, I think Doom is a bit over-zealous when zooming in
</p>
<details id='org12bcaa8' class='code' open><summary><span class="lang">Emacs Lisp</span></summary>
<div class='gutter'>
<a href='#org12bcaa8'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">+zen-text-scale</span> <span class="org-highlight-numbers-number">0.8</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>

<p>
Then, when using Org it would be nice to make a number of other aesthetic
tweaks. Namely:
</p>
<ul class="org-ul">
<li>Use a serif-ed variable-pitch font</li>
<li>Hiding headline leading stars</li>
<li>Using fleurons as headline bullets</li>
<li>Hiding line numbers</li>
<li>Removing outline indentation</li>
<li>Centering the text</li>
<li>Turning on <code>org-pretty-table-mode</code></li>
<li>Turning on <code>minimap-mode</code></li>
<li>Disabling <code>doom-modeline</code></li>
</ul>

<details id='org63227a5' class='code' open><summary><span class="lang">elisp</span></summary>
<div class='gutter'>
<a href='#org63227a5'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-elisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">+zen-serif-p</span> t
  <span class="org-doc">"Whether to use a serifed font with `</span><span class="org-doc"><span class="org-constant">mixed-pitch-mode</span></span><span class="org-doc">'."</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">after!</span> writeroom-mode
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defvar-local</span> <span class="org-variable-name">+zen--original-org-indent-mode-p</span> nil<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defvar-local</span> <span class="org-variable-name">+zen--original-mixed-pitch-mode-p</span> nil<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defun</span> <span class="org-function-name">+zen-enable-mixed-pitch-mode-h</span> <span class="org-rainbow-delimiters-depth-3">()</span>
    <span class="org-doc">"Enable `</span><span class="org-doc"><span class="org-constant">mixed-pitch-mode</span></span><span class="org-doc">' when in `</span><span class="org-doc"><span class="org-constant">+zen-mixed-pitch-modes</span></span><span class="org-doc">'."</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">apply</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">derived-mode-p</span> <span class="org-variable-name">+zen-mixed-pitch-modes</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">if</span> writeroom-mode
          <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">progn</span>
            <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> +zen--original-mixed-pitch-mode-p <span class="org-variable-name">mixed-pitch-mode</span><span class="org-rainbow-delimiters-depth-2">)</span>
            <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">funcall</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">if</span> <span class="org-variable-name">+zen-serif-p</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">mixed-pitch-serif-mode</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-variable-name">mixed-pitch-mode</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-highlight-numbers-number">1</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
        <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">funcall</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-variable-name">mixed-pitch-mode</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">if</span> +zen--original-mixed-pitch-mode-p <span class="org-highlight-numbers-number">1</span> <span class="org-highlight-numbers-number">-1</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">pushnew!</span> writeroom--local-variables
            <span class="org-highlight-quoted-quote">'</span><span class="org-variable-name">display-line-numbers</span>
            <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">visual-fill-column-width</span>
            <span class="org-highlight-quoted-quote">'</span><span class="org-variable-name">org-adapt-indentation</span>
            <span class="org-highlight-quoted-quote">'</span><span class="org-variable-name">org-superstar-headline-bullets-list</span>
            <span class="org-highlight-quoted-quote">'</span><span class="org-variable-name">org-superstar-remove-leading-stars</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">add-hook</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">writeroom-mode-enable-hook</span>
            <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">defun</span> <span class="org-function-name">+zen-prose-org-h</span> <span class="org-rainbow-delimiters-depth-4">()</span>
              <span class="org-doc">"Reformat the current Org buffer appearance for prose."</span>
              <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">eq</span> <span class="org-variable-name">major-mode</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">org-mode</span><span class="org-rainbow-delimiters-depth-1">)</span>
                <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">display-line-numbers</span> nil
                      visual-fill-column-width <span class="org-highlight-numbers-number">60</span>
                      <span class="org-variable-name">org-adapt-indentation</span> nil<span class="org-rainbow-delimiters-depth-1">)</span>
                <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">featurep</span> <span class="org-highlight-quoted-quote">'</span><span class="org-constant">org-superstar</span><span class="org-rainbow-delimiters-depth-2">)</span>
                  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq-local</span> <span class="org-variable-name">org-superstar-headline-bullets-list</span> <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"&#9673;"</span> <span class="org-string">"&#9675;"</span> <span class="org-string">"&#10040;"</span> <span class="org-string">"&#10047;"</span> <span class="org-string">"&#10020;"</span> <span class="org-string">"&#10012;"</span> <span class="org-string">"&#9670;"</span> <span class="org-string">"&#9654;"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                              <span class="org-variable-name">org-superstar-remove-leading-stars</span> t<span class="org-rainbow-delimiters-depth-2">)</span>
                  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">org-superstar-restart</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>               <span class="org-warning"><span class="org-rainbow-delimiters-depth-1">(</span></span><span class="org-keyword"><span class="org-warning">setq</span></span>
                 +zen--original-org-indent-mode-p <span class="org-variable-name">org-indent-mode</span><span class="org-rainbow-delimiters-depth-1">)</span>
                <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-variable-name">org-indent-mode</span> <span class="org-highlight-numbers-number">-1</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-comment-delimiter">;;</span><span class="org-comment">(add-hook! 'writeroom-mode-hook (minimap-mode (if writeroom-mode +1 -1)))</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">add-hook</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">writeroom-mode-enable-hook</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">doom-disable-line-numbers-h</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">add-hook</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">writeroom-mode-disable-hook</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">doom-enable-line-numbers-h</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">add-hook</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">writeroom-mode-disable-hook</span>
            <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">defun</span> <span class="org-function-name">+zen-nonprose-org-h</span> <span class="org-rainbow-delimiters-depth-4">()</span>
              <span class="org-doc">"Reverse the effect of `</span><span class="org-doc"><span class="org-constant">+zen-prose-org</span></span><span class="org-doc">'."</span>
              <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">eq</span> <span class="org-variable-name">major-mode</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">org-mode</span><span class="org-rainbow-delimiters-depth-1">)</span>
                <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">featurep</span> <span class="org-highlight-quoted-quote">'</span><span class="org-constant">org-superstar</span><span class="org-rainbow-delimiters-depth-2">)</span>
                  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">org-superstar-restart</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
                <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">when</span> +zen--original-org-indent-mode-p <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-variable-name">org-indent-mode</span> <span class="org-highlight-numbers-number">1</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>

<p>
I have to export files pretty often, lets setup some keybindings to make it easier
</p>
<details id='orgea47514' class='code' open><summary><span class="lang">elisp</span></summary>
<div class='gutter'>
<a href='#orgea47514'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-elisp"><span class="org-comment-delimiter">;;</span><span class="org-comment">spc+v = view exported file</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">map!</span> <span class="org-builtin">:map</span> <span class="org-variable-name">org-mode-map</span>
      <span class="org-builtin">:localleader</span>
      <span class="org-builtin">:desc</span> <span class="org-string">"View exported file"</span> <span class="org-string">"v"</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">org-view-output-file</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">org-view-output-file</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">&amp;optional</span> org-file-path<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Visit buffer open on the first output file (if any) found, using `</span><span class="org-doc"><span class="org-constant">org-view-output-file-extensions</span></span><span class="org-doc">'"</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let*</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>org-file-path <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">or</span> org-file-path <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-variable-name">buffer-file-name</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-string">""</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>dir <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">file-name-directory</span> org-file-path<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>basename <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">file-name-base</span> org-file-path<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>output-file nil<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">dolist</span> <span class="org-rainbow-delimiters-depth-4">(</span>ext <span class="org-variable-name">org-view-output-file-extensions</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">unless</span> output-file
        <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">file-exists-p</span>
               <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">concat</span> dir basename <span class="org-string">"."</span> ext<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
          <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> output-file <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">concat</span> dir basename <span class="org-string">"."</span> ext<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">if</span> output-file
        <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">member</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">file-name-extension</span> output-file<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-variable-name">org-view-external-file-extensions</span><span class="org-rainbow-delimiters-depth-1">)</span>
            <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">browse-url-xdg-open</span> output-file<span class="org-rainbow-delimiters-depth-1">)</span>
          <span class="org-rainbow-delimiters-depth-1">(</span>pop-to-bufferpop-to-buffer <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">or</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">find-buffer-visiting</span> output-file<span class="org-rainbow-delimiters-depth-3">)</span>
                             <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">find-file-noselect</span> output-file<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">message</span> <span class="org-string">"No exported file found"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">org-view-output-file-extensions</span> <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"pdf"</span> <span class="org-string">"md"</span> <span class="org-string">"rst"</span> <span class="org-string">"txt"</span> <span class="org-string">"tex"</span> <span class="org-string">"html"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Search for output files with these extensions, in order, viewing the first that matches"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">org-view-external-file-extensions</span> <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"html"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"File formats that should be opened externally."</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>
</div>
</div>

<div id="outline-container-orgd3670d6" class="outline-3">
<h3 id="orgd3670d6"><span class="section-number-3">3.7.</span> Font Display<a aria-hidden="true" href="#orgd3670d6">#</a> </h3>
<div class="outline-text-3" id="text-3-7">
<p>
Mixed pitch is great. As is <code>+org-pretty-mode</code>, let&rsquo;s use them.
</p>
<details id='orgf437469' class='code' open><summary><span class="lang">Emacs Lisp</span></summary>
<div class='gutter'>
<a href='#orgf437469'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">add-hook</span> <span class="org-highlight-quoted-quote">'</span><span class="org-variable-name">org-mode-hook</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-variable-name">+org-pretty-mode</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">org-pretty-entities-include-sub-superscripts</span> nil<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-comment-delimiter">;;</span><span class="org-comment">doesn't play well with latex</span>
</pre>
</div>
</details>

<p>
Let&rsquo;s make headings a bit bigger
</p>
<details id='orgf79023a' class='code' open><summary><span class="lang">Emacs Lisp</span></summary>
<div class='gutter'>
<a href='#orgf79023a'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">custom-set-faces!</span>
  <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-2">(</span>outline-1 <span class="org-builtin">:weight</span> extra-bold <span class="org-builtin">:height</span> <span class="org-highlight-numbers-number">1.25</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-2">(</span>outline-2 <span class="org-builtin">:weight</span> bold <span class="org-builtin">:height</span> <span class="org-highlight-numbers-number">1.15</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-2">(</span>outline-3 <span class="org-builtin">:weight</span> bold <span class="org-builtin">:height</span> <span class="org-highlight-numbers-number">1.12</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-2">(</span>outline-4 <span class="org-builtin">:weight</span> semi-bold <span class="org-builtin">:height</span> <span class="org-highlight-numbers-number">1.09</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-2">(</span>outline-5 <span class="org-builtin">:weight</span> semi-bold <span class="org-builtin">:height</span> <span class="org-highlight-numbers-number">1.06</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-2">(</span>outline-6 <span class="org-builtin">:weight</span> semi-bold <span class="org-builtin">:height</span> <span class="org-highlight-numbers-number">1.03</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-2">(</span>outline-8 <span class="org-builtin">:weight</span> semi-bold<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-2">(</span>outline-9 <span class="org-builtin">:weight</span> semi-bold<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>

<p>
And the same with the title.
</p>
<details id='org74aacdc' class='code' open><summary><span class="lang">Emacs Lisp</span></summary>
<div class='gutter'>
<a href='#org74aacdc'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">custom-set-faces!</span>
  <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-2">(</span>org-document-title <span class="org-builtin">:height</span> <span class="org-highlight-numbers-number">1.2</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>

<p>
It seems reasonable to have deadlines in the error face when they&rsquo;re passed.
</p>
<details id='org44812dd' class='code' open><summary><span class="lang">Emacs Lisp</span></summary>
<div class='gutter'>
<a href='#org44812dd'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">org-agenda-deadline-faces</span>
      <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-highlight-numbers-number">1.0</span> . error<span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-highlight-numbers-number">1.0</span> . org-warning<span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-highlight-numbers-number">0.5</span> . org-upcoming-deadline<span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-highlight-numbers-number">0.0</span> . org-upcoming-distant-deadline<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>

<p>
We can then have quote blocks stand out a bit more by making them <i>italic</i>.
</p>
<details id='orgfeecd6d' class='code' open><summary><span class="lang">Emacs Lisp</span></summary>
<div class='gutter'>
<a href='#orgfeecd6d'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">org-fontify-quote-and-verse-blocks</span> t<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>

<details id='orga344cb8' class='code' open><summary><span class="lang">Emacs Lisp</span></summary>
<div class='gutter'>
<a href='#orga344cb8'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package!</span> org-appear
  <span class="org-builtin">:hook</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">org-mode</span> . <span class="org-variable-name">org-appear-mode</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:config</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">org-appear-autoemphasis</span> t
        <span class="org-variable-name">org-appear-autosubmarkers</span> t
        <span class="org-variable-name">org-appear-autolinks</span> nil<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">run-at-time</span> nil nil <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">org-appear--set-elements</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>

<p>
Org files can be rather nice to look at, particularly with some of the
customisations here. This comes at a cost however, expensive font-lock.
Feeling like you&rsquo;re typing through molasses in large files is no fun, but there
is a way I can defer font-locking when typing to make the experience more
responsive.
</p>
<details id='orgd5d67f1' class='code' open><summary><span class="lang">Emacs Lisp</span></summary>
<div class='gutter'>
<a href='#orgd5d67f1'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">locally-defer-font-lock</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-doc">"Set jit-lock defer and stealth, when buffer is over a certain size."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">&gt;</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">buffer-size</span><span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-highlight-numbers-number">50000</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">setq-local</span> <span class="org-variable-name">jit-lock-defer-time</span> <span class="org-highlight-numbers-number">0.05</span>
                <span class="org-variable-name">jit-lock-stealth-time</span> <span class="org-highlight-numbers-number">1</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">add-hook</span> <span class="org-highlight-quoted-quote">'</span><span class="org-variable-name">org-mode-hook</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">locally-defer-font-lock</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>
<p>
Apparently this causes issues with some people, but I haven&rsquo;t noticed anything
problematic beyond the expected slight delay in some fontification, so until I
do I&rsquo;ll use the above.
</p>
</div>

<ol class="org-ol">
<li><a id="orgb6b1f72"></a>Fontifying inline src blocks<br>
<div class="outline-text-5" id="text-3-7-0-1">
<p>
Org does lovely things with <kbd>#+begin_src</kbd> blocks, like using font-lock for
language&rsquo;s major-mode behind the scenes and pulling out the lovely colourful
results. By contrast, inline <kbd>src_</kbd> blocks are somewhat neglected.
</p>

<p>
I am not the first person to feel this way, thankfully others have <a href="https://stackoverflow.com/questions/20309842/how-to-syntax-highlight-for-org-mode-inline-source-code-src-lang/28059832">taken to
stackexchange</a> to voice their desire for inline src fontification. I was going to
steal their work, but unfortunately they didn&rsquo;t perform <i>true</i> source code
fontification, but simply applied the <kbd>org-code</kbd> face to the content.
</p>

<p>
We can do better than that, and we shall! Using <code>org-src-font-lock-fontify-block</code>
we can apply language-appropriate syntax highlighting. Then, continuing on to
<kbd>{{{results(...)}}}</kbd> , it can have the <kbd>org-block</kbd> face applied to match, and then
the value-surrounding constructs hidden by mimicking the behaviour of
<code>prettify-symbols-mode</code>.
</p>

<details id='orgc1ae56a' class='code' open><summary><span class="lang">Emacs Lisp</span></summary>
<div class='gutter'>
<a href='#orgc1ae56a'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">org-prettify-inline-results</span> t
  <span class="org-doc">"Whether to use (ab)use prettify-symbols-mode on {{{results(...)}}}.</span>
<span class="org-doc">Either t or a cons cell of strings which are used as substitutions</span>
<span class="org-doc">for the start and end of inline results, respectively."</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">org-fontify-inline-src-blocks-max-length</span> <span class="org-highlight-numbers-number">200</span>
  <span class="org-doc">"Maximum content length of an inline src block that will be fontified."</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">org-fontify-inline-src-blocks</span> <span class="org-rainbow-delimiters-depth-2">(</span>limit<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Try to apply `</span><span class="org-doc"><span class="org-constant">org-fontify-inline-src-blocks-1</span></span><span class="org-doc">'."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">condition-case</span> nil
      <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">org-fontify-inline-src-blocks-1</span> limit<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">error</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">message</span> <span class="org-string">"Org mode fontification error in %S at %d"</span>
                    <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">current-buffer</span><span class="org-rainbow-delimiters-depth-1">)</span>
                    <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">line-number-at-pos</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">org-fontify-inline-src-blocks-1</span> <span class="org-rainbow-delimiters-depth-2">(</span>limit<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Fontify inline src_LANG blocks, from `</span><span class="org-doc"><span class="org-constant">point</span></span><span class="org-doc">' up to LIMIT."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span><span class="org-variable-name">case-fold-search</span> t<span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span>initial-point <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">point</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">while</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">re-search-forward</span> <span class="org-string">"\\_&lt;src_</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(</span></span><span class="org-string">[</span><span class="org-string"><span class="org-negation-char">^</span></span><span class="org-string"> \t\n[{]+</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string">[{[]?"</span> limit t<span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-comment-delimiter">; </span><span class="org-comment">stolen from `</span><span class="org-comment"><span class="org-constant">org-element-inline-src-block-parser</span></span><span class="org-comment">'</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">(</span>beg <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">match-beginning</span> <span class="org-highlight-numbers-number">0</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
            pt
            <span class="org-rainbow-delimiters-depth-2">(</span>lang-beg <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">match-beginning</span> <span class="org-highlight-numbers-number">1</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
            <span class="org-rainbow-delimiters-depth-2">(</span>lang-end <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">match-end</span> <span class="org-highlight-numbers-number">1</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
        <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">remove-text-properties</span> beg lang-end <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-2">(</span>face nil<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
        <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">font-lock-append-text-property</span> lang-beg lang-end <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">face</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">org-meta-line</span><span class="org-rainbow-delimiters-depth-1">)</span>
        <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">font-lock-append-text-property</span> beg lang-beg <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">face</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">shadow</span><span class="org-rainbow-delimiters-depth-1">)</span>
        <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">font-lock-append-text-property</span> beg lang-end <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">face</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">org-block</span><span class="org-rainbow-delimiters-depth-1">)</span>
        <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> pt <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">goto-char</span> lang-end<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
        <span class="org-comment-delimiter">;; </span><span class="org-comment">`</span><span class="org-comment"><span class="org-constant">org-element--parse-paired-brackets</span></span><span class="org-comment">' doesn't take a limit, so to</span>
        <span class="org-comment-delimiter">;; </span><span class="org-comment">prevent it searching the entire rest of the buffer we temporarily</span>
        <span class="org-comment-delimiter">;; </span><span class="org-comment">narrow the active region.</span>
        <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">save-restriction</span>
          <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">narrow-to-region</span> beg <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">min</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">point-max</span><span class="org-rainbow-delimiters-depth-4">)</span> limit <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">+</span> lang-end <span class="org-variable-name">org-fontify-inline-src-blocks-max-length</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
          <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">ignore-errors</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-function-name">org-element--parse-paired-brackets</span> ?\[<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
            <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">remove-text-properties</span> pt <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">point</span><span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-4">(</span>face nil<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
            <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">font-lock-append-text-property</span> pt <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">point</span><span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">face</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">org-block</span><span class="org-rainbow-delimiters-depth-3">)</span>
            <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">setq</span> pt <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">point</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
          <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">ignore-errors</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-function-name">org-element--parse-paired-brackets</span> ?\{<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
            <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">remove-text-properties</span> pt <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">point</span><span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-4">(</span>face nil<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
            <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">font-lock-append-text-property</span> pt <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">1+</span> pt<span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">face</span> <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-4">(</span>org-block shadow<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
            <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">unless</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">=</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1+</span> pt<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1-</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">point</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
              <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">if</span> <span class="org-variable-name">org-src-fontify-natively</span>
                  <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">org-src-font-lock-fontify-block</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">buffer-substring-no-properties</span> lang-beg lang-end<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">1+</span> pt<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">1-</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">point</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
                <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">font-lock-append-text-property</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">1+</span> pt<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">1-</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">point</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">face</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">org-block</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
            <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">font-lock-append-text-property</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">1-</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">point</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">point</span><span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">face</span> <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-4">(</span>org-block shadow<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
            <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">setq</span> pt <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">point</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
        <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">and</span> <span class="org-variable-name">org-prettify-inline-results</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">re-search-forward</span> <span class="org-string">"\\= {{{results("</span> limit t<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
          <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">font-lock-append-text-property</span> pt <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">1+</span> pt<span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">face</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">org-block</span><span class="org-rainbow-delimiters-depth-2">)</span>
          <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">goto-char</span> pt<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">when</span> <span class="org-variable-name">org-prettify-inline-results</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">goto-char</span> initial-point<span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-function-name">org-fontify-inline-src-results</span> limit<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">org-fontify-inline-src-results</span> <span class="org-rainbow-delimiters-depth-2">(</span>limit<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">while</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">re-search-forward</span> <span class="org-string">"{{{results(</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(</span></span><span class="org-string">.+?</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string">)}}}"</span> limit t<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">remove-list-of-text-properties</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">match-beginning</span> <span class="org-highlight-numbers-number">0</span><span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">point</span><span class="org-rainbow-delimiters-depth-4">)</span>
                                    <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-4">(</span>composition
                                      prettify-symbols-start
                                      prettify-symbols-end<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">font-lock-append-text-property</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">match-beginning</span> <span class="org-highlight-numbers-number">0</span><span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">match-end</span> <span class="org-highlight-numbers-number">0</span><span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">face</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">org-block</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-1">(</span>start <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">match-beginning</span> <span class="org-highlight-numbers-number">0</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span>end <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">match-beginning</span> <span class="org-highlight-numbers-number">1</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">with-silent-modifications</span>
        <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">compose-region</span> start end <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">eq</span> <span class="org-variable-name">org-prettify-inline-results</span> t<span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-string">"&#10216;"</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">car</span> <span class="org-variable-name">org-prettify-inline-results</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
        <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">add-text-properties</span> start end <span class="org-highlight-quoted-quote">`</span><span class="org-rainbow-delimiters-depth-2">(</span>prettify-symbols-start ,start prettify-symbols-end ,end<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-1">(</span>start <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">match-end</span> <span class="org-highlight-numbers-number">1</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span>end <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">point</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">with-silent-modifications</span>
        <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">compose-region</span> start end <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">eq</span> <span class="org-variable-name">org-prettify-inline-results</span> t<span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-string">"&#10217;"</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">cdr</span> <span class="org-variable-name">org-prettify-inline-results</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
        <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">add-text-properties</span> start end <span class="org-highlight-quoted-quote">`</span><span class="org-rainbow-delimiters-depth-2">(</span>prettify-symbols-start ,start prettify-symbols-end ,end<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">org-fontify-inline-src-blocks-enable</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-doc">"Add inline src fontification to font-lock in Org.</span>
<span class="org-doc">Must be run as part of `</span><span class="org-doc"><span class="org-constant">org-font-lock-set-keywords-hook</span></span><span class="org-doc">'."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">org-font-lock-extra-keywords</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">append</span> <span class="org-variable-name">org-font-lock-extra-keywords</span> <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">org-fontify-inline-src-blocks</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">add-hook</span> <span class="org-highlight-quoted-quote">'</span><span class="org-variable-name">org-font-lock-set-keywords-hook</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">org-fontify-inline-src-blocks-enable</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>
</div>
</li>
</ol>
</div>

<div id="outline-container-org69ca059" class="outline-3">
<h3 id="org69ca059"><span class="section-number-3">3.8.</span> Symbols<a aria-hidden="true" href="#org69ca059">#</a> </h3>
<div class="outline-text-3" id="text-3-8">
<details id='org027ab9e' class='code' open><summary><span class="lang">Emacs Lisp</span></summary>
<div class='gutter'>
<a href='#org027ab9e'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;;</span><span class="org-comment">make bullets look better</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">after!</span> org-superstar
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">org-superstar-headline-bullets-list</span> <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"&#9673;"</span> <span class="org-string">"&#9675;"</span> <span class="org-string">"&#10040;"</span> <span class="org-string">"&#10047;"</span> <span class="org-string">"&#10020;"</span> <span class="org-string">"&#10012;"</span> <span class="org-string">"&#9670;"</span> <span class="org-string">"&#9654;"</span><span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-variable-name">org-superstar-prettify-item-bullets</span> t <span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">org-ellipsis</span> <span class="org-string">" &#9662; "</span>
      <span class="org-variable-name">org-hide-leading-stars</span> t
      <span class="org-variable-name">org-priority-highest</span> ?A
      <span class="org-variable-name">org-priority-lowest</span> ?E
      <span class="org-variable-name">org-priority-faces</span>
      <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>?A . <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">all-the-icons-red</span><span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span>?B . <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">all-the-icons-orange</span><span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span>?C . <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">all-the-icons-yellow</span><span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span>?D . <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">all-the-icons-green</span><span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span>?E . <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">all-the-icons-blue</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">;;</span><span class="org-comment">lets replace some unicode chars</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">appendq!</span> <span class="org-variable-name">+ligatures-extra-symbols</span>
          <span class="org-highlight-quoted-quote">`</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-builtin">:checkbox</span>      <span class="org-string">"&#9744;"</span>
            <span class="org-builtin">:pending</span>       <span class="org-string">"&#9724;"</span>
            <span class="org-builtin">:checkedbox</span>    <span class="org-string">"&#9745;"</span>
            <span class="org-builtin">:list_property</span> <span class="org-string">"&#8759;"</span>
            <span class="org-builtin">:em_dash</span>       <span class="org-string">"&#8212;"</span>
            <span class="org-builtin">:ellipses</span>      <span class="org-string">"&#8230;"</span>
            <span class="org-builtin">:arrow_right</span>   <span class="org-string">"&#8594;"</span>
            <span class="org-builtin">:arrow_left</span>    <span class="org-string">"&#8592;"</span>
            <span class="org-builtin">:property</span>      <span class="org-string">"&#9784;"</span>
            <span class="org-builtin">:options</span>       <span class="org-string">"&#8997;"</span>
            <span class="org-builtin">:startup</span>       <span class="org-string">"&#9211;"</span>
            <span class="org-builtin">:html_head</span>     <span class="org-string">"&#127351;"</span>
            <span class="org-builtin">:html</span>          <span class="org-string">"&#127319;"</span>
            <span class="org-builtin">:latex_class</span>   <span class="org-string">"&#127291;"</span>
            <span class="org-builtin">:latex_header</span>  <span class="org-string">"&#127355;"</span>
            <span class="org-builtin">:beamer_header</span> <span class="org-string">"&#127313;"</span>
            <span class="org-builtin">:latex</span>         <span class="org-string">"&#127323;"</span>
            <span class="org-builtin">:attr_latex</span>    <span class="org-string">"&#127259;"</span>
            <span class="org-builtin">:attr_html</span>     <span class="org-string">"&#127255;"</span>
            <span class="org-builtin">:attr_org</span>      <span class="org-string">"&#9386;"</span>
            <span class="org-builtin">:begin_quote</span>   <span class="org-string">"&#10077;"</span>
            <span class="org-builtin">:end_quote</span>     <span class="org-string">"&#10078;"</span>
            <span class="org-builtin">:caption</span>       <span class="org-string">"&#9776;"</span>
            <span class="org-builtin">:header</span>        <span class="org-string">"&#8250;"</span>
            <span class="org-builtin">:begin_export</span>  <span class="org-string">"&#9193;"</span>
            <span class="org-builtin">:end_export</span>    <span class="org-string">"&#9194;"</span>
            <span class="org-builtin">:properties</span>    <span class="org-string">"&#9881;"</span>
            <span class="org-builtin">:end</span>           <span class="org-string">"&#8718;"</span>
            <span class="org-builtin">:priority_a</span>   ,<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">propertize</span> <span class="org-string">"&#9873;"</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">face</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">all-the-icons-red</span><span class="org-rainbow-delimiters-depth-3">)</span>
            <span class="org-builtin">:priority_b</span>   ,<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">propertize</span> <span class="org-string">"&#11014;"</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">face</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">all-the-icons-orange</span><span class="org-rainbow-delimiters-depth-3">)</span>
            <span class="org-builtin">:priority_c</span>   ,<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">propertize</span> <span class="org-string">"&#9632;"</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">face</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">all-the-icons-yellow</span><span class="org-rainbow-delimiters-depth-3">)</span>
            <span class="org-builtin">:priority_d</span>   ,<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">propertize</span> <span class="org-string">"&#11015;"</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">face</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">all-the-icons-green</span><span class="org-rainbow-delimiters-depth-3">)</span>
            <span class="org-builtin">:priority_e</span>   ,<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">propertize</span> <span class="org-string">"&#10067;"</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">face</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">all-the-icons-blue</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">set-ligatures!</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">org-mode</span>
  <span class="org-builtin">:merge</span> t
  <span class="org-builtin">:checkbox</span>      <span class="org-string">"[ ]"</span>
  <span class="org-builtin">:pending</span>       <span class="org-string">"[-]"</span>
  <span class="org-builtin">:checkedbox</span>    <span class="org-string">"[X]"</span>
  <span class="org-builtin">:list_property</span> <span class="org-string">"::"</span>
  <span class="org-builtin">:em_dash</span>       <span class="org-string">"---"</span>
  <span class="org-builtin">:ellipsis</span>      <span class="org-string">"..."</span>
  <span class="org-builtin">:arrow_right</span>   <span class="org-string">"-&gt;"</span>
  <span class="org-builtin">:arrow_left</span>    <span class="org-string">"&lt;-"</span>
  <span class="org-builtin">:title</span>         <span class="org-string">"#+title:"</span>
  <span class="org-builtin">:subtitle</span>      <span class="org-string">"#+subtitle:"</span>
  <span class="org-builtin">:author</span>        <span class="org-string">"#+author:"</span>
  <span class="org-builtin">:date</span>          <span class="org-string">"#+date:"</span>
  <span class="org-builtin">:property</span>      <span class="org-string">"#+property:"</span>
  <span class="org-builtin">:options</span>       <span class="org-string">"#+options:"</span>
  <span class="org-builtin">:startup</span>       <span class="org-string">"#+startup:"</span>
  <span class="org-builtin">:macro</span>         <span class="org-string">"#+macro:"</span>
  <span class="org-builtin">:html_head</span>     <span class="org-string">"#+html_head:"</span>
  <span class="org-builtin">:html</span>          <span class="org-string">"#+html:"</span>
  <span class="org-builtin">:latex_class</span>   <span class="org-string">"#+latex_class:"</span>
  <span class="org-builtin">:latex_header</span>  <span class="org-string">"#+latex_header:"</span>
  <span class="org-builtin">:beamer_header</span> <span class="org-string">"#+beamer_header:"</span>
  <span class="org-builtin">:latex</span>         <span class="org-string">"#+latex:"</span>
  <span class="org-builtin">:attr_latex</span>    <span class="org-string">"#+attr_latex:"</span>
  <span class="org-builtin">:attr_html</span>     <span class="org-string">"#+attr_html:"</span>
  <span class="org-builtin">:attr_org</span>      <span class="org-string">"#+attr_org:"</span>
  <span class="org-builtin">:begin_quote</span>   <span class="org-string">"#+begin_quote"</span>
  <span class="org-builtin">:end_quote</span>     <span class="org-string">"#+end_quote"</span>
  <span class="org-builtin">:caption</span>       <span class="org-string">"#+caption:"</span>
  <span class="org-builtin">:header</span>        <span class="org-string">"#+header:"</span>
  <span class="org-builtin">:begin_export</span>  <span class="org-string">"#+begin_export"</span>
  <span class="org-builtin">:end_export</span>    <span class="org-string">"#+end_export"</span>
  <span class="org-builtin">:results</span>       <span class="org-string">"#+RESULTS:"</span>
  <span class="org-builtin">:property</span>      <span class="org-string">":PROPERTIES:"</span>
  <span class="org-builtin">:end</span>           <span class="org-string">":END:"</span>
  <span class="org-builtin">:priority_a</span>    <span class="org-string">"[#A]"</span>
  <span class="org-builtin">:priority_b</span>    <span class="org-string">"[#B]"</span>
  <span class="org-builtin">:priority_c</span>    <span class="org-string">"[#C]"</span>
  <span class="org-builtin">:priority_d</span>    <span class="org-string">"[#D]"</span>
  <span class="org-builtin">:priority_e</span>    <span class="org-string">"[#E]"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">plist-put</span> <span class="org-variable-name">+ligatures-extra-symbols</span> <span class="org-builtin">:name</span> <span class="org-string">"&#8269;"</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>

<p>
Lets also add a function that makes it easy to convert from upper to lowercase
</p>
<details id='orgb4f6094' class='code' open><summary><span class="lang">elisp</span></summary>
<div class='gutter'>
<a href='#orgb4f6094'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-elisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">org-syntax-convert-keyword-case-to-lower</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-doc">"Convert all #+KEYWORDS to #+keywords."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">save-excursion</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">goto-char</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">point-min</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">count</span> <span class="org-highlight-numbers-number">0</span><span class="org-rainbow-delimiters-depth-1">)</span>
          <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-variable-name">case-fold-search</span> nil<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">while</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">re-search-forward</span> <span class="org-string">"^[ \t]*#\\+[A-Z_]+"</span> nil t<span class="org-rainbow-delimiters-depth-1">)</span>
        <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">unless</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">s-matches-p</span> <span class="org-string">"RESULTS"</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">match-string</span> <span class="org-highlight-numbers-number">0</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
          <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">replace-match</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">downcase</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">match-string</span> <span class="org-highlight-numbers-number">0</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span> t<span class="org-rainbow-delimiters-depth-2">)</span>
          <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> count <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">1+</span> count<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">message</span> <span class="org-string">"Replaced %d occurances"</span> count<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>
</div>
</div>

<div id="outline-container-orgf6b2ea8" class="outline-3">
<h3 id="orgf6b2ea8"><span class="section-number-3">3.9.</span> Keycast<a aria-hidden="true" href="#orgf6b2ea8">#</a> </h3>
<div class="outline-text-3" id="text-3-9">
<p>
Its nice for demonstrations
</p>
<details id='org917d833' class='code' open><summary><span class="lang">elisp</span></summary>
<div class='gutter'>
<a href='#org917d833'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-elisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package!</span> keycast
  <span class="org-builtin">:commands</span> <span class="org-variable-name">keycast-mode</span>
  <span class="org-builtin">:config</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">define-minor-mode</span> <span class="org-variable-name">keycast-mode</span>
    <span class="org-doc">"Show current command and its key binding in the mode line."</span>
    <span class="org-builtin">:global</span> t
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">if</span> <span class="org-variable-name">keycast-mode</span>
        <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">progn</span>
          <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">add-hook</span> <span class="org-highlight-quoted-quote">'</span><span class="org-variable-name">pre-command-hook</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">keycast--update</span> t<span class="org-rainbow-delimiters-depth-1">)</span>
          <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">add-to-list</span> <span class="org-highlight-quoted-quote">'</span><span class="org-variable-name">global-mode-string</span> <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">""</span> mode-line-keycast <span class="org-string">" "</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">remove-hook</span> <span class="org-highlight-quoted-quote">'</span><span class="org-variable-name">pre-command-hook</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">keycast--update</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">global-mode-string</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">remove</span> <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">""</span> mode-line-keycast <span class="org-string">" "</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-variable-name">global-mode-string</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">custom-set-faces!</span>
    <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-3">(</span>keycast-command <span class="org-builtin">:inherit</span> doom-modeline-debug
                      <span class="org-builtin">:height</span> <span class="org-highlight-numbers-number">1.0</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-3">(</span>keycast-key <span class="org-builtin">:inherit</span> custom-modified
                  <span class="org-builtin">:height</span> <span class="org-highlight-numbers-number">1.0</span>
                  <span class="org-builtin">:weight</span> bold<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>
</div>
</div>

<div id="outline-container-org1453cf7" class="outline-3">
<h3 id="org1453cf7"><span class="section-number-3">3.10.</span> Transparency<a aria-hidden="true" href="#org1453cf7">#</a> </h3>
<div class="outline-text-3" id="text-3-10">
<p>
I&rsquo;m not too big of a fan of transparency, but some people like it. You can use
this little function to toggle it now
</p>
<details id='org7865c08' class='code' open><summary><span class="lang">elisp</span></summary>
<div class='gutter'>
<a href='#org7865c08'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-elisp"> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">toggle-transparency</span> <span class="org-rainbow-delimiters-depth-2">()</span>
   <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-2">)</span>
   <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>alpha <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">frame-parameter</span> nil <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">alpha</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
     <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">set-frame-parameter</span>
      nil <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">alpha</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">eql</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">cond</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">numberp</span> alpha<span class="org-rainbow-delimiters-depth-4">)</span> alpha<span class="org-rainbow-delimiters-depth-3">)</span>
                     <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">numberp</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">cdr</span> alpha<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">cdr</span> alpha<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
                     <span class="org-comment-delimiter">;; </span><span class="org-comment">Also handle undocumented (&lt;active&gt; &lt;inactive&gt;) form.</span>
                     <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">numberp</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">cadr</span> alpha<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">cadr</span> alpha<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
               <span class="org-highlight-numbers-number">100</span><span class="org-rainbow-delimiters-depth-1">)</span>
          <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-highlight-numbers-number">100</span> . <span class="org-highlight-numbers-number">85</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-highlight-numbers-number">100</span> . <span class="org-highlight-numbers-number">100</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
 <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">global-set-key</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">kbd</span> <span class="org-string">"C-c t"</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">toggle-transparency</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>
</div>
</div>

<div id="outline-container-org07669b4" class="outline-3">
<h3 id="org07669b4"><span class="section-number-3">3.11.</span> Screenshots<a aria-hidden="true" href="#org07669b4">#</a> </h3>
<div class="outline-text-3" id="text-3-11">
<p>
Make it easy to take screenshots
</p>
<details id='orgc6ecd45' class='code' open><summary><span class="lang">elisp</span></summary>
<div class='gutter'>
<a href='#orgc6ecd45'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-elisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package!</span> screenshot
  <span class="org-builtin">:defer</span> t
  <span class="org-builtin">:config</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> screenshot-upload-fn <span class="org-string">"upload $s 2&gt;/dev/null"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>
</div>
</div>
</div>

<div id="outline-container-org515ae4c" class="outline-2">
<h2 id="org515ae4c"><span class="section-number-2">4.</span> Org<a aria-hidden="true" href="#org515ae4c">#</a> </h2>
<div class="outline-text-2" id="text-4">
</div>
<div id="outline-container-org15d8182" class="outline-3">
<h3 id="org15d8182"><span class="section-number-3">4.1.</span> Org-Mode<a aria-hidden="true" href="#org15d8182">#</a> </h3>
<div class="outline-text-3" id="text-4-1">
<p>
Org mode is the best writing format, no contest. The defaults are more terminal-oriented, so lets make it look a little better
I like a little padding on my org blocks, just a millimeter or two on the top and bottom should do
</p>
<details id='orgd24e32b' class='code' open><summary><span class="lang">elisp</span></summary>
<div class='gutter'>
<a href='#orgd24e32b'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-elisp"><span class="org-comment-delimiter">;;</span><span class="org-comment">use image previews</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">org-startup-with-inline-images</span> t<span class="org-rainbow-delimiters-depth-1">)</span>            <span class="org-comment-delimiter">;</span><span class="org-comment">inline images in org mode</span>

<span class="org-comment-delimiter">;;</span><span class="org-comment">add padding in org</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package!</span> org-padding<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">add-hook</span> <span class="org-highlight-quoted-quote">'</span><span class="org-variable-name">org-mode-hook</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-variable-name">org-padding-mode</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">org-padding-block-begin-line-padding</span> <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-highlight-numbers-number">1.15</span> . <span class="org-highlight-numbers-number">0.15</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">org-padding-block-end-line-padding</span> <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-highlight-numbers-number">1.15</span> . <span class="org-highlight-numbers-number">0.15</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

 <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defadvice!</span> shut-up-org-problematic-hooks <span class="org-rainbow-delimiters-depth-2">(</span>orig-fn <span class="org-type">&amp;rest</span> args<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:around</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-variable-name">org-fancy-priorities-mode</span>
  <span class="org-builtin">:around</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-variable-name">org-superstar-mode</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">ignore-errors</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">apply</span> orig-fn args<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>

<p>
Lets add org pretty table as well
</p>
<details id='org994df23' class='code' open><summary><span class="lang">elisp</span></summary>
<div class='gutter'>
<a href='#org994df23'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-elisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package!</span> org-pretty-table
  <span class="org-builtin">:commands</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">org-pretty-table-mode</span> <span class="org-variable-name">global-org-pretty-table-mode</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>

<p>
Sadly I can&rsquo;t always work in org, but I can import stuff into it!
</p>
<details id='org4aa83ff' class='code' open><summary><span class="lang">Emacs Lisp</span></summary>
<div class='gutter'>
<a href='#org4aa83ff'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package!</span> org-pandoc-import
  <span class="org-builtin">:after</span> org<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>

<p>
I prefer /org as my directory. Lets change some other defaults too
</p>
<details id='org341da7e' class='code' open><summary><span class="lang">elisp</span></summary>
<div class='gutter'>
<a href='#org341da7e'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-elisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">org-directory</span> <span class="org-string">"~/org"</span>                      <span class="org-comment-delimiter">; </span><span class="org-comment">let's put files here</span>
      <span class="org-variable-name">org-use-property-inheritance</span> t              <span class="org-comment-delimiter">; </span><span class="org-comment">it's convenient to have properties inherited</span>
      <span class="org-variable-name">org-log-done</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">time</span>                          <span class="org-comment-delimiter">; </span><span class="org-comment">having the time a item is done sounds convenient</span>
      <span class="org-variable-name">org-list-allow-alphabetical</span> t               <span class="org-comment-delimiter">; </span><span class="org-comment">have a. A. a) A) list bullets</span>
      <span class="org-variable-name">org-export-in-background</span> t                  <span class="org-comment-delimiter">; </span><span class="org-comment">run export processes in external emacs process</span>
      <span class="org-variable-name">org-catch-invisible-edits</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">smart</span><span class="org-rainbow-delimiters-depth-1">)</span>            <span class="org-comment-delimiter">; </span><span class="org-comment">try not to accidently do weird stuff in invisible regions</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">org-babel-default-header-args</span>
      <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-builtin">:session</span> . <span class="org-string">"none"</span><span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-builtin">:results</span> . <span class="org-string">"replace"</span><span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-builtin">:exports</span> . <span class="org-string">"code"</span><span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-builtin">:cache</span> . <span class="org-string">"no"</span><span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-builtin">:noweb</span> . <span class="org-string">"no"</span><span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-builtin">:hlines</span> . <span class="org-string">"no"</span><span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-builtin">:tangle</span> . <span class="org-string">"no"</span><span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-builtin">:comments</span> . <span class="org-string">"link"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">remove-hook</span> <span class="org-highlight-quoted-quote">'</span><span class="org-variable-name">text-mode-hook</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-variable-name">visual-line-mode</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">add-hook</span> <span class="org-highlight-quoted-quote">'</span><span class="org-variable-name">text-mode-hook</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">auto-fill-mode</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">map!</span> <span class="org-builtin">:map</span> <span class="org-variable-name">evil-org-mode-map</span>
      <span class="org-builtin">:after</span> evil-org
      <span class="org-builtin">:n</span> <span class="org-string">"g &lt;up&gt;"</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">org-backward-heading-same-level</span>
      <span class="org-builtin">:n</span> <span class="org-string">"g &lt;down&gt;"</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">org-forward-heading-same-level</span>
      <span class="org-builtin">:n</span> <span class="org-string">"g &lt;left&gt;"</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">org-up-element</span>
      <span class="org-builtin">:n</span> <span class="org-string">"g &lt;right&gt;"</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">org-down-element</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">org-list-demote-modify-bullet</span> <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"+"</span> . <span class="org-string">"-"</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"-"</span> . <span class="org-string">"+"</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"*"</span> . <span class="org-string">"+"</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"1."</span> . <span class="org-string">"a."</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>

<p>
Lets add some spellcheck
</p>
<details id='org78994ed' class='code' open><summary><span class="lang">elisp</span></summary>
<div class='gutter'>
<a href='#org78994ed'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-elisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">add-hook</span> <span class="org-highlight-quoted-quote">'</span><span class="org-variable-name">org-mode-hook</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">turn-on-flyspell</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>

<p>
org-ol-tree is nice for viewing the structure of an org file
</p>
<details id='orgdad500e' class='code' open><summary><span class="lang">elisp</span></summary>
<div class='gutter'>
<a href='#orgdad500e'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-elisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package!</span> org-ol-tree
  <span class="org-builtin">:commands</span> org-ol-tree<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">map!</span> <span class="org-builtin">:map</span> <span class="org-variable-name">org-mode-map</span>
      <span class="org-builtin">:after</span> org
      <span class="org-builtin">:localleader</span>
      <span class="org-builtin">:desc</span> <span class="org-string">"Outline"</span> <span class="org-string">"O"</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">org-ol-tree</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>
</div>

<div id="outline-container-org9a682a0" class="outline-4">
<h4 id="org9a682a0"><span class="section-number-4">4.1.1.</span> HTML<a aria-hidden="true" href="#org9a682a0">#</a> </h4>
<div class="outline-text-4" id="text-4-1-1">
<details id='orgf97dd8f' class='code' open><summary><span class="lang">elisp</span></summary>
<div class='gutter'>
<a href='#orgf97dd8f'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-elisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package!</span> ox-gfm
  <span class="org-builtin">:after</span> org<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>

<p>
:header-args:emacs-lisp: :noweb-ref ox-html-conf
</p>
<p>
For some reason this only works if you have org first
</p>
<details id='org71bc65a' class='code' open><summary><span class="lang">elisp</span></summary>
<div class='gutter'>
<a href='#org71bc65a'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-elisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">after!</span> org
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">define-minor-mode</span> <span class="org-variable-name">org-fancy-html-export-mode</span>
  <span class="org-doc">"Toggle my fabulous org export tweaks. While this mode itself does a little bit,</span>
<span class="org-doc">the vast majority of the change in behaviour comes from switch statements in:</span>
<span class="org-doc"> - `</span><span class="org-doc"><span class="org-constant">org-html-template-fancier</span></span><span class="org-doc">'</span>
<span class="org-doc"> - `</span><span class="org-doc"><span class="org-constant">org-html--build-meta-info-extended</span></span><span class="org-doc">'</span>
<span class="org-doc"> - `</span><span class="org-doc"><span class="org-constant">org-html-src-block-collapsable</span></span><span class="org-doc">'</span>
<span class="org-doc"> - `</span><span class="org-doc"><span class="org-constant">org-html-block-collapsable</span></span><span class="org-doc">'</span>
<span class="org-doc"> - `</span><span class="org-doc"><span class="org-constant">org-html-table-wrapped</span></span><span class="org-doc">'</span>
<span class="org-doc"> - `</span><span class="org-doc"><span class="org-constant">org-html--format-toc-headline-colapseable</span></span><span class="org-doc">'</span>
<span class="org-doc"> - `</span><span class="org-doc"><span class="org-constant">org-html--toc-text-stripped-leaves</span></span><span class="org-doc">'</span>
<span class="org-doc"> - `</span><span class="org-doc"><span class="org-constant">org-export-html-headline-anchor</span></span><span class="org-doc">'"</span>
  <span class="org-builtin">:global</span> t
  <span class="org-builtin">:init-value</span> t
  <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">if</span> <span class="org-variable-name">org-fancy-html-export-mode</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">org-html-style-default</span> org-html-style-fancy
            <span class="org-variable-name">org-html-meta-tags</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">org-html-meta-tags-fancy</span>
            <span class="org-variable-name">org-html-checkbox-type</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">html-span</span><span class="org-rainbow-delimiters-depth-4">)</span>
    <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">org-html-style-default</span> org-html-style-plain
          <span class="org-variable-name">org-html-meta-tags</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">org-html-meta-tags-default</span>
          <span class="org-variable-name">org-html-checkbox-type</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">html</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defadvice!</span> org-html-template-fancier <span class="org-rainbow-delimiters-depth-3">(</span>orig-fn contents info<span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-doc">"Return complete document string after HTML conversion.</span>
<span class="org-doc">CONTENTS is the transcoded contents string.  INFO is a plist</span>
<span class="org-doc">holding export options. Adds a few extra things to the body</span>
<span class="org-doc">compared to the default implementation."</span>
  <span class="org-builtin">:around</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">org-html-template</span>
  <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">or</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">not</span> <span class="org-variable-name">org-fancy-html-export-mode</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">bound-and-true-p</span> org-msg-export-in-progress<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">funcall</span> orig-fn contents info<span class="org-rainbow-delimiters-depth-4">)</span>
    <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">concat</span>
     <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">and</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">not</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-function-name">org-html-html5-p</span> info<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">org-html-xhtml-p</span> info<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
       <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let*</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>xml-declaration <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">plist-get</span> info <span class="org-builtin">:html-xml-declaration</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
              <span class="org-rainbow-delimiters-depth-4">(</span>decl <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">or</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">and</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">stringp</span> xml-declaration<span class="org-rainbow-delimiters-depth-3">)</span> xml-declaration<span class="org-rainbow-delimiters-depth-2">)</span>
                        <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">cdr</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">assoc</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">plist-get</span> info <span class="org-builtin">:html-extension</span><span class="org-rainbow-delimiters-depth-4">)</span>
                                    xml-declaration<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
                        <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">cdr</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">assoc</span> <span class="org-string">"html"</span> xml-declaration<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
                        <span class="org-string">""</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
         <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">not</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">or</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">not</span> decl<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">string=</span> <span class="org-string">""</span> decl<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
           <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">format</span> <span class="org-string">"%s\n"</span>
                   <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">format</span> decl
                           <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">or</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">and</span> <span class="org-variable-name">org-html-coding-system</span>
                                    <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">fboundp</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">coding-system-get</span><span class="org-rainbow-delimiters-depth-4">)</span>
                                    <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">coding-system-get</span> <span class="org-variable-name">org-html-coding-system</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">mime-charset</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
                               <span class="org-string">"iso-8859-1"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
     <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-variable-name">org-html-doctype</span> info<span class="org-rainbow-delimiters-depth-1">)</span>
     <span class="org-string">"\n"</span>
     <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">concat</span> <span class="org-string">"&lt;html"</span>
             <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">cond</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span><span class="org-function-name">org-html-xhtml-p</span> info<span class="org-rainbow-delimiters-depth-4">)</span>
                    <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">format</span>
                     <span class="org-string">" xmlns=\"http://www.w3.org/1999/xhtml\" lang=\"%s\" xml:lang=\"%s\""</span>
                     <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">plist-get</span> info <span class="org-builtin">:language</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">plist-get</span> info <span class="org-builtin">:language</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
                   <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span><span class="org-function-name">org-html-html5-p</span> info<span class="org-rainbow-delimiters-depth-4">)</span>
                    <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">format</span> <span class="org-string">" lang=\"%s\""</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">plist-get</span> info <span class="org-builtin">:language</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
             <span class="org-string">"&gt;\n"</span><span class="org-rainbow-delimiters-depth-1">)</span>
     <span class="org-string">"&lt;head&gt;\n"</span>
     <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">org-html--build-meta-info</span> info<span class="org-rainbow-delimiters-depth-1">)</span>
     <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">org-html--build-head</span> info<span class="org-rainbow-delimiters-depth-1">)</span>
     <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">org-html--build-mathjax-config</span> info<span class="org-rainbow-delimiters-depth-1">)</span>
     <span class="org-string">"&lt;/head&gt;\n"</span>
     <span class="org-string">"&lt;body&gt;\n&lt;input type='checkbox' id='theme-switch'&gt;&lt;div id='page'&gt;&lt;label id='switch-label' for='theme-switch'&gt;&lt;/label&gt;"</span>
     <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>link-up <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-function-name">org-trim</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">plist-get</span> info <span class="org-builtin">:html-link-up</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
           <span class="org-rainbow-delimiters-depth-3">(</span>link-home <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-function-name">org-trim</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">plist-get</span> info <span class="org-builtin">:html-link-home</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
       <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">unless</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">and</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">string=</span> link-up <span class="org-string">""</span><span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">string=</span> link-home <span class="org-string">""</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
         <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">format</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">plist-get</span> info <span class="org-builtin">:html-home/up-format</span><span class="org-rainbow-delimiters-depth-4">)</span>
                 <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">or</span> link-up link-home<span class="org-rainbow-delimiters-depth-4">)</span>
                 <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">or</span> link-home link-up<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
     <span class="org-comment-delimiter">;; </span><span class="org-comment">Preamble.</span>
     <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">org-html--build-pre/postamble</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">preamble</span> info<span class="org-rainbow-delimiters-depth-1">)</span>
     <span class="org-comment-delimiter">;; </span><span class="org-comment">Document contents.</span>
     <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>div <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">assq</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">content</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">plist-get</span> info <span class="org-builtin">:html-divs</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
       <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">format</span> <span class="org-string">"&lt;%s id=\"%s\"&gt;\n"</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">nth</span> <span class="org-highlight-numbers-number">1</span> div<span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">nth</span> <span class="org-highlight-numbers-number">2</span> div<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
     <span class="org-comment-delimiter">;; </span><span class="org-comment">Document title.</span>
     <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">plist-get</span> info <span class="org-builtin">:with-title</span><span class="org-rainbow-delimiters-depth-2">)</span>
       <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>title <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">and</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">plist-get</span> info <span class="org-builtin">:with-title</span><span class="org-rainbow-delimiters-depth-2">)</span>
                         <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">plist-get</span> info <span class="org-builtin">:title</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
             <span class="org-rainbow-delimiters-depth-4">(</span>subtitle <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">plist-get</span> info <span class="org-builtin">:subtitle</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
             <span class="org-rainbow-delimiters-depth-4">(</span>html5-fancy <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">org-html--html5-fancy-p</span> info<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
         <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">when</span> title
           <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">format</span>
            <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">if</span> html5-fancy
                <span class="org-string">"&lt;header class=\"page-header\"&gt;%s\n&lt;h1 class=\"title\"&gt;%s&lt;/h1&gt;\n%s&lt;/header&gt;"</span>
              <span class="org-string">"&lt;h1 class=\"title\"&gt;%s%s&lt;/h1&gt;\n"</span><span class="org-rainbow-delimiters-depth-1">)</span>
            <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">or</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">plist-get</span> info <span class="org-builtin">:with-date</span><span class="org-rainbow-delimiters-depth-3">)</span>
                    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">plist-get</span> info <span class="org-builtin">:with-author</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
                <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">concat</span> <span class="org-string">"&lt;div class=\"page-meta\"&gt;"</span>
                        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">plist-get</span> info <span class="org-builtin">:with-date</span><span class="org-rainbow-delimiters-depth-4">)</span>
                          <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-function-name">org-export-data</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">plist-get</span> info <span class="org-builtin">:date</span><span class="org-rainbow-delimiters-depth-1">)</span> info<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
                        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">and</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">plist-get</span> info <span class="org-builtin">:with-date</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">plist-get</span> info <span class="org-builtin">:with-author</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-string">", "</span><span class="org-rainbow-delimiters-depth-3">)</span>
                        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">plist-get</span> info <span class="org-builtin">:with-author</span><span class="org-rainbow-delimiters-depth-4">)</span>
                          <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-function-name">org-export-data</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">plist-get</span> info <span class="org-builtin">:author</span><span class="org-rainbow-delimiters-depth-1">)</span> info<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
                        <span class="org-string">"&lt;/div&gt;\n"</span><span class="org-rainbow-delimiters-depth-2">)</span>
              <span class="org-string">""</span><span class="org-rainbow-delimiters-depth-1">)</span>
            <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">org-export-data</span> title info<span class="org-rainbow-delimiters-depth-1">)</span>
            <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">if</span> subtitle
                <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">format</span>
                 <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">if</span> html5-fancy
                     <span class="org-string">"&lt;p class=\"subtitle\" role=\"doc-subtitle\"&gt;%s&lt;/p&gt;\n"</span>
                   <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">concat</span> <span class="org-string">"\n"</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">org-html-close-tag</span> <span class="org-string">"br"</span> nil info<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"\n"</span>
                           <span class="org-string">"&lt;span class=\"subtitle\"&gt;%s&lt;/span&gt;\n"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
                 <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">org-export-data</span> subtitle info<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
              <span class="org-string">""</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
     contents
     <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">format</span> <span class="org-string">"&lt;/%s&gt;\n"</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">nth</span> <span class="org-highlight-numbers-number">1</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">assq</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">content</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">plist-get</span> info <span class="org-builtin">:html-divs</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
     <span class="org-comment-delimiter">;; </span><span class="org-comment">Postamble.</span>
     <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">org-html--build-pre/postamble</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">postamble</span> info<span class="org-rainbow-delimiters-depth-1">)</span>
     <span class="org-comment-delimiter">;; </span><span class="org-comment">Possibly use the Klipse library live code blocks.</span>
     <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">plist-get</span> info <span class="org-builtin">:html-klipsify-src</span><span class="org-rainbow-delimiters-depth-2">)</span>
       <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">concat</span> <span class="org-string">"&lt;script&gt;"</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">plist-get</span> info <span class="org-builtin">:html-klipse-selection-script</span><span class="org-rainbow-delimiters-depth-3">)</span>
               <span class="org-string">"&lt;/script&gt;&lt;script src=\""</span>
               <span class="org-variable-name">org-html-klipse-js</span>
               <span class="org-string">"\"&gt;&lt;/script&gt;&lt;link rel=\"stylesheet\" type=\"text/css\" href=\""</span>
               <span class="org-variable-name">org-html-klipse-css</span> <span class="org-string">"\"/&gt;"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
     <span class="org-comment-delimiter">;; </span><span class="org-comment">Closing document.</span>
     <span class="org-string">"&lt;/div&gt;\n&lt;/body&gt;\n&lt;/html&gt;"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defadvice!</span> org-html-toc-linked <span class="org-rainbow-delimiters-depth-3">(</span>depth info <span class="org-type">&amp;optional</span> scope<span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-doc">"Build a table of contents.</span>

<span class="org-doc">Just like `</span><span class="org-doc"><span class="org-constant">org-html-toc</span></span><span class="org-doc">', except the header is a link to \"#\".</span>

<span class="org-doc">DEPTH is an integer specifying the depth of the table.  INFO is</span>
<span class="org-doc">a plist used as a communication channel.  Optional argument SCOPE</span>
<span class="org-doc">is an element defining the scope of the table.  Return the table</span>
<span class="org-doc">of contents as a string, or nil if it is empty."</span>
  <span class="org-builtin">:override</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">org-html-toc</span>
  <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-1">(</span>toc-entries
         <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">mapcar</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-4">(</span>headline<span class="org-rainbow-delimiters-depth-4">)</span>
                   <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">cons</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">org-html--format-toc-headline</span> headline info<span class="org-rainbow-delimiters-depth-1">)</span>
                         <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">org-export-get-relative-level</span> headline info<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
                 <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">org-export-collect-headlines</span> info depth scope<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
    <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">when</span> toc-entries
      <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>toc <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">concat</span> <span class="org-string">"&lt;div id=\"text-table-of-contents\"&gt;"</span>
                         <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">org-html--toc-text</span> toc-entries<span class="org-rainbow-delimiters-depth-1">)</span>
                         <span class="org-string">"&lt;/div&gt;\n"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
        <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">if</span> scope toc
          <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-1">(</span>outer-tag <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">org-html--html5-fancy-p</span> info<span class="org-rainbow-delimiters-depth-3">)</span>
                               <span class="org-string">"nav"</span>
                             <span class="org-string">"div"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
            <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">concat</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">format</span> <span class="org-string">"&lt;%s id=\"table-of-contents\"&gt;\n"</span> outer-tag<span class="org-rainbow-delimiters-depth-1">)</span>
                    <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">top-level</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">plist-get</span> info <span class="org-builtin">:html-toplevel-hlevel</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
                      <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">format</span> <span class="org-string">"&lt;h%d&gt;&lt;a href=\"#\" style=\"color:inherit; text-decoration: none;\"&gt;%s&lt;/a&gt;&lt;/h%d&gt;\n"</span>
                              top-level
                              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">org-html--translate</span> <span class="org-string">"Table of Contents"</span> info<span class="org-rainbow-delimiters-depth-3">)</span>
                              top-level<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
                    toc
                    <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">format</span> <span class="org-string">"&lt;/%s&gt;\n"</span> outer-tag<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

 <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">org-html-meta-tags-opengraph-image</span>
  <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-builtin">:image</span> <span class="org-string">"https://tecosaur.com/resources/org/nib.png"</span>
    <span class="org-builtin">:type</span> <span class="org-string">"image/png"</span>
    <span class="org-builtin">:width</span> <span class="org-string">"200"</span>
    <span class="org-builtin">:height</span> <span class="org-string">"200"</span>
    <span class="org-builtin">:alt</span> <span class="org-string">"Green fountain pen nib"</span><span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-doc">"Plist of og:image:PROP properties and their value, for use in `</span><span class="org-doc"><span class="org-constant">org-html-meta-tags-fancy</span></span><span class="org-doc">'."</span><span class="org-rainbow-delimiters-depth-2">)</span>

<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defun</span> <span class="org-function-name">org-html-meta-tags-fancy</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">info</span><span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-doc">"Use the INFO plist to construct the meta tags, as described in `</span><span class="org-doc"><span class="org-constant">org-html-meta-tags</span></span><span class="org-doc">'."</span>
  <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-1">(</span>title <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">org-html-plain-text</span>
                <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">org-element-interpret-data</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">plist-get</span> info <span class="org-builtin">:title</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span> info<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
        <span class="org-rainbow-delimiters-depth-1">(</span>author <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">and</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">plist-get</span> info <span class="org-builtin">:with-author</span><span class="org-rainbow-delimiters-depth-3">)</span>
                     <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-1">(</span>auth <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">plist-get</span> info <span class="org-builtin">:author</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
                       <span class="org-comment-delimiter">;; </span><span class="org-comment">Return raw Org syntax.</span>
                       <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">and</span> auth <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">org-html-plain-text</span>
                                  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">org-element-interpret-data</span> auth<span class="org-rainbow-delimiters-depth-2">)</span> info<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
    <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">append</span>
     <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">list</span>
      <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">org-string-nw-p</span> author<span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">list</span> <span class="org-string">"name"</span> <span class="org-string">"author"</span> author<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
      <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">org-string-nw-p</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">plist-get</span> info <span class="org-builtin">:description</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">list</span> <span class="org-string">"name"</span> <span class="org-string">"description"</span>
              <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">plist-get</span> info <span class="org-builtin">:description</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
      <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"name"</span> <span class="org-string">"generator"</span> <span class="org-string">"org mode"</span><span class="org-rainbow-delimiters-depth-2">)</span>
      <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"name"</span> <span class="org-string">"theme-color"</span> <span class="org-string">"#77aa99"</span><span class="org-rainbow-delimiters-depth-2">)</span>
      <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"property"</span> <span class="org-string">"og:type"</span> <span class="org-string">"article"</span><span class="org-rainbow-delimiters-depth-2">)</span>
      <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">list</span> <span class="org-string">"property"</span> <span class="org-string">"og:title"</span> title<span class="org-rainbow-delimiters-depth-2">)</span>
      <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>subtitle <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">org-export-data</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">plist-get</span> info <span class="org-builtin">:subtitle</span><span class="org-rainbow-delimiters-depth-2">)</span> info<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-function-name">org-string-nw-p</span> subtitle<span class="org-rainbow-delimiters-depth-4">)</span>
          <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">list</span> <span class="org-string">"property"</span> <span class="org-string">"og:description"</span> subtitle<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
     <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">when</span> <span class="org-variable-name">org-html-meta-tags-opengraph-image</span>
       <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">list</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">list</span> <span class="org-string">"property"</span> <span class="org-string">"og:image"</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">plist-get</span> <span class="org-variable-name">org-html-meta-tags-opengraph-image</span> <span class="org-builtin">:image</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
             <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">list</span> <span class="org-string">"property"</span> <span class="org-string">"og:image:type"</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">plist-get</span> <span class="org-variable-name">org-html-meta-tags-opengraph-image</span> <span class="org-builtin">:type</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
             <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">list</span> <span class="org-string">"property"</span> <span class="org-string">"og:image:width"</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">plist-get</span> <span class="org-variable-name">org-html-meta-tags-opengraph-image</span> <span class="org-builtin">:width</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
             <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">list</span> <span class="org-string">"property"</span> <span class="org-string">"og:image:height"</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">plist-get</span> <span class="org-variable-name">org-html-meta-tags-opengraph-image</span> <span class="org-builtin">:height</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
             <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">list</span> <span class="org-string">"property"</span> <span class="org-string">"og:image:alt"</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">plist-get</span> <span class="org-variable-name">org-html-meta-tags-opengraph-image</span> <span class="org-builtin">:alt</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
     <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">list</span>
      <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">org-string-nw-p</span> author<span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">list</span> <span class="org-string">"property"</span> <span class="org-string">"og:article:author:first_name"</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">car</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">s-split-up-to</span> <span class="org-string">" "</span> author <span class="org-highlight-numbers-number">2</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
      <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">and</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-function-name">org-string-nw-p</span> author<span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-function-name">s-contains-p</span> <span class="org-string">" "</span> author<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">list</span> <span class="org-string">"property"</span> <span class="org-string">"og:article:author:last_name"</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">cadr</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">s-split-up-to</span> <span class="org-string">" "</span> author <span class="org-highlight-numbers-number">2</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
      <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">list</span> <span class="org-string">"property"</span> <span class="org-string">"og:article:published_time"</span>
            <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">format-time-string</span>
             <span class="org-string">"%FT%T%z"</span>
             <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">or</span>
              <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">when-let</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>date-str <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">cadar</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">org-collect-keywords</span> <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"DATE"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
                <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">unless</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">string=</span> date-str <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">format-time-string</span> <span class="org-string">"%F"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
                  <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">ignore-errors</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">encode-time</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">org-parse-time-string</span> date-str<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
              <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">if</span> <span class="org-variable-name">buffer-file-name</span>
                  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">file-attribute-modification-time</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">file-attributes</span> <span class="org-variable-name">buffer-file-name</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
                <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">current-time</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
      <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">when</span> <span class="org-variable-name">buffer-file-name</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">list</span> <span class="org-string">"property"</span> <span class="org-string">"og:article:modified_time"</span>
              <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">format-time-string</span> <span class="org-string">"%FT%T%z"</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">file-attribute-modification-time</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">file-attributes</span> <span class="org-variable-name">buffer-file-name</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">unless</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">functionp</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">org-html-meta-tags-default</span><span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">defalias</span> <span class="org-highlight-quoted-quote">'</span><span class="org-function-name">org-html-meta-tags-default</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">ignore</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">org-html-meta-tags</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">org-html-meta-tags-fancy</span><span class="org-rainbow-delimiters-depth-2">)</span>

<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> org-html-style-plain <span class="org-variable-name">org-html-style-default</span>
      <span class="org-variable-name">org-html-htmlize-output-type</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">css</span>
      <span class="org-variable-name">org-html-doctype</span> <span class="org-string">"html5"</span>
      <span class="org-variable-name">org-html-html5-fancy</span> t<span class="org-rainbow-delimiters-depth-2">)</span>

<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defun</span> <span class="org-function-name">org-html-reload-fancy-style</span> <span class="org-rainbow-delimiters-depth-3">()</span>
  <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">setq</span> org-html-style-fancy
        <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">concat</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">f-read-text</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">expand-file-name</span> <span class="org-string">"misc/org-export-header.html"</span> <span class="org-variable-name">doom-private-dir</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
                <span class="org-string">"&lt;script&gt;\n"</span>
                <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">f-read-text</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">expand-file-name</span> <span class="org-string">"misc/org-css/main.js"</span> <span class="org-variable-name">doom-private-dir</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
                <span class="org-string">"&lt;/script&gt;\n&lt;style&gt;\n"</span>
                <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">f-read-text</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">expand-file-name</span> <span class="org-string">"misc/org-css/main.min.css"</span> <span class="org-variable-name">doom-private-dir</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
                <span class="org-string">"&lt;/style&gt;"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">when</span> <span class="org-variable-name">org-fancy-html-export-mode</span>
    <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">org-html-style-default</span> org-html-style-fancy<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">org-html-reload-fancy-style</span><span class="org-rainbow-delimiters-depth-2">)</span>

<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">org-html-export-collapsed</span> nil<span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">eval</span> <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-3">(</span>cl-pushnew <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-4">(</span><span class="org-builtin">:collapsed</span> <span class="org-string">"COLLAPSED"</span> <span class="org-string">"collapsed"</span> <span class="org-variable-name">org-html-export-collapsed</span> t<span class="org-rainbow-delimiters-depth-4">)</span>
                   <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-function-name">org-export-backend-options</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">org-export-get-backend</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">html</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">add-to-list</span> <span class="org-highlight-quoted-quote">'</span><span class="org-variable-name">org-default-properties</span> <span class="org-string">"EXPORT_COLLAPSED"</span><span class="org-rainbow-delimiters-depth-2">)</span>

<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defadvice!</span> org-html-src-block-collapsable <span class="org-rainbow-delimiters-depth-3">(</span>orig-fn src-block contents info<span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-doc">"Wrap the usual &lt;pre&gt; block in a &lt;details&gt;"</span>
  <span class="org-builtin">:around</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">org-html-src-block</span>
  <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">or</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">not</span> <span class="org-variable-name">org-fancy-html-export-mode</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">bound-and-true-p</span> org-msg-export-in-progress<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">funcall</span> orig-fn src-block contents info<span class="org-rainbow-delimiters-depth-4">)</span>
    <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">let*</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">(</span>properties <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">cadr</span> src-block<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
           <span class="org-rainbow-delimiters-depth-2">(</span>lang <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">mode-name-to-lang-name</span>
                  <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">plist-get</span> properties <span class="org-builtin">:language</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
           <span class="org-rainbow-delimiters-depth-2">(</span>name <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">plist-get</span> properties <span class="org-builtin">:name</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
           <span class="org-rainbow-delimiters-depth-2">(</span>ref <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">org-export-get-reference</span> src-block info<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
           <span class="org-rainbow-delimiters-depth-2">(</span>collapsed-p <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">member</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">or</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">org-export-read-attribute</span> <span class="org-builtin">:attr_html</span> src-block <span class="org-builtin">:collapsed</span><span class="org-rainbow-delimiters-depth-1">)</span>
                                    <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">plist-get</span> info <span class="org-builtin">:collapsed</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
                                <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"y"</span> <span class="org-string">"yes"</span> <span class="org-string">"t"</span> t <span class="org-string">"true"</span> <span class="org-string">"all"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
      <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">format</span>
       <span class="org-string">"&lt;details id='%s' class='code'%s&gt;&lt;summary%s&gt;%s&lt;/summary&gt;</span>
<span class="org-string">&lt;div class='gutter'&gt;</span>
<span class="org-string">&lt;a href='#%s'&gt;#&lt;/a&gt;</span>
<span class="org-string">&lt;button title='Copy to clipboard' onclick='copyPreToClipbord(this)'&gt;&#9112;&lt;/button&gt;\</span>
<span class="org-string">&lt;/div&gt;</span>
<span class="org-string">%s</span>
<span class="org-string">&lt;/details&gt;"</span>
       ref
       <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">if</span> collapsed-p <span class="org-string">""</span> <span class="org-string">" open"</span><span class="org-rainbow-delimiters-depth-2">)</span>
       <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">if</span> name <span class="org-string">" class='named'"</span> <span class="org-string">""</span><span class="org-rainbow-delimiters-depth-2">)</span>
       <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">concat</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">when</span> name <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">concat</span> <span class="org-string">"&lt;span class=\"name\"&gt;"</span> name <span class="org-string">"&lt;/span&gt;"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-string">"&lt;span class=\"lang\"&gt;"</span> lang <span class="org-string">"&lt;/span&gt;"</span><span class="org-rainbow-delimiters-depth-2">)</span>
       ref
       <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">if</span> name
           <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">replace-regexp-in-string</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">format</span> <span class="org-string">"&lt;pre</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(</span></span><span class="org-string"> class=\"[</span><span class="org-string"><span class="org-negation-char">^</span></span><span class="org-string">\"]+\"</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string">? id=\"%s\"&gt;"</span> ref<span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-string">"&lt;pre\\1&gt;"</span>
                                     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">funcall</span> orig-fn src-block contents info<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
         <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">funcall</span> orig-fn src-block contents info<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defun</span> <span class="org-function-name">mode-name-to-lang-name</span> <span class="org-rainbow-delimiters-depth-3">(</span>mode<span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">or</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">cadr</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">assoc</span> mode
                   <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"asymptote"</span> <span class="org-string">"Asymptote"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                     <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"awk"</span> <span class="org-string">"Awk"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                     <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C"</span> <span class="org-string">"C"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                     <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"clojure"</span> <span class="org-string">"Clojure"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                     <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"css"</span> <span class="org-string">"CSS"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                     <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"D"</span> <span class="org-string">"D"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                     <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"ditaa"</span> <span class="org-string">"ditaa"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                     <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"dot"</span> <span class="org-string">"Graphviz"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                     <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"calc"</span> <span class="org-string">"Emacs Calc"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                     <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"emacs-lisp"</span> <span class="org-string">"Emacs Lisp"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                     <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"fortran"</span> <span class="org-string">"Fortran"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                     <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"gnuplot"</span> <span class="org-string">"gnuplot"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                     <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"haskell"</span> <span class="org-string">"Haskell"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                     <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"hledger"</span> <span class="org-string">"hledger"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                     <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"java"</span> <span class="org-string">"Java"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                     <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"js"</span> <span class="org-string">"Javascript"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                     <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"latex"</span> <span class="org-string">"LaTeX"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                     <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"ledger"</span> <span class="org-string">"Ledger"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                     <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"lisp"</span> <span class="org-string">"Lisp"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                     <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"lilypond"</span> <span class="org-string">"Lilypond"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                     <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"lua"</span> <span class="org-string">"Lua"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                     <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"matlab"</span> <span class="org-string">"MATLAB"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                     <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"mscgen"</span> <span class="org-string">"Mscgen"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                     <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"ocaml"</span> <span class="org-string">"Objective Caml"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                     <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"octave"</span> <span class="org-string">"Octave"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                     <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"org"</span> <span class="org-string">"Org mode"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                     <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"oz"</span> <span class="org-string">"OZ"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                     <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"plantuml"</span> <span class="org-string">"Plantuml"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                     <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"processing"</span> <span class="org-string">"Processing.js"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                     <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"python"</span> <span class="org-string">"Python"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                     <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"R"</span> <span class="org-string">"R"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                     <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"ruby"</span> <span class="org-string">"Ruby"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                     <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"sass"</span> <span class="org-string">"Sass"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                     <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"scheme"</span> <span class="org-string">"Scheme"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                     <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"screen"</span> <span class="org-string">"Gnu Screen"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                     <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"sed"</span> <span class="org-string">"Sed"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                     <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"sh"</span> <span class="org-string">"shell"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                     <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"sql"</span> <span class="org-string">"SQL"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                     <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"sqlite"</span> <span class="org-string">"SQLite"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                     <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"forth"</span> <span class="org-string">"Forth"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                     <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"io"</span> <span class="org-string">"IO"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                     <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"J"</span> <span class="org-string">"J"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                     <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"makefile"</span> <span class="org-string">"Makefile"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                     <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"maxima"</span> <span class="org-string">"Maxima"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                     <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"perl"</span> <span class="org-string">"Perl"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                     <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"picolisp"</span> <span class="org-string">"Pico Lisp"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                     <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"scala"</span> <span class="org-string">"Scala"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                     <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"shell"</span> <span class="org-string">"Shell Script"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                     <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"ebnf2ps"</span> <span class="org-string">"ebfn2ps"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                     <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"cpp"</span> <span class="org-string">"C++"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                     <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"abc"</span> <span class="org-string">"ABC"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                     <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"coq"</span> <span class="org-string">"Coq"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                     <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"groovy"</span> <span class="org-string">"Groovy"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                     <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"bash"</span> <span class="org-string">"bash"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                     <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"csh"</span> <span class="org-string">"csh"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                     <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"ash"</span> <span class="org-string">"ash"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                     <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"dash"</span> <span class="org-string">"dash"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                     <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"ksh"</span> <span class="org-string">"ksh"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                     <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"mksh"</span> <span class="org-string">"mksh"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                     <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"posh"</span> <span class="org-string">"posh"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                     <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"ada"</span> <span class="org-string">"Ada"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                     <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"asm"</span> <span class="org-string">"Assembler"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                     <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"caml"</span> <span class="org-string">"Caml"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                     <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"delphi"</span> <span class="org-string">"Delphi"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                     <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"html"</span> <span class="org-string">"HTML"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                     <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"idl"</span> <span class="org-string">"IDL"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                     <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"mercury"</span> <span class="org-string">"Mercury"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                     <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"metapost"</span> <span class="org-string">"MetaPost"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                     <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"modula-2"</span> <span class="org-string">"Modula-2"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                     <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"pascal"</span> <span class="org-string">"Pascal"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                     <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"ps"</span> <span class="org-string">"PostScript"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                     <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"prolog"</span> <span class="org-string">"Prolog"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                     <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"simula"</span> <span class="org-string">"Simula"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                     <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"tcl"</span> <span class="org-string">"tcl"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                     <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"tex"</span> <span class="org-string">"LaTeX"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                     <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"plain-tex"</span> <span class="org-string">"TeX"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                     <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"verilog"</span> <span class="org-string">"Verilog"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                     <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"vhdl"</span> <span class="org-string">"VHDL"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                     <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"xml"</span> <span class="org-string">"XML"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                     <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"nxml"</span> <span class="org-string">"XML"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                     <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"conf"</span> <span class="org-string">"Configuration File"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      mode<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

 <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defadvice!</span> org-html-table-wrapped <span class="org-rainbow-delimiters-depth-3">(</span>orig-fn table contents info<span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-doc">"Wrap the usual &lt;table&gt; in a &lt;div&gt;"</span>
  <span class="org-builtin">:around</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">org-html-table</span>
  <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">or</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">not</span> <span class="org-variable-name">org-fancy-html-export-mode</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">bound-and-true-p</span> org-msg-export-in-progress<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">funcall</span> orig-fn table contents info<span class="org-rainbow-delimiters-depth-4">)</span>
    <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">let*</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">(</span>name <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">plist-get</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">cadr</span> table<span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-builtin">:name</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
           <span class="org-rainbow-delimiters-depth-2">(</span>ref <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">org-export-get-reference</span> table info<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
      <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">format</span> <span class="org-string">"&lt;div id='%s' class='table'&gt;</span>
<span class="org-string">&lt;div class='gutter'&gt;&lt;a href='#%s'&gt;#&lt;/a&gt;&lt;/div&gt;</span>
<span class="org-string">&lt;div class='tabular'&gt;</span>
<span class="org-string">%s</span>
<span class="org-string">&lt;/div&gt;\</span>
<span class="org-string">&lt;/div&gt;"</span>
              ref ref
              <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">if</span> name
                  <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">replace-regexp-in-string</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">format</span> <span class="org-string">"&lt;table id=\"%s\""</span> ref<span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-string">"&lt;table"</span>
                                            <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">funcall</span> orig-fn table contents info<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
                <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">funcall</span> orig-fn table contents info<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>


<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defadvice!</span> org-html--format-toc-headline-colapseable <span class="org-rainbow-delimiters-depth-3">(</span>orig-fn headline info<span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-doc">"Add a label and checkbox to `</span><span class="org-doc"><span class="org-constant">org-html--format-toc-headline</span></span><span class="org-doc">'s usual output,</span>
<span class="org-doc">to allow the TOC to be a collapseable tree."</span>
  <span class="org-builtin">:around</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">org-html--format-toc-headline</span>
  <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">or</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">not</span> <span class="org-variable-name">org-fancy-html-export-mode</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">bound-and-true-p</span> org-msg-export-in-progress<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">funcall</span> orig-fn headline info<span class="org-rainbow-delimiters-depth-4">)</span>
    <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">(</span>id <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">or</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-function-name">org-element-property</span> <span class="org-builtin">:CUSTOM_ID</span> headline<span class="org-rainbow-delimiters-depth-4">)</span>
                  <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-function-name">org-export-get-reference</span> headline info<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
      <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">format</span> <span class="org-string">"&lt;input type='checkbox' id='toc--%s'/&gt;&lt;label for='toc--%s'&gt;%s&lt;/label&gt;"</span>
              id id <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">funcall</span> orig-fn headline info<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

 <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defadvice!</span> org-html--toc-text-stripped-leaves <span class="org-rainbow-delimiters-depth-3">(</span>orig-fn toc-entries<span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-doc">"Remove label"</span>
  <span class="org-builtin">:around</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">org-html--toc-text</span>
  <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">or</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">not</span> <span class="org-variable-name">org-fancy-html-export-mode</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">bound-and-true-p</span> org-msg-export-in-progress<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">funcall</span> orig-fn toc-entries<span class="org-rainbow-delimiters-depth-4">)</span>
    <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">replace-regexp-in-string</span> <span class="org-string">"&lt;input [</span><span class="org-string"><span class="org-negation-char">^</span></span><span class="org-string">&gt;]+&gt;&lt;label [</span><span class="org-string"><span class="org-negation-char">^</span></span><span class="org-string">&gt;]+&gt;</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(</span></span><span class="org-string">.+?</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string">&lt;/label&gt;&lt;/li&gt;"</span> <span class="org-string">"\\1&lt;/li&gt;"</span>
                              <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">funcall</span> orig-fn toc-entries<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">org-html-text-markup-alist</span>
      <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>bold . <span class="org-string">"&lt;b&gt;%s&lt;/b&gt;"</span><span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span>code . <span class="org-string">"&lt;code&gt;%s&lt;/code&gt;"</span><span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span>italic . <span class="org-string">"&lt;i&gt;%s&lt;/i&gt;"</span><span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span>strike-through . <span class="org-string">"&lt;del&gt;%s&lt;/del&gt;"</span><span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span>underline . <span class="org-string">"&lt;span class=\"underline\"&gt;%s&lt;/span&gt;"</span><span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span>verbatim . <span class="org-string">"&lt;kbd&gt;%s&lt;/kbd&gt;"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">appendq!</span> <span class="org-variable-name">org-html-checkbox-types</span>
          <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">html-span</span>
             <span class="org-rainbow-delimiters-depth-1">(</span>on . <span class="org-string">"&lt;span class='checkbox'&gt;&lt;/span&gt;"</span><span class="org-rainbow-delimiters-depth-1">)</span>
             <span class="org-rainbow-delimiters-depth-1">(</span>off . <span class="org-string">"&lt;span class='checkbox'&gt;&lt;/span&gt;"</span><span class="org-rainbow-delimiters-depth-1">)</span>
             <span class="org-rainbow-delimiters-depth-1">(</span>trans . <span class="org-string">"&lt;span class='checkbox'&gt;&lt;/span&gt;"</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">org-html-checkbox-type</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">html-span</span><span class="org-rainbow-delimiters-depth-2">)</span>

<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">pushnew!</span> <span class="org-variable-name">org-html-special-string-regexps</span>
          <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"-&amp;gt;"</span> . <span class="org-string">"&amp;#8594;"</span><span class="org-rainbow-delimiters-depth-3">)</span>
          <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"&amp;lt;-"</span> . <span class="org-string">"&amp;#8592;"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defun</span> <span class="org-function-name">org-export-html-headline-anchor</span> <span class="org-rainbow-delimiters-depth-3">(</span>text backend info<span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">and</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">org-export-derived-backend-p</span> backend <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">html</span><span class="org-rainbow-delimiters-depth-1">)</span>
             <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">not</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">org-export-derived-backend-p</span> backend <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">re-reveal</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
             <span class="org-variable-name">org-fancy-html-export-mode</span><span class="org-rainbow-delimiters-depth-4">)</span>
    <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">unless</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">bound-and-true-p</span> org-msg-export-in-progress<span class="org-rainbow-delimiters-depth-1">)</span>
      <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">replace-regexp-in-string</span>
       <span class="org-string">"&lt;h</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(</span></span><span class="org-string">[0-9]</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string"> id=\"</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(</span></span><span class="org-string">[a-z0-9-]+</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string">\"&gt;</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(</span></span><span class="org-string">.*[</span><span class="org-string"><span class="org-negation-char">^</span></span><span class="org-string"> ]</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string">&lt;\\/h[0-9]&gt;"</span> <span class="org-comment-delimiter">; </span><span class="org-comment">this is quite restrictive, but due to `</span><span class="org-comment"><span class="org-constant">org-reference-contraction</span></span><span class="org-comment">' I can do this</span>
       <span class="org-string">"&lt;h\\1 id=\"\\2\"&gt;\\3&lt;a aria-hidden=\"true\" href=\"#\\2\"&gt;#&lt;/a&gt; &lt;/h\\1&gt;"</span>
       text<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">add-to-list</span> <span class="org-highlight-quoted-quote">'</span><span class="org-variable-name">org-export-filter-headline-functions</span>
             <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">org-export-html-headline-anchor</span><span class="org-rainbow-delimiters-depth-2">)</span>

<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">org-link-set-parameters</span> <span class="org-string">"Https"</span>
                         <span class="org-builtin">:follow</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-4">(</span>url arg<span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">browse-url</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">concat</span> <span class="org-string">"https:"</span> url<span class="org-rainbow-delimiters-depth-1">)</span> arg<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
                         <span class="org-builtin">:export</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">org-url-fancy-export</span><span class="org-rainbow-delimiters-depth-2">)</span>

 <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defun</span> <span class="org-function-name">org-url-fancy-export</span> <span class="org-rainbow-delimiters-depth-3">(</span>url _desc backend<span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-1">(</span>metadata <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">org-url-unfurl-metadata</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">concat</span> <span class="org-string">"https:"</span> url<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
    <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">cond</span>
     <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">org-export-derived-backend-p</span> backend <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">html</span><span class="org-rainbow-delimiters-depth-2">)</span>
      <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">concat</span>
       <span class="org-string">"&lt;div class=\"link-preview\"&gt;"</span>
       <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">format</span> <span class="org-string">"&lt;a href=\"%s\"&gt;"</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">concat</span> <span class="org-string">"https:"</span> url<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
       <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">plist-get</span> metadata <span class="org-builtin">:image</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">format</span> <span class="org-string">"&lt;img src=\"%s\"/&gt;"</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">plist-get</span> metadata <span class="org-builtin">:image</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
       <span class="org-string">"&lt;small&gt;"</span>
       <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">replace-regexp-in-string</span> <span class="org-string">"//</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(?:</span></span><span class="org-string">www\\.</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string">?</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(</span></span><span class="org-string">[</span><span class="org-string"><span class="org-negation-char">^</span></span><span class="org-string">/]+</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string">/?.*"</span> <span class="org-string">"\\1"</span> url<span class="org-rainbow-delimiters-depth-3">)</span>
       <span class="org-string">"&lt;/small&gt;&lt;p&gt;"</span>
       <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">plist-get</span> metadata <span class="org-builtin">:title</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">concat</span> <span class="org-string">"&lt;b&gt;"</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">org-html-encode-plain-text</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">plist-get</span> metadata <span class="org-builtin">:title</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"&lt;/b&gt;&lt;/br&gt;"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
       <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">plist-get</span> metadata <span class="org-builtin">:description</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-function-name">org-html-encode-plain-text</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">plist-get</span> metadata <span class="org-builtin">:description</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
       <span class="org-string">"&lt;/p&gt;&lt;/a&gt;&lt;/div&gt;"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
     <span class="org-rainbow-delimiters-depth-1">(</span>t url<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> org-url-unfurl-metadata--cache nil<span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defun</span> <span class="org-function-name">org-url-unfurl-metadata</span> <span class="org-rainbow-delimiters-depth-3">(</span>url<span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">cdr</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">or</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">assoc</span> url org-url-unfurl-metadata--cache<span class="org-rainbow-delimiters-depth-1">)</span>
           <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">car</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">push</span>
                 <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">cons</span>
                  url
                  <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">let*</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">(</span>head-data
                          <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">-filter</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">listp</span>
                                   <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">cdaddr</span>
                                    <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">with-current-buffer</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">progn</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">message</span> <span class="org-string">"Fetching metadata from %s"</span> url<span class="org-rainbow-delimiters-depth-3">)</span>
                                                                <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">url-retrieve-synchronously</span> url t t <span class="org-highlight-numbers-number">5</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
                                      <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">goto-char</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">point-min</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
                                      <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">delete-region</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">point-min</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">-</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">search-forward</span> <span class="org-string">"&lt;head"</span><span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-highlight-numbers-number">6</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
                                      <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">delete-region</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">search-forward</span> <span class="org-string">"&lt;/head&gt;"</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">point-max</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
                                      <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">goto-char</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">point-min</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
                                      <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">while</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">re-search-forward</span> <span class="org-string">"&lt;script[</span><span class="org-string"><span class="org-negation-char">^</span></span><span class="org-string">\u2800]+?&lt;/script&gt;"</span> nil t<span class="org-rainbow-delimiters-depth-3">)</span>
                                        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">replace-match</span> <span class="org-string">""</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
                                      <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">goto-char</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">point-min</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
                                      <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">while</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">re-search-forward</span> <span class="org-string">"&lt;style[</span><span class="org-string"><span class="org-negation-char">^</span></span><span class="org-string">\u2800]+?&lt;/style&gt;"</span> nil t<span class="org-rainbow-delimiters-depth-3">)</span>
                                        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">replace-match</span> <span class="org-string">""</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
                                      <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">libxml-parse-html-region</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">point-min</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">point-max</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
                         <span class="org-rainbow-delimiters-depth-2">(</span>meta <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">delq</span> nil
                                     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">mapcar</span>
                                      <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-2">(</span>tag<span class="org-rainbow-delimiters-depth-2">)</span>
                                        <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">eq</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">meta</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">car</span> tag<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
                                          <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">cons</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">or</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">cdr</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">assoc</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">name</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">cadr</span> tag<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
                                                    <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">cdr</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">assoc</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">property</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">cadr</span> tag<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
                                                <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">cdr</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">assoc</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">content</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">cadr</span> tag<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
                                      head-data<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
                    <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>title <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">or</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">cdr</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">assoc</span> <span class="org-string">"og:title"</span> meta<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
                                     <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">cdr</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">assoc</span> <span class="org-string">"twitter:title"</span> meta<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
                                     <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">nth</span> <span class="org-highlight-numbers-number">2</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">assq</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">title</span> head-data<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
                          <span class="org-rainbow-delimiters-depth-3">(</span>description <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">or</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">cdr</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">assoc</span> <span class="org-string">"og:description"</span> meta<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
                                           <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">cdr</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">assoc</span> <span class="org-string">"twitter:description"</span> meta<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
                                           <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">cdr</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">assoc</span> <span class="org-string">"description"</span> meta<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
                          <span class="org-rainbow-delimiters-depth-3">(</span>image <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">or</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">cdr</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">assoc</span> <span class="org-string">"og:image"</span> meta<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
                                     <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">cdr</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">assoc</span> <span class="org-string">"twitter:image"</span> meta<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
                      <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">when</span> image
                        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">setq</span> image <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">replace-regexp-in-string</span>
                                     <span class="org-string">"^/"</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">concat</span> <span class="org-string">"https://"</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">replace-regexp-in-string</span> <span class="org-string">"//</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(</span></span><span class="org-string">[</span><span class="org-string"><span class="org-negation-char">^</span></span><span class="org-string">/]+</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string">/?.*"</span> <span class="org-string">"\\1"</span> url<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-string">"/"</span><span class="org-rainbow-delimiters-depth-1">)</span>
                                     <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">replace-regexp-in-string</span>
                                      <span class="org-string">"^//"</span> <span class="org-string">"https://"</span>
                                      image<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
                      <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">list</span> <span class="org-builtin">:title</span> title <span class="org-builtin">:description</span> description <span class="org-builtin">:image</span> image<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
                 org-url-unfurl-metadata--cache<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

                <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">org-html-mathjax-options</span>
      <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>path <span class="org-string">"https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"</span> <span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span>scale <span class="org-string">"1"</span><span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span>autonumber <span class="org-string">"ams"</span><span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span>multlinewidth <span class="org-string">"85%"</span><span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span>tagindent <span class="org-string">".8em"</span><span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span>tagside <span class="org-string">"right"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">org-html-mathjax-template</span>
      <span class="org-string">"&lt;script&gt;</span>
<span class="org-string">MathJax = {</span>
<span class="org-string">  chtml: {</span>
<span class="org-string">    scale: %SCALE</span>
<span class="org-string">  },</span>
<span class="org-string">  svg: {</span>
<span class="org-string">    scale: %SCALE,</span>
<span class="org-string">    fontCache: \"global\"</span>
<span class="org-string">  },</span>
<span class="org-string">  tex: {</span>
<span class="org-string">    tags: \"%AUTONUMBER\",</span>
<span class="org-string">    multlineWidth: \"%MULTLINEWIDTH\",</span>
<span class="org-string">    tagSide: \"%TAGSIDE\",</span>
<span class="org-string">    tagIndent: \"%TAGINDENT\"</span>
<span class="org-string">  }</span>
<span class="org-string">};</span>
<span class="org-string">&lt;/script&gt;</span>
<span class="org-string">&lt;script id=\"MathJax-script\" async</span>
<span class="org-string">        src=\"%PATH\"&gt;&lt;/script&gt;"</span><span class="org-rainbow-delimiters-depth-2">)</span>

<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>

<p>
There are quite a few instances where I want to modify variables defined in
<kbd>ox-html</kbd>, so we&rsquo;ll wrap the contents of this section in a
</p>
<details id='orgb8f07c4' class='code' open><summary><span class="lang">Emacs Lisp</span></summary>
<div class='gutter'>
<a href='#orgb8f07c4'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">after!</span> ox-html
  &lt;&lt;ox-html-conf&gt;&gt;
<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>

<p>
Tecosaur has a good collection of fonts, might as well take some
</p>
<details id='org24cdf8c' class='code' open><summary><span class="lang">HTML</span></summary>
<div class='gutter'>
<a href='#org24cdf8c'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-html">&lt;<span class="org-function-name">link</span> <span class="org-variable-name">rel</span>=<span class="org-string">"icon"</span> <span class="org-variable-name">href</span>=<span class="org-string">"https://tecosaur.com/resources/org/nib.ico"</span> <span class="org-variable-name">type</span>=<span class="org-string">"image/ico"</span> /&gt;

&lt;<span class="org-function-name">link</span> <span class="org-variable-name">rel</span>=<span class="org-string">"preload"</span> <span class="org-variable-name">as</span>=<span class="org-string">"font"</span> <span class="org-variable-name">crossorigin</span>=<span class="org-string">"anonymous"</span> <span class="org-variable-name">type</span>=<span class="org-string">"font/woff2"</span> <span class="org-variable-name">href</span>=<span class="org-string">"https://tecosaur.com/resources/org/etbookot-roman-webfont.woff2"</span>&gt;
&lt;<span class="org-function-name">link</span> <span class="org-variable-name">rel</span>=<span class="org-string">"preload"</span> <span class="org-variable-name">as</span>=<span class="org-string">"font"</span> <span class="org-variable-name">crossorigin</span>=<span class="org-string">"anonymous"</span> <span class="org-variable-name">type</span>=<span class="org-string">"font/woff2"</span> <span class="org-variable-name">href</span>=<span class="org-string">"https://tecosaur.com/resources/org/etbookot-italic-webfont.woff2"</span>&gt;
&lt;<span class="org-function-name">link</span> <span class="org-variable-name">rel</span>=<span class="org-string">"preload"</span> <span class="org-variable-name">as</span>=<span class="org-string">"font"</span> <span class="org-variable-name">crossorigin</span>=<span class="org-string">"anonymous"</span> <span class="org-variable-name">type</span>=<span class="org-string">"font/woff2"</span> <span class="org-variable-name">href</span>=<span class="org-string">"https://tecosaur.com/resources/org/Merriweather-TextRegular.woff2"</span>&gt;
&lt;<span class="org-function-name">link</span> <span class="org-variable-name">rel</span>=<span class="org-string">"preload"</span> <span class="org-variable-name">as</span>=<span class="org-string">"font"</span> <span class="org-variable-name">crossorigin</span>=<span class="org-string">"anonymous"</span> <span class="org-variable-name">type</span>=<span class="org-string">"font/woff2"</span> <span class="org-variable-name">href</span>=<span class="org-string">"https://tecosaur.com/resources/org/Merriweather-TextItalic.woff2"</span>&gt;
&lt;<span class="org-function-name">link</span> <span class="org-variable-name">rel</span>=<span class="org-string">"preload"</span> <span class="org-variable-name">as</span>=<span class="org-string">"font"</span> <span class="org-variable-name">crossorigin</span>=<span class="org-string">"anonymous"</span> <span class="org-variable-name">type</span>=<span class="org-string">"font/woff2"</span> <span class="org-variable-name">href</span>=<span class="org-string">"https://tecosaur.com/resources/org/Merriweather-TextBold.woff2"</span>&gt;
</pre>
</div>
</details>

<details id='org7023884' class='code' open><summary class='named'><span class="name">Example, fixed width, and property blocks</span><span class="lang">Emacs Lisp</span></summary>
<div class='gutter'>
<a href='#org7023884'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">org-html-block-collapsable</span> <span class="org-rainbow-delimiters-depth-2">(</span>orig-fn block contents info<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Wrap the usual block in a &lt;details&gt;"</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">or</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">not</span> <span class="org-variable-name">org-fancy-html-export-mode</span><span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">bound-and-true-p</span> org-msg-export-in-progress<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
      <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">funcall</span> orig-fn block contents info<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-1">(</span>ref <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">org-export-get-reference</span> block info<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
          <span class="org-rainbow-delimiters-depth-1">(</span>type <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">pcase</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">car</span> block<span class="org-rainbow-delimiters-depth-3">)</span>
                  <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">property-drawer</span> <span class="org-string">"Properties"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
          <span class="org-rainbow-delimiters-depth-1">(</span>collapsed-default <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">pcase</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">car</span> block<span class="org-rainbow-delimiters-depth-3">)</span>
                               <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">property-drawer</span> t<span class="org-rainbow-delimiters-depth-3">)</span>
                               <span class="org-rainbow-delimiters-depth-3">(</span>_ nil<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
          <span class="org-rainbow-delimiters-depth-1">(</span>collapsed-value <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">org-export-read-attribute</span> <span class="org-builtin">:attr_html</span> block <span class="org-builtin">:collapsed</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
          <span class="org-rainbow-delimiters-depth-1">(</span>collapsed-p <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">or</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">member</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-function-name">org-export-read-attribute</span> <span class="org-builtin">:attr_html</span> block <span class="org-builtin">:collapsed</span><span class="org-rainbow-delimiters-depth-4">)</span>
                                   <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"y"</span> <span class="org-string">"yes"</span> <span class="org-string">"t"</span> t <span class="org-string">"true"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
                           <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">member</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">plist-get</span> info <span class="org-builtin">:collapsed</span><span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"all"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">format</span>
       <span class="org-string">"&lt;details id='%s' class='code'%s&gt;</span>
<span class="org-string">&lt;summary%s&gt;%s&lt;/summary&gt;</span>
<span class="org-string">&lt;div class='gutter'&gt;\</span>
<span class="org-string">&lt;a href='#%s'&gt;#&lt;/a&gt;</span>
<span class="org-string">&lt;button title='Copy to clipboard' onclick='copyPreToClipbord(this)'&gt;&#9112;&lt;/button&gt;\</span>
<span class="org-string">&lt;/div&gt;</span>
<span class="org-string">%s\n</span>
<span class="org-string">&lt;/details&gt;"</span>
       ref
       <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">or</span> collapsed-p collapsed-default<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-string">""</span> <span class="org-string">" open"</span><span class="org-rainbow-delimiters-depth-1">)</span>
       <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">if</span> type <span class="org-string">" class='named'"</span> <span class="org-string">""</span><span class="org-rainbow-delimiters-depth-1">)</span>
       <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">if</span> type <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">format</span> <span class="org-string">"&lt;span class='type'&gt;%s&lt;/span&gt;"</span> type<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-string">""</span><span class="org-rainbow-delimiters-depth-1">)</span>
       ref
       <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">funcall</span> orig-fn block contents info<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">advice-add</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">org-html-example-block</span>   <span class="org-builtin">:around</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">org-html-block-collapsable</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">advice-add</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">org-html-fixed-width</span>     <span class="org-builtin">:around</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">org-html-block-collapsable</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">advice-add</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">org-html-property-drawer</span> <span class="org-builtin">:around</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">org-html-block-collapsable</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>
</div>
</div>
</div>

<div id="outline-container-orgd233f41" class="outline-3">
<h3 id="orgd233f41"><span class="section-number-3">4.2.</span> Org-Roam<a aria-hidden="true" href="#orgd233f41">#</a> </h3>
<div class="outline-text-3" id="text-4-2">
<p>
I would like to get into the habit of using org-roam for my notes, mainly because of that cool reddit post with the server.
</p>
<details id='orgbe3be3f' class='code' open><summary><span class="lang">elisp</span></summary>
<div class='gutter'>
<a href='#orgbe3be3f'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-elisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">org-roam-directory</span> <span class="org-string">"~/org/roam/"</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>

<p>
Lets set up the org-roam-ui as well
</p>
<details id='org8557acb' class='code' open><summary><span class="lang">elisp</span></summary>
<div class='gutter'>
<a href='#org8557acb'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-elisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package!</span> websocket
    <span class="org-builtin">:after</span> org-roam<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package!</span> org-roam-ui
    <span class="org-builtin">:after</span> org-roam<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>

<p>
The doom-modeline is a bit messy with roam, lets adjust that
</p>
<details id='org39372fa' class='code' open><summary><span class="lang">elisp</span></summary>
<div class='gutter'>
<a href='#org39372fa'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-elisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defadvice!</span> doom-modeline--buffer-file-name-roam-aware-a <span class="org-rainbow-delimiters-depth-2">(</span>orig-fun<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:around</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">doom-modeline-buffer-file-name</span> <span class="org-comment-delimiter">; </span><span class="org-comment">takes no args</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">s-contains-p</span> <span class="org-variable-name">org-roam-directory</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">or</span> <span class="org-variable-name">buffer-file-name</span> <span class="org-string">""</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
      <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">replace-regexp-in-string</span>
       <span class="org-string">"</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(?:</span></span><span class="org-string">^</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">.*/</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(</span></span><span class="org-string">[0-9]\\{4\\}</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(</span></span><span class="org-string">[0-9]\\{2\\}</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(</span></span><span class="org-string">[0-9]\\{2\\}</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string">[0-9]*-"</span>
       <span class="org-string">"&#129172;(\\1-\\2-\\3) "</span>
       <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">subst-char-in-string</span> ?_ ?  <span class="org-variable-name">buffer-file-name</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">funcall</span> orig-fun<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>


<p>
Now, I want to replace the org-roam buffer with org-roam-ui
To do that, we need to:
</p>

<ol class="org-ol">
<li>Disable the regular buffer</li>
</ol>
<details id='org7ab3a0b' class='code' open><summary><span class="lang">elisp</span></summary>
<div class='gutter'>
<a href='#org7ab3a0b'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-elisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">after!</span> org-roam
   <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">+org-roam-open-buffer-on-find-file</span> nil<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>

<ol class="org-ol">
<li>Create a minor-mode to open the url (<a href="http://127.0.0.1:35901/">http://127.0.0.1:35901/</a>)</li>
</ol>
<details id='orgf91de9d' class='code' open><summary><span class="lang">elisp</span></summary>
<div class='gutter'>
<a href='#orgf91de9d'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-elisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defcustom</span> <span class="org-variable-name">org-roam-ui-use-webkit</span> t
  <span class="org-doc">"Use embedded webkit to preview.</span>
<span class="org-doc">This requires GNU/Emacs version &gt;= 26 and built with the `--with-xwidgets`</span>
<span class="org-doc">option."</span>
  <span class="org-builtin">:type</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">boolean</span>
  <span class="org-builtin">:group</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">roam</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">org-roam-ui-browser</span> <span class="org-rainbow-delimiters-depth-2">(</span>url<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Use browser specified by user to load URL.</span>
<span class="org-doc">Use default browser if nil."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">if</span> org-roam-ui-url-browser
      <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-variable-name">browse-url-generic-program</span> org-roam-ui-url-browser<span class="org-rainbow-delimiters-depth-1">)</span>
            <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-variable-name">browse-url-generic-args</span> roam-url-args<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">ignore</span> <span class="org-variable-name">browse-url-generic-program</span><span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">ignore</span> <span class="org-variable-name">browse-url-generic-args</span><span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">browse-url-generic</span> url<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">browse-url</span> url<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">org-roam-ui-open-url</span> <span class="org-rainbow-delimiters-depth-2">(</span>url<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Ask the browser to load URL.</span>
<span class="org-doc">Use default browser unless `</span><span class="org-doc"><span class="org-constant">xwidget</span></span><span class="org-doc">' is available."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">and</span> <span class="org-variable-name">org-roam-ui-use-webkit</span>
           <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">featurep</span> <span class="org-highlight-quoted-quote">'</span><span class="org-constant">xwidget-internal</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
      <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">progn</span>
        <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-function-name">xwidget-webkit-browse-url</span> url<span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">(</span>buf <span class="org-rainbow-delimiters-depth-3">(</span>xwidget-buffer <span class="org-rainbow-delimiters-depth-4">(</span>xwidget-webkit-current-session<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
          <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">buffer-live-p</span> buf<span class="org-rainbow-delimiters-depth-2">)</span>
            <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">and</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">eq</span> buf <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">current-buffer</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">quit-window</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
            <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-variable-name">display-buffer-alist</span><span class="org-rainbow-delimiters-depth-3">)(</span><span class="org-constant">pop-to-buffer</span> buf<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">org-roam-ui-browser</span> url<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">;;;</span><span class="org-comment">###</span><span class="org-comment"><span class="org-warning">autoload</span></span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">define-minor-mode</span> <span class="org-variable-name">org-roam-ui-open-in-browser</span>
  <span class="org-doc">"open org-roam-ui in the browser"</span>
 <span class="org-builtin">:lighter</span> <span class="org-string">"roam"</span>
 <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">org-roam-ui-open-url</span> <span class="org-string">"http://127.0.0.1:35901"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>

<ol class="org-ol">
<li><del>Lets set it to use the nord colors</del> <code>orui-sync-theme</code> does this already apparently</li>
</ol>
<details id='org7661258' class='code' open><summary><span class="lang">elisp</span></summary>
<div class='gutter'>
<a href='#org7661258'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-elisp"><span class="org-comment-delimiter">;;</span><span class="org-comment">(setq org-roam-ui-sync-theme nil)</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">(setq org-roam-ui-custom-theme</span>
<span class="org-comment-delimiter">;;       </span><span class="org-comment">`((bg . "#2E3440")</span>
<span class="org-comment-delimiter">;;         </span><span class="org-comment">(bg-alt . "#3B4252")</span>
<span class="org-comment-delimiter">;;         </span><span class="org-comment">(fg . "#D8DEE9")</span>
<span class="org-comment-delimiter">;;         </span><span class="org-comment">(fg-alt . "#E5E9F0")</span>
<span class="org-comment-delimiter">;;         </span><span class="org-comment">(red . "#BF616A")</span>
<span class="org-comment-delimiter">;;         </span><span class="org-comment">(orange . "#D08770")</span>
<span class="org-comment-delimiter">;;         </span><span class="org-comment">(yellow ."#EBCB8B")</span>
<span class="org-comment-delimiter">;;         </span><span class="org-comment">(green . "#A3BE8C")</span>
<span class="org-comment-delimiter">;;         </span><span class="org-comment">(cyan . "#88C0D0")</span>
<span class="org-comment-delimiter">;;         </span><span class="org-comment">(blue . "#81A1C1")</span>
<span class="org-comment-delimiter">;;         </span><span class="org-comment">(violet . "#B48EAD")</span>
<span class="org-comment-delimiter">;;         </span><span class="org-comment">(magenta . "#8FBCBB")))</span>
</pre>
</div>
</details>
</div>
</div>

<div id="outline-container-org78c2af6" class="outline-3">
<h3 id="org78c2af6"><span class="section-number-3">4.3.</span> Org-Agenda<a aria-hidden="true" href="#org78c2af6">#</a> </h3>
<div class="outline-text-3" id="text-4-3">
<p>
Set the directory
</p>
<details id='orga250af3' class='code' open><summary><span class="lang">elisp</span></summary>
<div class='gutter'>
<a href='#orga250af3'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-elisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">org-agenda-files</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">list</span> <span class="org-string">"~/org/school.org"</span>
                             <span class="org-string">"~/org/todo.org"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>

<p>
Org-super-agenda!
</p>
<details id='orge6e85bf' class='code' open><summary><span class="lang">elisp</span></summary>
<div class='gutter'>
<a href='#orge6e85bf'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-elisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package!</span> org-super-agenda
  <span class="org-builtin">:commands</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-variable-name">org-super-agenda-mode</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">after!</span> org-agenda
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-variable-name">org-super-agenda-mode</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">org-agenda-skip-scheduled-if-done</span> t
      <span class="org-variable-name">org-agenda-skip-deadline-if-done</span> t
      <span class="org-variable-name">org-agenda-include-deadlines</span> t
      <span class="org-variable-name">org-agenda-block-separator</span> nil
      <span class="org-variable-name">org-agenda-tags-column</span> <span class="org-highlight-numbers-number">100</span> <span class="org-comment-delimiter">;; </span><span class="org-comment">from testing this seems to be a good value</span>
      <span class="org-variable-name">org-agenda-compact-blocks</span> t<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">org-agenda-custom-commands</span>
      <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"o"</span> <span class="org-string">"Overview"</span>
         <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-1">(</span>agenda <span class="org-string">""</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-variable-name">org-agenda-span</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">day</span><span class="org-rainbow-delimiters-depth-3">)</span>
                      <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-variable-name">org-super-agenda-groups</span>
                       <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-builtin">:name</span> <span class="org-string">"Today"</span>
                          <span class="org-builtin">:time-grid</span> t
                          <span class="org-builtin">:date</span> today
                          <span class="org-builtin">:todo</span> <span class="org-string">"TODAY"</span>
                          <span class="org-builtin">:scheduled</span> today
                          <span class="org-builtin">:order</span> <span class="org-highlight-numbers-number">1</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
          <span class="org-rainbow-delimiters-depth-1">(</span>alltodo <span class="org-string">""</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-variable-name">org-agenda-overriding-header</span> <span class="org-string">""</span><span class="org-rainbow-delimiters-depth-3">)</span>
                       <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-variable-name">org-super-agenda-groups</span>
                        <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-builtin">:name</span> <span class="org-string">"Next to do"</span>
                           <span class="org-builtin">:todo</span> <span class="org-string">"NEXT"</span>
                           <span class="org-builtin">:order</span> <span class="org-highlight-numbers-number">1</span><span class="org-rainbow-delimiters-depth-1">)</span>
                          <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-builtin">:name</span> <span class="org-string">"Important"</span>
                           <span class="org-builtin">:tag</span> <span class="org-string">"Important"</span>
                           <span class="org-builtin">:priority</span> <span class="org-string">"A"</span>
                           <span class="org-builtin">:order</span> <span class="org-highlight-numbers-number">6</span><span class="org-rainbow-delimiters-depth-1">)</span>
                          <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-builtin">:name</span> <span class="org-string">"Due Today"</span>
                           <span class="org-builtin">:deadline</span> today
                           <span class="org-builtin">:order</span> <span class="org-highlight-numbers-number">2</span><span class="org-rainbow-delimiters-depth-1">)</span>
                          <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-builtin">:name</span> <span class="org-string">"Due Soon"</span>
                           <span class="org-builtin">:deadline</span> future
                           <span class="org-builtin">:order</span> <span class="org-highlight-numbers-number">8</span><span class="org-rainbow-delimiters-depth-1">)</span>
                          <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-builtin">:name</span> <span class="org-string">"Overdue"</span>
                           <span class="org-builtin">:deadline</span> past
                           <span class="org-builtin">:face</span> error
                           <span class="org-builtin">:order</span> <span class="org-highlight-numbers-number">7</span><span class="org-rainbow-delimiters-depth-1">)</span>
                          <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-builtin">:name</span> <span class="org-string">"Assignments"</span>
                           <span class="org-builtin">:tag</span> <span class="org-string">"Assignment"</span>
                           <span class="org-builtin">:order</span> <span class="org-highlight-numbers-number">10</span><span class="org-rainbow-delimiters-depth-1">)</span>
                          <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-builtin">:name</span> <span class="org-string">"Issues"</span>
                           <span class="org-builtin">:tag</span> <span class="org-string">"Issue"</span>
                           <span class="org-builtin">:order</span> <span class="org-highlight-numbers-number">12</span><span class="org-rainbow-delimiters-depth-1">)</span>
                          <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-builtin">:name</span> <span class="org-string">"Emacs"</span>
                           <span class="org-builtin">:tag</span> <span class="org-string">"Emacs"</span>
                           <span class="org-builtin">:order</span> <span class="org-highlight-numbers-number">13</span><span class="org-rainbow-delimiters-depth-1">)</span>
                          <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-builtin">:name</span> <span class="org-string">"Projects"</span>
                           <span class="org-builtin">:tag</span> <span class="org-string">"Project"</span>
                           <span class="org-builtin">:order</span> <span class="org-highlight-numbers-number">14</span><span class="org-rainbow-delimiters-depth-1">)</span>
                          <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-builtin">:name</span> <span class="org-string">"Research"</span>
                           <span class="org-builtin">:tag</span> <span class="org-string">"Research"</span>
                           <span class="org-builtin">:order</span> <span class="org-highlight-numbers-number">15</span><span class="org-rainbow-delimiters-depth-1">)</span>
                          <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-builtin">:name</span> <span class="org-string">"To read"</span>
                           <span class="org-builtin">:tag</span> <span class="org-string">"Read"</span>
                           <span class="org-builtin">:order</span> <span class="org-highlight-numbers-number">30</span><span class="org-rainbow-delimiters-depth-1">)</span>
                          <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-builtin">:name</span> <span class="org-string">"Waiting"</span>
                           <span class="org-builtin">:todo</span> <span class="org-string">"WAITING"</span>
                           <span class="org-builtin">:order</span> <span class="org-highlight-numbers-number">20</span><span class="org-rainbow-delimiters-depth-1">)</span>
                          <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-builtin">:name</span> <span class="org-string">"University"</span>
                           <span class="org-builtin">:tag</span> <span class="org-string">"uni"</span>
                           <span class="org-builtin">:order</span> <span class="org-highlight-numbers-number">32</span><span class="org-rainbow-delimiters-depth-1">)</span>
                          <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-builtin">:name</span> <span class="org-string">"Trivial"</span>
                           <span class="org-builtin">:priority&lt;=</span> <span class="org-string">"E"</span>
                           <span class="org-builtin">:tag</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Trivial"</span> <span class="org-string">"Unimportant"</span><span class="org-rainbow-delimiters-depth-2">)</span>
                           <span class="org-builtin">:todo</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"SOMEDAY"</span> <span class="org-rainbow-delimiters-depth-2">)</span>
                           <span class="org-builtin">:order</span> <span class="org-highlight-numbers-number">90</span><span class="org-rainbow-delimiters-depth-1">)</span>
                          <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-builtin">:discard</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-builtin">:tag</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Chore"</span> <span class="org-string">"Routine"</span> <span class="org-string">"Daily"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>
</div>
</div>

<div id="outline-container-orga3275a3" class="outline-3">
<h3 id="orga3275a3"><span class="section-number-3">4.4.</span> Org-Capture<a aria-hidden="true" href="#orga3275a3">#</a> </h3>
<div class="outline-text-3" id="text-4-4">
<p>
Use doct
</p>
<details id='org637c5af' class='code' open><summary><span class="lang">Emacs Lisp</span></summary>
<div class='gutter'>
<a href='#org637c5af'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package!</span> doct
  <span class="org-builtin">:commands</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">doct</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>
</div>

<div id="outline-container-orgd822abd" class="outline-4">
<h4 id="orgd822abd"><span class="section-number-4">4.4.1.</span> Prettify<a aria-hidden="true" href="#orgd822abd">#</a> </h4>
<div class="outline-text-4" id="text-4-4-1">
<p>
Improve the look of the capture dialog (idea borrowed from <a href="https://github.com/tecosaur">tecosaur</a>)
</p>
<details id='orgd34bcff' class='code' open><summary><span class="lang">Emacs Lisp</span></summary>
<div class='gutter'>
<a href='#orgd34bcff'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">org-capture-select-template-prettier</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">&amp;optional</span> keys<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Select a capture template, in a prettier way than default</span>
<span class="org-doc">Lisp programs can force the template by setting KEYS to a string."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span><span class="org-variable-name">org-capture-templates</span>
         <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">or</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">org-contextualize-keys</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">org-capture-upgrade-templates</span> <span class="org-variable-name">org-capture-templates</span><span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-variable-name">org-capture-templates-contexts</span><span class="org-rainbow-delimiters-depth-2">)</span>
             <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"t"</span> <span class="org-string">"Task"</span> entry <span class="org-rainbow-delimiters-depth-4">(</span>file+headline <span class="org-string">""</span> <span class="org-string">"Tasks"</span><span class="org-rainbow-delimiters-depth-4">)</span>
                <span class="org-string">"* </span><span class="org-string"><span class="org-bold"><span class="org-warning">TODO</span></span></span><span class="org-string"> %?\n  %u\n  %a"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">if</span> keys
        <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">or</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">assoc</span> keys <span class="org-variable-name">org-capture-templates</span><span class="org-rainbow-delimiters-depth-1">)</span>
            <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">error</span> <span class="org-string">"No capture template referred to by \"%s\" keys"</span> keys<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-function-name">org-mks</span> <span class="org-variable-name">org-capture-templates</span>
               <span class="org-string">"Select a capture template\n&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;"</span>
               <span class="org-string">"Template key: "</span>
               <span class="org-highlight-quoted-quote">`</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"q"</span> ,<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">concat</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-function-name">all-the-icons-octicon</span> <span class="org-string">"stop"</span> <span class="org-builtin">:face</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">all-the-icons-red</span> <span class="org-builtin">:v-adjust</span> <span class="org-highlight-numbers-number">0.01</span><span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-string">"\tAbort"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">advice-add</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">org-capture-select-template</span> <span class="org-builtin">:override</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">org-capture-select-template-prettier</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">org-mks-pretty</span> <span class="org-rainbow-delimiters-depth-2">(</span>table title <span class="org-type">&amp;optional</span> prompt specials<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Select a member of an alist with multiple keys. Prettified.</span>

<span class="org-doc">TABLE is the alist which should contain entries where the car is a string.</span>
<span class="org-doc">There should be two types of entries.</span>

<span class="org-doc">1. prefix descriptions like (\"a\" \"Description\")</span>
<span class="org-doc">   This indicates that `</span><span class="org-doc"><span class="org-constant">a</span></span><span class="org-doc">' is a prefix key for multi-letter selection, and</span>
<span class="org-doc">   that there are entries following with keys like \"ab\", \"ax\"&#8230;</span>

<span class="org-doc">2. Select-able members must have more than two elements, with the first</span>
<span class="org-doc">   being the string of keys that lead to selecting it, and the second a</span>
<span class="org-doc">   short description string of the item.</span>

<span class="org-doc">The command will then make a temporary buffer listing all entries</span>
<span class="org-doc">that can be selected with a single key, and all the single key</span>
<span class="org-doc">prefixes.  When you press the key for a single-letter entry, it is selected.</span>
<span class="org-doc">When you press a prefix key, the commands (and maybe further prefixes)</span>
<span class="org-doc">under this key will be shown and offered for selection.</span>

<span class="org-doc">TITLE will be placed over the selection in the temporary buffer,</span>
<span class="org-doc">PROMPT will be used when prompting for a key.  SPECIALS is an</span>
<span class="org-doc">alist with (\"key\" \"description\") entries.  When one of these</span>
<span class="org-doc">is selected, only the bare key is returned."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">save-window-excursion</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-variable-name">inhibit-quit</span> t<span class="org-rainbow-delimiters-depth-1">)</span>
          <span class="org-rainbow-delimiters-depth-1">(</span>buffer <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">org-switch-to-buffer-other-window</span> <span class="org-string">"*Org Select*"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
          <span class="org-rainbow-delimiters-depth-1">(</span>prompt <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">or</span> prompt <span class="org-string">"Select: "</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
          <span class="org-variable-name">case-fold-search</span>
          current<span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">unwind-protect</span>
          <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">catch</span> <span class="org-highlight-quoted-quote">'</span><span class="org-constant">exit</span>
            <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">while</span> t
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">setq-local</span> <span class="org-variable-name">evil-normal-state-cursor</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">list</span> nil<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">erase-buffer</span><span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">insert</span> title <span class="org-string">"\n\n"</span><span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-1">(</span>des-keys nil<span class="org-rainbow-delimiters-depth-1">)</span>
                    <span class="org-rainbow-delimiters-depth-1">(</span>allowed-keys <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"\C-g"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
                    <span class="org-rainbow-delimiters-depth-1">(</span>tab-alternatives <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"\s"</span> <span class="org-string">"\t"</span> <span class="org-string">"\r"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
                    <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-variable-name">cursor-type</span> nil<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
                <span class="org-comment-delimiter">;; </span><span class="org-comment">Populate allowed keys and descriptions keys</span>
                <span class="org-comment-delimiter">;; </span><span class="org-comment">available with CURRENT selector.</span>
                <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">(</span>re <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">format</span> <span class="org-string">"\\`%s</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(</span></span><span class="org-string">.</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string">\\'"</span>
                                  <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">if</span> current <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">regexp-quote</span> current<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">""</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
                      <span class="org-rainbow-delimiters-depth-2">(</span>prefix <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">if</span> current <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">concat</span> current <span class="org-string">" "</span><span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-string">""</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
                  <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">dolist</span> <span class="org-rainbow-delimiters-depth-2">(</span>entry table<span class="org-rainbow-delimiters-depth-2">)</span>
                    <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">pcase</span> entry
                      <span class="org-comment-delimiter">;; </span><span class="org-comment">Description.</span>
                      <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-highlight-quoted-quote">`</span><span class="org-rainbow-delimiters-depth-4">(</span>,<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">and</span> key <span class="org-rainbow-delimiters-depth-2">(</span>pred <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">string-match</span> re<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span> ,desc<span class="org-rainbow-delimiters-depth-4">)</span>
                       <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">(</span>k <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">match-string</span> <span class="org-highlight-numbers-number">1</span> key<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
                         <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">push</span> k des-keys<span class="org-rainbow-delimiters-depth-1">)</span>
                         <span class="org-comment-delimiter">;; </span><span class="org-comment">Keys ending in tab, space or RET are equivalent.</span>
                         <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">member</span> k tab-alternatives<span class="org-rainbow-delimiters-depth-2">)</span>
                             <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">push</span> <span class="org-string">"\t"</span> allowed-keys<span class="org-rainbow-delimiters-depth-2">)</span>
                           <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">push</span> k allowed-keys<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
                         <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">insert</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">propertize</span> prefix <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">face</span> <span class="org-highlight-quoted-quote">'</span><span class="org-variable-name">font-lock-comment-face</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">propertize</span> k <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">face</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">bold</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">propertize</span> <span class="org-string">"&#8250;"</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">face</span> <span class="org-highlight-quoted-quote">'</span><span class="org-variable-name">font-lock-comment-face</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-string">"  "</span> desc <span class="org-string">"&#8230;"</span> <span class="org-string">"\n"</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
                      <span class="org-comment-delimiter">;; </span><span class="org-comment">Usable entry.</span>
                      <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-highlight-quoted-quote">`</span><span class="org-rainbow-delimiters-depth-4">(</span>,<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">and</span> key <span class="org-rainbow-delimiters-depth-2">(</span>pred <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">string-match</span> re<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span> ,desc . ,_<span class="org-rainbow-delimiters-depth-4">)</span>
                       <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">(</span>k <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">match-string</span> <span class="org-highlight-numbers-number">1</span> key<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
                         <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">insert</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">propertize</span> prefix <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">face</span> <span class="org-highlight-quoted-quote">'</span><span class="org-variable-name">font-lock-comment-face</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">propertize</span> k <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">face</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">bold</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-string">"   "</span> desc <span class="org-string">"\n"</span><span class="org-rainbow-delimiters-depth-1">)</span>
                         <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">push</span> k allowed-keys<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
                      <span class="org-rainbow-delimiters-depth-3">(</span>_ nil<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
                <span class="org-comment-delimiter">;; </span><span class="org-comment">Insert special entries, if any.</span>
                <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">when</span> specials
                  <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">insert</span> <span class="org-string">"&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;\n"</span><span class="org-rainbow-delimiters-depth-1">)</span>
                  <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">pcase-dolist</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-highlight-quoted-quote">`</span><span class="org-rainbow-delimiters-depth-3">(</span>,key ,description<span class="org-rainbow-delimiters-depth-3">)</span> specials<span class="org-rainbow-delimiters-depth-2">)</span>
                    <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">insert</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">format</span> <span class="org-string">"%s   %s\n"</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">propertize</span> key <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">face</span> <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-1">(</span>bold all-the-icons-red<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span> description<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
                    <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">push</span> key allowed-keys<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
                <span class="org-comment-delimiter">;; </span><span class="org-comment">Display UI and let user select an entry or</span>
                <span class="org-comment-delimiter">;; </span><span class="org-comment">a sub-level prefix.</span>
                <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">goto-char</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">point-min</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
                <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">unless</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">pos-visible-in-window-p</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">point-max</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
                  <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">org-fit-window-to-buffer</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
                <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">(</span>pressed <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">org--mks-read-key</span> allowed-keys prompt nil<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
                  <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> current <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">concat</span> current pressed<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
                  <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">cond</span>
                   <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">equal</span> pressed <span class="org-string">"\C-g"</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">user-error</span> <span class="org-string">"Abort"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
                   <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">equal</span> pressed <span class="org-string">"ESC"</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">user-error</span> <span class="org-string">"Abort"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
                   <span class="org-comment-delimiter">;; </span><span class="org-comment">Selection is a prefix: open a new menu.</span>
                   <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">member</span> pressed des-keys<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
                   <span class="org-comment-delimiter">;; </span><span class="org-comment">Selection matches an association: return it.</span>
                   <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-1">(</span>entry <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">assoc</span> current table<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
                      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">and</span> entry <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">throw</span> <span class="org-highlight-quoted-quote">'</span><span class="org-constant">exit</span> entry<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
                   <span class="org-comment-delimiter">;; </span><span class="org-comment">Selection matches a special entry: return the</span>
                   <span class="org-comment-delimiter">;; </span><span class="org-comment">selection prefix.</span>
                   <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">assoc</span> current specials<span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">throw</span> <span class="org-highlight-quoted-quote">'</span><span class="org-constant">exit</span> current<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
                   <span class="org-rainbow-delimiters-depth-2">(</span>t <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">error</span> <span class="org-string">"No entry available"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
        <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">when</span> buffer <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">kill-buffer</span> buffer<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">advice-add</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">org-mks</span> <span class="org-builtin">:override</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">org-mks-pretty</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>

<p>
The <a href="file:///home/shauryasingh/.emacs.doom/bin/org-capture">org-capture bin</a> is rather nice, but I&rsquo;d be nicer with a smaller frame, and
no modeline.
</p>

<details id='org831f53c' class='code' open><summary><span class="lang">Emacs Lisp</span></summary>
<div class='gutter'>
<a href='#org831f53c'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setf</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">alist-get</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">height</span> <span class="org-variable-name">+org-capture-frame-parameters</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-highlight-numbers-number">15</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">(alist-get 'name +org-capture-frame-parameters) "&#10070; Capture") ;; ATM hardcoded in other places, so changing breaks stuff</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">+org-capture-fn</span>
      <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-3">()</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">set-window-parameter</span> nil <span class="org-highlight-quoted-quote">'</span><span class="org-variable-name">mode-line-format</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">none</span><span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">org-capture</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>

<p>
Sprinkle in some <kbd>doct</kbd> utility functions
</p>
<details id='org246f49e' class='code' open><summary><span class="lang">Emacs Lisp</span></summary>
<div class='gutter'>
<a href='#org246f49e'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">+doct-icon-declaration-to-icon</span> <span class="org-rainbow-delimiters-depth-2">(</span>declaration<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Convert :icon declaration to icon"</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>name <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">pop</span> declaration<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">set</span>  <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">intern</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">concat</span> <span class="org-string">"all-the-icons-"</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">plist-get</span> declaration <span class="org-builtin">:set</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span>face <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">intern</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">concat</span> <span class="org-string">"all-the-icons-"</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">plist-get</span> declaration <span class="org-builtin">:color</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span>v-adjust <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">or</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">plist-get</span> declaration <span class="org-builtin">:v-adjust</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-highlight-numbers-number">0.01</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">apply</span> set <span class="org-highlight-quoted-quote">`</span><span class="org-rainbow-delimiters-depth-4">(</span>,name <span class="org-builtin">:face</span> ,face <span class="org-builtin">:v-adjust</span> ,v-adjust<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">+doct-iconify-capture-templates</span> <span class="org-rainbow-delimiters-depth-2">(</span>groups<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Add declaration's :icon to each template group in GROUPS."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>templates <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">doct-flatten-lists-in</span> groups<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">doct-templates</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">mapcar</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-2">(</span>template<span class="org-rainbow-delimiters-depth-2">)</span>
                                   <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">when-let*</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>props <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">nthcdr</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">=</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">length</span> template<span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-highlight-numbers-number">4</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-highlight-numbers-number">2</span> <span class="org-highlight-numbers-number">5</span><span class="org-rainbow-delimiters-depth-2">)</span> template<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
                                               <span class="org-rainbow-delimiters-depth-4">(</span>spec <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">plist-get</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">plist-get</span> props <span class="org-builtin">:doct</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-builtin">:icon</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
                                     <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">setf</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">nth</span> <span class="org-highlight-numbers-number">1</span> template<span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">concat</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">+doct-icon-declaration-to-icon</span> spec<span class="org-rainbow-delimiters-depth-1">)</span>
                                                                    <span class="org-string">"\t"</span>
                                                                    <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">nth</span> <span class="org-highlight-numbers-number">1</span> template<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
                                   template<span class="org-rainbow-delimiters-depth-1">)</span>
                                 templates<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">doct-after-conversion-functions</span> <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-2">(</span>+doct-iconify-capture-templates<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>
</div>
</div>

<div id="outline-container-org1ae83c8" class="outline-4">
<h4 id="org1ae83c8"><span class="section-number-4">4.4.2.</span> Templates<a aria-hidden="true" href="#org1ae83c8">#</a> </h4>
<div class="outline-text-4" id="text-4-4-2">
<p>
And we can now add some templates! This isn&rsquo;t even remotely set in stone, I wouldn&rsquo;t even describe them as set in <i>jelly</i> really.
</p>
<details id='org90061c6' class='code' open><summary><span class="lang">Emacs Lisp</span></summary>
<div class='gutter'>
<a href='#org90061c6'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">org-capture-templates</span>
      <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">doct</span> <span class="org-highlight-quoted-quote">`</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"Home"</span> <span class="org-builtin">:keys</span> <span class="org-string">"h"</span>
               <span class="org-builtin">:icon</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"home"</span> <span class="org-builtin">:set</span> <span class="org-string">"octicon"</span> <span class="org-builtin">:color</span> <span class="org-string">"cyan"</span><span class="org-rainbow-delimiters-depth-1">)</span>
               <span class="org-builtin">:file</span> <span class="org-string">"Home.org"</span>
               <span class="org-builtin">:prepend</span> t
               <span class="org-builtin">:headline</span> <span class="org-string">"Inbox"</span>
               <span class="org-builtin">:template</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"* </span><span class="org-string"><span class="org-bold"><span class="org-warning">TODO</span></span></span><span class="org-string"> %?"</span>
                          <span class="org-string">"%i %a"</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
              <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"Work"</span> <span class="org-builtin">:keys</span> <span class="org-string">"w"</span>
               <span class="org-builtin">:icon</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"business"</span> <span class="org-builtin">:set</span> <span class="org-string">"material"</span> <span class="org-builtin">:color</span> <span class="org-string">"yellow"</span><span class="org-rainbow-delimiters-depth-1">)</span>
               <span class="org-builtin">:file</span> <span class="org-string">"Work.org"</span>
               <span class="org-builtin">:prepend</span> t
               <span class="org-builtin">:headline</span> <span class="org-string">"Inbox"</span>
               <span class="org-builtin">:template</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"* </span><span class="org-string"><span class="org-bold"><span class="org-warning">TODO</span></span></span><span class="org-string"> %?"</span>
                          <span class="org-string">"SCHEDULED: %^{Schedule:}t"</span>
                          <span class="org-string">"DEADLINE: %^{Deadline:}t"</span>
                          <span class="org-string">"%i %a"</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
              <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"Note"</span> <span class="org-builtin">:keys</span> <span class="org-string">"n"</span>
               <span class="org-builtin">:icon</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"sticky-note"</span> <span class="org-builtin">:set</span> <span class="org-string">"faicon"</span> <span class="org-builtin">:color</span> <span class="org-string">"yellow"</span><span class="org-rainbow-delimiters-depth-1">)</span>
               <span class="org-builtin">:file</span> <span class="org-string">"Notes.org"</span>
               <span class="org-builtin">:template</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"* *?"</span>
                          <span class="org-string">"%i %a"</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
              <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"Project"</span> <span class="org-builtin">:keys</span> <span class="org-string">"p"</span>
               <span class="org-builtin">:icon</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"repo"</span> <span class="org-builtin">:set</span> <span class="org-string">"octicon"</span> <span class="org-builtin">:color</span> <span class="org-string">"silver"</span><span class="org-rainbow-delimiters-depth-1">)</span>
               <span class="org-builtin">:prepend</span> t
               <span class="org-builtin">:type</span> entry
               <span class="org-builtin">:headline</span> <span class="org-string">"Inbox"</span>
               <span class="org-builtin">:template</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"* %{keyword} %?"</span>
                          <span class="org-string">"%i"</span>
                          <span class="org-string">"%a"</span><span class="org-rainbow-delimiters-depth-1">)</span>
               <span class="org-builtin">:file</span> <span class="org-string">""</span>
               <span class="org-builtin">:custom</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-builtin">:keyword</span> <span class="org-string">""</span><span class="org-rainbow-delimiters-depth-1">)</span>
               <span class="org-builtin">:children</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Task"</span> <span class="org-builtin">:keys</span> <span class="org-string">"t"</span>
                           <span class="org-builtin">:icon</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"checklist"</span> <span class="org-builtin">:set</span> <span class="org-string">"octicon"</span> <span class="org-builtin">:color</span> <span class="org-string">"green"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                           <span class="org-builtin">:keyword</span> <span class="org-string">"</span><span class="org-string"><span class="org-bold"><span class="org-warning">TODO</span></span></span><span class="org-string">"</span>
                           <span class="org-builtin">:file</span> +org-capture-project-todo-file<span class="org-rainbow-delimiters-depth-2">)</span>
                          <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Note"</span> <span class="org-builtin">:keys</span> <span class="org-string">"n"</span>
                           <span class="org-builtin">:icon</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"sticky-note"</span> <span class="org-builtin">:set</span> <span class="org-string">"faicon"</span> <span class="org-builtin">:color</span> <span class="org-string">"yellow"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                           <span class="org-builtin">:keyword</span> <span class="org-string">"%U"</span>
                           <span class="org-builtin">:file</span> +org-capture-project-notes-file<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
              <span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>
</div>
</div>
</div>

<div id="outline-container-orga712749" class="outline-3">
<h3 id="orga712749"><span class="section-number-3">4.5.</span> ORG Plot<a aria-hidden="true" href="#orga712749">#</a> </h3>
<div class="outline-text-3" id="text-4-5">
<p>
Tell it to use the doom theme colors
</p>
<details id='orgc28b95d' class='code' open><summary><span class="lang">elisp</span></summary>
<div class='gutter'>
<a href='#orgc28b95d'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-elisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">after!</span> org-plot
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defun</span> <span class="org-function-name">org-plot/generate-theme</span> <span class="org-rainbow-delimiters-depth-3">(</span>_type<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-doc">"Use the current Doom theme colours to generate a GnuPlot preamble."</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">format</span> <span class="org-string">"</span>
<span class="org-string">fgt = \"textcolor rgb '%s'\" # foreground text</span>
<span class="org-string">fgat = \"textcolor rgb '%s'\" # foreground alt text</span>
<span class="org-string">fgl = \"linecolor rgb '%s'\" # foreground line</span>
<span class="org-string">fgal = \"linecolor rgb '%s'\" # foreground alt line</span>

<span class="org-string"># foreground colors</span>
<span class="org-string">set border lc rgb '%s'</span>
<span class="org-string"># change text colors of  tics</span>
<span class="org-string">set xtics @fgt</span>
<span class="org-string">set ytics @fgt</span>
<span class="org-string"># change text colors of labels</span>
<span class="org-string">set title @fgt</span>
<span class="org-string">set xlabel @fgt</span>
<span class="org-string">set ylabel @fgt</span>
<span class="org-string"># change a text color of key</span>
<span class="org-string">set key @fgt</span>

<span class="org-string"># line styles</span>
<span class="org-string">set linetype 1 lw 2 lc rgb '%s' # red</span>
<span class="org-string">set linetype 2 lw 2 lc rgb '%s' # blue</span>
<span class="org-string">set linetype 3 lw 2 lc rgb '%s' # green</span>
<span class="org-string">set linetype 4 lw 2 lc rgb '%s' # magenta</span>
<span class="org-string">set linetype 5 lw 2 lc rgb '%s' # orange</span>
<span class="org-string">set linetype 6 lw 2 lc rgb '%s' # yellow</span>
<span class="org-string">set linetype 7 lw 2 lc rgb '%s' # teal</span>
<span class="org-string">set linetype 8 lw 2 lc rgb '%s' # violet</span>

<span class="org-string"># palette</span>
<span class="org-string">set palette maxcolors 8</span>
<span class="org-string">set palette defined ( 0 '%s',\</span>
<span class="org-string">1 '%s',\</span>
<span class="org-string">2 '%s',\</span>
<span class="org-string">3 '%s',\</span>
<span class="org-string">4 '%s',\</span>
<span class="org-string">5 '%s',\</span>
<span class="org-string">6 '%s',\</span>
<span class="org-string">7 '%s' )</span>
<span class="org-string">"</span>
            <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-function-name">doom-color</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">fg</span><span class="org-rainbow-delimiters-depth-4">)</span>
            <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-function-name">doom-color</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">fg-alt</span><span class="org-rainbow-delimiters-depth-4">)</span>
            <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-function-name">doom-color</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">fg</span><span class="org-rainbow-delimiters-depth-4">)</span>
            <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-function-name">doom-color</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">fg-alt</span><span class="org-rainbow-delimiters-depth-4">)</span>
            <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-function-name">doom-color</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">fg</span><span class="org-rainbow-delimiters-depth-4">)</span>
            <span class="org-comment-delimiter">;; </span><span class="org-comment">colours</span>
            <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-function-name">doom-color</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">red</span><span class="org-rainbow-delimiters-depth-4">)</span>
            <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-function-name">doom-color</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">blue</span><span class="org-rainbow-delimiters-depth-4">)</span>
            <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-function-name">doom-color</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">green</span><span class="org-rainbow-delimiters-depth-4">)</span>
            <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-function-name">doom-color</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">magenta</span><span class="org-rainbow-delimiters-depth-4">)</span>
            <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-function-name">doom-color</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">orange</span><span class="org-rainbow-delimiters-depth-4">)</span>
            <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-function-name">doom-color</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">yellow</span><span class="org-rainbow-delimiters-depth-4">)</span>
            <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-function-name">doom-color</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">teal</span><span class="org-rainbow-delimiters-depth-4">)</span>
            <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-function-name">doom-color</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">violet</span><span class="org-rainbow-delimiters-depth-4">)</span>
            <span class="org-comment-delimiter">;; </span><span class="org-comment">duplicated</span>
            <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-function-name">doom-color</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">red</span><span class="org-rainbow-delimiters-depth-4">)</span>
            <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-function-name">doom-color</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">blue</span><span class="org-rainbow-delimiters-depth-4">)</span>
            <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-function-name">doom-color</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">green</span><span class="org-rainbow-delimiters-depth-4">)</span>
            <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-function-name">doom-color</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">magenta</span><span class="org-rainbow-delimiters-depth-4">)</span>
            <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-function-name">doom-color</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">orange</span><span class="org-rainbow-delimiters-depth-4">)</span>
            <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-function-name">doom-color</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">yellow</span><span class="org-rainbow-delimiters-depth-4">)</span>
            <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-function-name">doom-color</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">teal</span><span class="org-rainbow-delimiters-depth-4">)</span>
            <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-function-name">doom-color</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">violet</span><span class="org-rainbow-delimiters-depth-4">)</span>
            <span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defun</span> <span class="org-function-name">org-plot/gnuplot-term-properties</span> <span class="org-rainbow-delimiters-depth-3">(</span>_type<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">format</span> <span class="org-string">"background rgb '%s' size 1050,650"</span>
            <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-function-name">doom-color</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">bg</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> org-plot/gnuplot-script-preamble <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">org-plot/generate-theme</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> org-plot/gnuplot-term-extra <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">org-plot/gnuplot-term-properties</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>
</div>
</div>

<div id="outline-container-orgb2fcc3d" class="outline-3">
<h3 id="orgb2fcc3d"><span class="section-number-3">4.6.</span> View Exported File<a aria-hidden="true" href="#orgb2fcc3d">#</a> </h3>
<div class="outline-text-3" id="text-4-6">
<details id='orgd5e0d79' class='code' open><summary><span class="lang">Emacs Lisp</span></summary>
<div class='gutter'>
<a href='#orgd5e0d79'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">map!</span> <span class="org-builtin">:map</span> <span class="org-variable-name">org-mode-map</span>
      <span class="org-builtin">:leader</span>
      <span class="org-builtin">:desc</span> <span class="org-string">"View exported file"</span> <span class="org-string">"v"</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">org-view-output-file</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">org-view-output-file</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">&amp;optional</span> org-file-path<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Visit buffer open on the first output file (if any) found, using `</span><span class="org-doc"><span class="org-constant">org-view-output-file-extensions</span></span><span class="org-doc">'"</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let*</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>org-file-path <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">or</span> org-file-path <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-variable-name">buffer-file-name</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-string">""</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>dir <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">file-name-directory</span> org-file-path<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>basename <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">file-name-base</span> org-file-path<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>output-file nil<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">dolist</span> <span class="org-rainbow-delimiters-depth-4">(</span>ext <span class="org-variable-name">org-view-output-file-extensions</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">unless</span> output-file
        <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">file-exists-p</span>
               <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">concat</span> dir basename <span class="org-string">"."</span> ext<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
          <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> output-file <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">concat</span> dir basename <span class="org-string">"."</span> ext<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">if</span> output-file
        <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">member</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">file-name-extension</span> output-file<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-variable-name">org-view-external-file-extensions</span><span class="org-rainbow-delimiters-depth-1">)</span>
            <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">browse-url-xdg-open</span> output-file<span class="org-rainbow-delimiters-depth-1">)</span>
          <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">pop-to-buffer</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">or</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">find-buffer-visiting</span> output-file<span class="org-rainbow-delimiters-depth-3">)</span>
                             <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">find-file-noselect</span> output-file<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">message</span> <span class="org-string">"No exported file found"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">org-view-output-file-extensions</span> <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-2">(</span> <span class="org-string">"pdf"</span> <span class="org-string">"md"</span> <span class="org-string">"rst"</span> <span class="org-string">"txt"</span> <span class="org-string">"tex"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Search for output files with these extensions, in order, viewing the first that matches"</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>

<p>
Same thing but only for html
</p>
<details id='org3c39aef' class='code' open><summary><span class="lang">Emacs Lisp</span></summary>
<div class='gutter'>
<a href='#org3c39aef'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defcustom</span> <span class="org-variable-name">org-html-use-webkit</span> t
  <span class="org-doc">"Use embedded webkit to preview.</span>
<span class="org-doc">This requires GNU/Emacs version &gt;= 26 and built with the `--with-xwidgets`</span>
<span class="org-doc">option."</span>
  <span class="org-builtin">:type</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">boolean</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">org-html-browser</span> <span class="org-rainbow-delimiters-depth-2">(</span>url<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Use browser specified by user to load URL.</span>
<span class="org-doc">Use default browser if nil."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">if</span> org-html-url-browser
      <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-variable-name">browse-url-generic-program</span> org-html-url-browser<span class="org-rainbow-delimiters-depth-1">)</span>
            <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-variable-name">browse-url-generic-args</span> roam-url-args<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">ignore</span> <span class="org-variable-name">browse-url-generic-program</span><span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">ignore</span> <span class="org-variable-name">browse-url-generic-args</span><span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">browse-url-generic</span> url<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">browse-url</span> url<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">org-html-open-url</span> <span class="org-rainbow-delimiters-depth-2">(</span>url<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Ask the browser to load URL.</span>
<span class="org-doc">Use default browser unless `</span><span class="org-doc"><span class="org-constant">xwidget</span></span><span class="org-doc">' is available."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">and</span> <span class="org-variable-name">org-html-use-webkit</span>
           <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">featurep</span> <span class="org-highlight-quoted-quote">'</span><span class="org-constant">xwidget-internal</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
      <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">progn</span>
        <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-function-name">xwidget-webkit-browse-url</span> url<span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">(</span>buf <span class="org-rainbow-delimiters-depth-3">(</span>xwidget-buffer <span class="org-rainbow-delimiters-depth-4">(</span>xwidget-webkit-current-session<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
          <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">buffer-live-p</span> buf<span class="org-rainbow-delimiters-depth-2">)</span>
            <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">and</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">eq</span> buf <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">current-buffer</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">quit-window</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
            <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-variable-name">display-buffer-alist</span><span class="org-rainbow-delimiters-depth-3">)(</span><span class="org-constant">pop-to-buffer</span> buf<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">org-html-browser</span> url<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">map!</span> <span class="org-builtin">:map</span> <span class="org-variable-name">org-mode-map</span>
      <span class="org-builtin">:leader</span>
      <span class="org-builtin">:desc</span> <span class="org-string">"View exported file"</span> <span class="org-string">"V"</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">org-view-output-file-html</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">org-view-output-file-html</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">&amp;optional</span> org-file-path<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Visit buffer open on the first output file (if any) found, using `</span><span class="org-doc"><span class="org-constant">org-view-output-file-extensions</span></span><span class="org-doc">'"</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let*</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>org-file-path <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">or</span> org-file-path <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-variable-name">buffer-file-name</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-string">""</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>dir <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">file-name-directory</span> org-file-path<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>basename <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">file-name-base</span> org-file-path<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>output-file nil<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">dolist</span> <span class="org-rainbow-delimiters-depth-4">(</span>ext <span class="org-variable-name">org-view-output-file-extensions-html</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">unless</span> output-file
        <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">file-exists-p</span>
               <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">concat</span> dir basename <span class="org-string">"."</span> ext<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
          <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> output-file <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">concat</span> dir basename <span class="org-string">"."</span> ext<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">if</span> output-file
        <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">member</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">file-name-extension</span> output-file<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-variable-name">org-view-external-file-extensions</span><span class="org-rainbow-delimiters-depth-1">)</span>
            <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">org-html-preview-url</span> <span class="org-rainbow-delimiters-depth-2">()</span>
                <span class="org-doc">"Return grip preview url."</span>
                 <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">format</span> <span class="org-string">"file://%s"</span> output-file<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
            <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">org-html-open-url</span> org-html-preview-url<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">message</span> <span class="org-string">"No exported file found"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">org-view-output-file-extensions-html</span> <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-2">(</span> <span class="org-string">"html"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Search for output files with these extensions, in order, viewing the first that matches"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">org-view-external-file-extensions</span> <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"html"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"File formats that should be opened externally."</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>
</div>
</div>
</div>

<div id="outline-container-org8710952" class="outline-2">
<h2 id="org8710952"><span class="section-number-2">5.</span> Latex<a aria-hidden="true" href="#org8710952">#</a> </h2>
<div class="outline-text-2" id="text-5">
</div>
<div id="outline-container-org775d136" class="outline-3">
<h3 id="org775d136"><span class="section-number-3">5.1.</span> Basic configuration<a aria-hidden="true" href="#org775d136">#</a> </h3>
<div class="outline-text-3" id="text-5-1">
<p>
Use XeLateX
</p>
<details id='org6e0c76b' class='code' open><summary><span class="lang">elisp</span></summary>
<div class='gutter'>
<a href='#org6e0c76b'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-elisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">TeX-save-query</span> nil
      <span class="org-variable-name">TeX-show-compilation</span> t
      <span class="org-variable-name">TeX-command-extra-options</span> <span class="org-string">"-shell-escape"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">after!</span> latex
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">add-to-list</span> <span class="org-highlight-quoted-quote">'</span><span class="org-variable-name">TeX-command-list</span> <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"XeLaTeX"</span> <span class="org-string">"%`xelatex%(mode)%' %t"</span> TeX-run-TeX nil t<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>

<p>
First of all, lets use pdf-tools to preview pdfs by defaults
</p>
<details id='org13941ef' class='code' open><summary><span class="lang">elisp</span></summary>
<div class='gutter'>
<a href='#org13941ef'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-elisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">+latex-viewers</span> <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-2">(</span>pdf-tools evince zathura okular skim sumatrapdf<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>

<p>
I also want to adjust the look of those previews
</p>
<details id='org8a4094b' class='code' open><summary><span class="lang">elisp</span></summary>
<div class='gutter'>
<a href='#org8a4094b'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-elisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">after!</span> org
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">org-highlight-latex-and-related</span> <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-3">(</span>native script entities<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">add-to-list</span> <span class="org-highlight-quoted-quote">'</span><span class="org-variable-name">org-src-block-faces</span> <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"latex"</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-builtin">:inherit</span> default <span class="org-builtin">:extend</span> t<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">after!</span> org
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">plist-put</span> <span class="org-variable-name">org-format-latex-options</span> <span class="org-builtin">:background</span> <span class="org-string">"Transparent"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>

<p>
Lets add cdlatex org mode integration
</p>
<details id='orgf7e70ff' class='code' open><summary><span class="lang">elisp</span></summary>
<div class='gutter'>
<a href='#orgf7e70ff'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-elisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">after!</span> org
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">add-hook</span> <span class="org-highlight-quoted-quote">'</span><span class="org-variable-name">org-mode-hook</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">turn-on-org-cdlatex</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defadvice!</span> org-edit-latex-emv-after-insert <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-builtin">:after</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">org-cdlatex-environment-indent</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">org-edit-latex-environment</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>

<p>
I like to preview images inline too
</p>
<details id='orgb692975' class='code' open><summary><span class="lang">elisp</span></summary>
<div class='gutter'>
<a href='#orgb692975'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-elisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> org-display-inline-images t<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> org-redisplay-inline-images t<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">org-startup-with-inline-images</span> <span class="org-string">"inlineimages"</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>

<p>
I prefer svgs to pngs. It takes a little more time, but scales better on HiDPI displays
</p>
<details id='org729e6c2' class='code' open><summary><span class="lang">elisp</span></summary>
<div class='gutter'>
<a href='#org729e6c2'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-elisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq-default</span> <span class="org-variable-name">org-html-with-latex</span> <span class="org-highlight-quoted-quote">`</span><span class="org-highlight-quoted-symbol">dvisvgm</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">org-preview-latex-default-process</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">dvisvgm</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>

<p>
Obviously we can&rsquo;t edit a png though. Let use org-fragtog to toggle between previews and text mode
</p>
<details id='org4534a00' class='code' open><summary><span class="lang">elisp</span></summary>
<div class='gutter'>
<a href='#org4534a00'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-elisp"><span class="org-comment-delimiter">;;</span><span class="org-comment">auto toggle between preview/raw latex</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package!</span> org-fragtog
  <span class="org-builtin">:hook</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">org-mode</span> . <span class="org-variable-name">org-fragtog-mode</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>

<p>
Here&rsquo;s just my private LaTeX config.
</p>
<details id='org1e1b43f' class='code' open><summary><span class="lang">elisp</span></summary>
<div class='gutter'>
<a href='#org1e1b43f'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-elisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">org-format-latex-header</span> <span class="org-string">"\\documentclass{article}</span>
<span class="org-string">\\usepackage[usenames]{xcolor}</span>

<span class="org-string">\\usepackage[T1]{fontenc}</span>

<span class="org-string">\\usepackage{booktabs}</span>

<span class="org-string">\\pagestyle{empty}             % do not remove</span>
<span class="org-string">% The settings below are copied from fullpage.sty</span>
<span class="org-string">\\setlength{\\textwidth}{\\paperwidth}</span>
<span class="org-string">\\addtolength{\\textwidth}{-3cm}</span>
<span class="org-string">\\setlength{\\oddsidemargin}{1.5cm}</span>
<span class="org-string">\\addtolength{\\oddsidemargin}{-2.54cm}</span>
<span class="org-string">\\setlength{\\evensidemargin}{\\oddsidemargin}</span>
<span class="org-string">\\setlength{\\textheight}{\\paperheight}</span>
<span class="org-string">\\addtolength{\\textheight}{-\\headheight}</span>
<span class="org-string">\\addtolength{\\textheight}{-\\headsep}</span>
<span class="org-string">\\addtolength{\\textheight}{-\\footskip}</span>
<span class="org-string">\\addtolength{\\textheight}{-3cm}</span>
<span class="org-string">\\setlength{\\topmargin}{1.5cm}</span>
<span class="org-string">\\addtolength{\\topmargin}{-2.54cm}</span>
<span class="org-string">"</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>
</div>
</div>

<div id="outline-container-orgd22314f" class="outline-3">
<h3 id="orgd22314f"><span class="section-number-3">5.2.</span> CalcTeX<a aria-hidden="true" href="#orgd22314f">#</a> </h3>
<div class="outline-text-3" id="text-5-2">
<p>
We&rsquo;d like to use CalcTeX too, so let&rsquo;s set that up, and fix some glaring
inadequacies &#x2014; why on earth would you commit a hard-coded path to an executable
that <i>only works on your local machine</i>, consequently breaking the package for
everyone else!?
</p>

<details id='orga2d7025' class='code' open><summary><span class="lang">Emacs Lisp</span></summary>
<div class='gutter'>
<a href='#orga2d7025'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package!</span> calctex
  <span class="org-builtin">:commands</span> calctex-mode
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">add-hook</span> <span class="org-highlight-quoted-quote">'</span><span class="org-variable-name">calc-mode-hook</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">calctex-mode</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:config</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> calctex-additional-latex-packages <span class="org-string">"</span>
<span class="org-string">\\usepackage[usenames]{xcolor}</span>
<span class="org-string">\\usepackage{soul}</span>
<span class="org-string">\\usepackage{adjustbox}</span>
<span class="org-string">\\usepackage{amsmath}</span>
<span class="org-string">\\usepackage{amssymb}</span>
<span class="org-string">\\usepackage{siunitx}</span>
<span class="org-string">\\usepackage{cancel}</span>
<span class="org-string">\\usepackage{mathtools}</span>
<span class="org-string">\\usepackage{mathalpha}</span>
<span class="org-string">\\usepackage{xparse}</span>
<span class="org-string">\\usepackage{arevmath}"</span>
        calctex-additional-latex-macros
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">concat</span> calctex-additional-latex-macros
                <span class="org-string">"\n\\let\\evalto\\Rightarrow"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defadvice!</span> no-messaging-a <span class="org-rainbow-delimiters-depth-3">(</span>orig-fn <span class="org-type">&amp;rest</span> args<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-builtin">:around</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">calctex-default-dispatching-render-process</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-variable-name">inhibit-message</span> t<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-variable-name">message-log-max</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">apply</span> orig-fn args<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">Fix hardcoded dvichop path (whyyyyyyy)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>vendor-folder <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">concat</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">file-truename</span> <span class="org-variable-name">doom-local-dir</span><span class="org-rainbow-delimiters-depth-2">)</span>
                               <span class="org-string">"straight/"</span>
                               <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">format</span> <span class="org-string">"build-%s"</span> <span class="org-variable-name">emacs-version</span><span class="org-rainbow-delimiters-depth-2">)</span>
                               <span class="org-string">"/calctex/vendor/"</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">setq</span> calctex-dvichop-sty <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">concat</span> vendor-folder <span class="org-string">"texd/dvichop"</span><span class="org-rainbow-delimiters-depth-4">)</span>
          calctex-dvichop-bin <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">concat</span> vendor-folder <span class="org-string">"texd/dvichop"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">unless</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">file-exists-p</span> calctex-dvichop-bin<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">message</span> <span class="org-string">"CalcTeX: Building dvichop binary"</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-variable-name">default-directory</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">file-name-directory</span> calctex-dvichop-bin<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">call-process</span> <span class="org-string">"make"</span> nil nil nil<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>
</div>

<div id="outline-container-orgfbbf7fe" class="outline-4">
<h4 id="orgfbbf7fe"><span class="section-number-4">5.2.1.</span> Embedded calc<a aria-hidden="true" href="#orgfbbf7fe">#</a> </h4>
<div class="outline-text-4" id="text-5-2-1">
<p>
Embedded calc is a lovely feature which let&rsquo;s us use calc to operate on LaTeX
maths expressions. The standard keybinding is a bit janky however (<kbd>C-x * e</kbd>), so
we&rsquo;ll add a localleader-based alternative.
</p>

<details id='orgd75ce79' class='code' open><summary><span class="lang">Emacs Lisp</span></summary>
<div class='gutter'>
<a href='#orgd75ce79'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">map!</span> <span class="org-builtin">:map</span> <span class="org-variable-name">calc-mode-map</span>
      <span class="org-builtin">:after</span> calc
      <span class="org-builtin">:leader</span>
      <span class="org-builtin">:desc</span> <span class="org-string">"Embedded calc (toggle)"</span> <span class="org-string">"e"</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">calc-embedded</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">map!</span> <span class="org-builtin">:map</span> <span class="org-variable-name">org-mode-map</span>
      <span class="org-builtin">:after</span> org
      <span class="org-builtin">:leader</span>
      <span class="org-builtin">:desc</span> <span class="org-string">"Embedded calc (toggle)"</span> <span class="org-string">"E"</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">calc-embedded</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">map!</span> <span class="org-builtin">:map</span> <span class="org-variable-name">latex-mode-map</span>
      <span class="org-builtin">:after</span> latex
      <span class="org-builtin">:leader</span>
      <span class="org-builtin">:desc</span> <span class="org-string">"Embedded calc (toggle)"</span> <span class="org-string">"e"</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">calc-embedded</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>
</div>
</div>
</div>

<div id="outline-container-orgc16a3b4" class="outline-3">
<h3 id="orgc16a3b4"><span class="section-number-3">5.3.</span> PDF-Tools<a aria-hidden="true" href="#orgc16a3b4">#</a> </h3>
<div class="outline-text-3" id="text-5-3">
<p>
DocView gives me a headache, but pdf-tools can be improved, lets configure it a little more
</p>
<details id='org6b8182d' class='code' open><summary><span class="lang">elisp</span></summary>
<div class='gutter'>
<a href='#org6b8182d'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-elisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> pdf-view
  <span class="org-builtin">:hook</span> <span class="org-rainbow-delimiters-depth-2">(</span>pdf-tools-enabled . pdf-view-themed-minor-mode<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:hook</span> <span class="org-rainbow-delimiters-depth-2">(</span>pdf-tools-enabled . <span class="org-variable-name">hide-mode-line-mode</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:config</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> pdf-view-resize-factor <span class="org-highlight-numbers-number">1.1</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq-default</span> pdf-view-display-size <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">fit-page</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>
</div>
</div>
<div id="outline-container-orgb27de7d" class="outline-3">
<h3 id="orgb27de7d"><span class="section-number-3">5.4.</span> Export<a aria-hidden="true" href="#orgb27de7d">#</a> </h3>
<div class="outline-text-3" id="text-5-4">
</div>
<ol class="org-ol">
<li><a id="org629b0d2"></a>Conditional features<br>
<div class="outline-text-5" id="text-5-4-0-1">
<details id='org8dc0fc7' class='code' open><summary><span class="lang">Emacs Lisp</span></summary>
<div class='gutter'>
<a href='#org8dc0fc7'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">org-latex-italic-quotes</span> t
  <span class="org-doc">"Make \"quote\" environments italic."</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">org-latex-par-sep</span> t
  <span class="org-doc">"Vertically seperate paragraphs, and remove indentation."</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">org-latex-conditional-features</span>
  <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"\\[\\[</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(?:</span></span><span class="org-string">file</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">https?</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string">:</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(?:</span></span><span class="org-string">[</span><span class="org-string"><span class="org-negation-char">^</span></span><span class="org-string">]]</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">\\\\\\]</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string">+?\\.</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(?:</span></span><span class="org-string">eps</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">pdf</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">png</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">jpeg</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">jpg</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">jbig2</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string">\\]\\]"</span> . image<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"\\[\\[</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(?:</span></span><span class="org-string">file</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">https?</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string">:</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(?:</span></span><span class="org-string">[</span><span class="org-string"><span class="org-negation-char">^</span></span><span class="org-string">]]+?</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">\\\\\\]</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string">\\.svg\\]\\]"</span> . svg<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"^[ \t]*|"</span> . table<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"cref:</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">\\cref{</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">\\[\\[[</span><span class="org-string"><span class="org-negation-char">^</span></span><span class="org-string">\\]]+\\]\\]"</span> . cleveref<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"[;\\\\]?\\b[A-Z][A-Z]+s?[</span><span class="org-string"><span class="org-negation-char">^</span></span><span class="org-string">A-Za-z]"</span> . acronym<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"\\+[</span><span class="org-string"><span class="org-negation-char">^</span></span><span class="org-string"> ].*[</span><span class="org-string"><span class="org-negation-char">^</span></span><span class="org-string"> ]\\+</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">_[</span><span class="org-string"><span class="org-negation-char">^</span></span><span class="org-string"> ].*[</span><span class="org-string"><span class="org-negation-char">^</span></span><span class="org-string"> ]_</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">\\\\uu?line</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">\\\\uwave</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">\\\\sout</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">\\\\xout</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">\\\\dashuline</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">\\dotuline</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">\\markoverwith"</span> . underline<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">":float wrap"</span> . float-wrap<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">":float sideways"</span> . rotate<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"^[ \t]*#\\+caption:</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">\\\\caption"</span> . caption<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"\\[\\[xkcd:"</span> . <span class="org-rainbow-delimiters-depth-4">(</span>image caption<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">and</span> <span class="org-variable-name">org-latex-italic-quotes</span> <span class="org-string">"^[ \t]*#\\+begin_quote</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">\\\\begin{quote}"</span><span class="org-rainbow-delimiters-depth-4">)</span> . italic-quotes<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-variable-name">org-latex-par-sep</span> . par-sep<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"^[ \t]*</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(?:</span></span><span class="org-string">[-+*]</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">[0-9]+[.)]</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">[A-Za-z]+[.)]</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string"> \\[[ -X]\\]"</span> . checkbox<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"^[ \t]*#\\+begin_warning</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">\\\\begin{warning}"</span> . box-warning<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"^[ \t]*#\\+begin_info</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">\\\\begin{info}"</span>       . box-info<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"^[ \t]*#\\+begin_success</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">\\\\begin{success}"</span> . box-success<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"^[ \t]*#\\+begin_error</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">\\\\begin{error}"</span>     . box-error<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Org feature tests and associated LaTeX feature flags.</span>

<span class="org-doc">Alist where the car is a test for the presense of the feature,</span>
<span class="org-doc">and the cdr is either a single feature symbol or list of feature symbols.</span>

<span class="org-doc">When a string, it is used as a regex search in the buffer.</span>
<span class="org-doc">The feature is registered as present when there is a match.</span>

<span class="org-doc">The car can also be a</span>
<span class="org-doc">- symbol, the value of which is fetched</span>
<span class="org-doc">- function, which is called with info as an argument</span>
<span class="org-doc">- list, which is `</span><span class="org-doc"><span class="org-constant">eval</span></span><span class="org-doc">'uated</span>

<span class="org-doc">If the symbol, function, or list produces a string: that is used as a regex</span>
<span class="org-doc">search in the buffer. Otherwise any non-nil return value will indicate the</span>
<span class="org-doc">existance of the feature."</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>

<details id='org613fdf6' class='code' open><summary><span class="lang">Emacs Lisp</span></summary>
<div class='gutter'>
<a href='#org613fdf6'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">org-latex-caption-preamble</span> <span class="org-string">"</span>
<span class="org-string">\\usepackage{subcaption}</span>
<span class="org-string">\\usepackage[hypcap=true]{caption}</span>
<span class="org-string">\\setkomafont{caption}{\\sffamily\\small}</span>
<span class="org-string">\\setkomafont{captionlabel}{\\upshape\\bfseries}</span>
<span class="org-string">\\captionsetup{justification=raggedright,singlelinecheck=true}</span>
<span class="org-string">\\usepackage{capt-of} % required by Org</span>
<span class="org-string">"</span>
  <span class="org-doc">"Preamble that improves captions."</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">org-latex-checkbox-preamble</span> <span class="org-string">"</span>
<span class="org-string">\\newcommand{\\checkboxUnchecked}{$\\square$}</span>
<span class="org-string">\\newcommand{\\checkboxTransitive}{\\rlap{\\raisebox{-0.1ex}{\\hspace{0.35ex}\\Large\\textbf -}}$\\square$}</span>
<span class="org-string">\\newcommand{\\checkboxChecked}{\\rlap{\\raisebox{0.2ex}{\\hspace{0.35ex}\\scriptsize \\ding{52}}}$\\square$}</span>
<span class="org-string">"</span>
  <span class="org-doc">"Preamble that improves checkboxes."</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">org-latex-box-preamble</span> <span class="org-string">"</span>
<span class="org-string">% args = #1 Name, #2 Colour, #3 Ding, #4 Label</span>
<span class="org-string">\\newcommand{\\defsimplebox}[4]{%</span>
<span class="org-string">  \\definecolor{#1}{HTML}{#2}</span>
<span class="org-string">  \\newenvironment{#1}[1][]</span>
<span class="org-string">  {%</span>
<span class="org-string">    \\par\\vspace{-0.7\\baselineskip}%</span>
<span class="org-string">    \\textcolor{#1}{#3} \\textcolor{#1}{\\textbf{\\def\\temp{##1}\\ifx\\temp\\empty#4\\else##1\\fi}}%</span>
<span class="org-string">    \\vspace{-0.8\\baselineskip}</span>
<span class="org-string">    \\begin{addmargin}[1em]{1em}</span>
<span class="org-string">  }{%</span>
<span class="org-string">    \\end{addmargin}</span>
<span class="org-string">    \\vspace{-0.5\\baselineskip}</span>
<span class="org-string">  }%</span>
<span class="org-string">}</span>
<span class="org-string">"</span>
  <span class="org-doc">"Preamble that provides a macro for custom boxes."</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>

<details id='org3cae35b' class='code' open><summary><span class="lang">Emacs Lisp</span></summary>
<div class='gutter'>
<a href='#org3cae35b'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">org-latex-feature-implementations</span>
  <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>image         <span class="org-builtin">:snippet</span> <span class="org-string">"\\usepackage{graphicx}"</span> <span class="org-builtin">:order</span> <span class="org-highlight-numbers-number">2</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>svg           <span class="org-builtin">:snippet</span> <span class="org-string">"\\usepackage{svg}"</span> <span class="org-builtin">:order</span> <span class="org-highlight-numbers-number">2</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>table         <span class="org-builtin">:snippet</span> <span class="org-string">"\\usepackage{longtable}\n\\usepackage{booktabs}"</span> <span class="org-builtin">:order</span> <span class="org-highlight-numbers-number">2</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>cleveref      <span class="org-builtin">:snippet</span> <span class="org-string">"\\usepackage[capitalize]{cleveref}"</span> <span class="org-builtin">:order</span> <span class="org-highlight-numbers-number">1</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>underline     <span class="org-builtin">:snippet</span> <span class="org-string">"\\usepackage[normalem]{ulem}"</span> <span class="org-builtin">:order</span> <span class="org-highlight-numbers-number">0.5</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>float-wrap    <span class="org-builtin">:snippet</span> <span class="org-string">"\\usepackage{wrapfig}"</span> <span class="org-builtin">:order</span> <span class="org-highlight-numbers-number">2</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>rotate        <span class="org-builtin">:snippet</span> <span class="org-string">"\\usepackage{rotating}"</span> <span class="org-builtin">:order</span> <span class="org-highlight-numbers-number">2</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>caption       <span class="org-builtin">:snippet</span> <span class="org-variable-name">org-latex-caption-preamble</span> <span class="org-builtin">:order</span> <span class="org-highlight-numbers-number">2.1</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>acronym       <span class="org-builtin">:snippet</span> <span class="org-string">"\\newcommand{\\acr}[1]{\\protect\\textls*[110]{\\scshape #1}}\n\\newcommand{\\acrs}{\\protect\\scalebox{.91}[.84]{\\hspace{0.15ex}s}}"</span> <span class="org-builtin">:order</span> <span class="org-highlight-numbers-number">0.4</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>italic-quotes <span class="org-builtin">:snippet</span> <span class="org-string">"\\renewcommand{\\quote}{\\list{}{\\rightmargin\\leftmargin}\\item\\relax\\em}\n"</span> <span class="org-builtin">:order</span> <span class="org-highlight-numbers-number">0.5</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>par-sep       <span class="org-builtin">:snippet</span> <span class="org-string">"\\setlength{\\parskip}{\\baselineskip}\n\\setlength{\\parindent}{0pt}\n"</span> <span class="org-builtin">:order</span> <span class="org-highlight-numbers-number">0.5</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>.pifont       <span class="org-builtin">:snippet</span> <span class="org-string">"\\usepackage{pifont}"</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>checkbox      <span class="org-builtin">:requires</span> .pifont <span class="org-builtin">:order</span> <span class="org-highlight-numbers-number">3</span>
                   <span class="org-builtin">:snippet</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">concat</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">unless</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">memq</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">maths</span> features<span class="org-rainbow-delimiters-depth-2">)</span>
                                      <span class="org-string">"\\usepackage{amssymb} % provides \\square"</span><span class="org-rainbow-delimiters-depth-1">)</span>
                                    <span class="org-variable-name">org-latex-checkbox-preamble</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>.fancy-box    <span class="org-builtin">:requires</span> .pifont    <span class="org-builtin">:snippet</span> <span class="org-variable-name">org-latex-box-preamble</span> <span class="org-builtin">:order</span> <span class="org-highlight-numbers-number">3.9</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>box-warning   <span class="org-builtin">:requires</span> .fancy-box <span class="org-builtin">:snippet</span> <span class="org-string">"\\defsimplebox{warning}{e66100}{\\ding{68}}{Warning}"</span> <span class="org-builtin">:order</span> <span class="org-highlight-numbers-number">4</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>box-info      <span class="org-builtin">:requires</span> .fancy-box <span class="org-builtin">:snippet</span> <span class="org-string">"\\defsimplebox{info}{3584e4}{\\ding{68}}{Information}"</span> <span class="org-builtin">:order</span> <span class="org-highlight-numbers-number">4</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>box-success   <span class="org-builtin">:requires</span> .fancy-box <span class="org-builtin">:snippet</span> <span class="org-string">"\\defsimplebox{success}{26a269}{\\ding{68}}{\\vspace{-\\baselineskip}}"</span> <span class="org-builtin">:order</span> <span class="org-highlight-numbers-number">4</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>box-error     <span class="org-builtin">:requires</span> .fancy-box <span class="org-builtin">:snippet</span> <span class="org-string">"\\defsimplebox{error}{c01c28}{\\ding{68}}{Important}"</span> <span class="org-builtin">:order</span> <span class="org-highlight-numbers-number">4</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"LaTeX features and details required to implement them.</span>

<span class="org-doc">List where the car is the feature symbol, and the rest forms a plist with the</span>
<span class="org-doc">following keys:</span>
<span class="org-doc">- :snippet, which may be either</span>
<span class="org-doc">  - a string which should be included in the preamble</span>
<span class="org-doc">  - a symbol, the value of which is included in the preamble</span>
<span class="org-doc">  - a function, which is evaluated with the list of feature flags as its</span>
<span class="org-doc">    single argument. The result of which is included in the preamble</span>
<span class="org-doc">  - a list, which is passed to `</span><span class="org-doc"><span class="org-constant">eval</span></span><span class="org-doc">', with a list of feature flags available</span>
<span class="org-doc">    as \"features\"</span>

<span class="org-doc">- :requires, a feature or list of features that must be available</span>
<span class="org-doc">- :when, a feature or list of features that when all available should cause this</span>
<span class="org-doc">    to be automatically enabled.</span>
<span class="org-doc">- :prevents, a feature or list of features that should be masked</span>
<span class="org-doc">- :order, for when ordering is important. Lower values appear first.</span>
<span class="org-doc">    The default is 0.</span>

<span class="org-doc">Features that start with ! will be eagerly loaded, i.e. without being detected."</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>

<details id='org66bd950' class='code' open><summary><span class="lang">Emacs Lisp</span></summary>
<div class='gutter'>
<a href='#org66bd950'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">org-latex-detect-features</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">&amp;optional</span> buffer info<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"List features from `</span><span class="org-doc"><span class="org-constant">org-latex-conditional-features</span></span><span class="org-doc">' detected in BUFFER."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span><span class="org-variable-name">case-fold-search</span> nil<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">with-current-buffer</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">or</span> buffer <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">current-buffer</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">delete-dups</span>
       <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">mapcan</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-3">(</span>construct-feature<span class="org-rainbow-delimiters-depth-3">)</span>
                 <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">(</span>out <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">pcase</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">car</span> construct-feature<span class="org-rainbow-delimiters-depth-4">)</span>
                                    <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-1">(</span>pred stringp<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">car</span> construct-feature<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
                                    <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-1">(</span>pred functionp<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">funcall</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">car</span> construct-feature<span class="org-rainbow-delimiters-depth-2">)</span> info<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
                                    <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-1">(</span>pred listp<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">eval</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">car</span> construct-feature<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
                                    <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-1">(</span>pred symbolp<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">symbol-value</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">car</span> construct-feature<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
                                    <span class="org-rainbow-delimiters-depth-4">(</span>_ <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">user-error</span> <span class="org-string">"org-latex-conditional-features key %s unable to be used"</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">car</span> construct-feature<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
                         <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">stringp</span> out<span class="org-rainbow-delimiters-depth-2">)</span>
                             <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">save-excursion</span>
                               <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">goto-char</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">point-min</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
                               <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">re-search-forward</span> out nil t<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
                           out<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
                   <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">listp</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">cdr</span> construct-feature<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">cdr</span> construct-feature<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">list</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">cdr</span> construct-feature<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
               <span class="org-variable-name">org-latex-conditional-features</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>

<details id='org5863f57' class='code' open><summary><span class="lang">Emacs Lisp</span></summary>
<div class='gutter'>
<a href='#org5863f57'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">org-latex-expand-features</span> <span class="org-rainbow-delimiters-depth-2">(</span>features<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"For each feature in FEATURES process :requires, :when, and :prevents keywords and sort according to :order."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">dolist</span> <span class="org-rainbow-delimiters-depth-3">(</span>feature features<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">unless</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">assoc</span> feature <span class="org-variable-name">org-latex-feature-implementations</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">error</span> <span class="org-string">"Feature %s not provided in org-latex-feature-implementations"</span> feature<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> current features<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">while</span> current
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">when-let</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-1">(</span>requirements <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">plist-get</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">cdr</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">assq</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">car</span> current<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-variable-name">org-latex-feature-implementations</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-builtin">:requires</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">setcdr</span> current <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">listp</span> requirements<span class="org-rainbow-delimiters-depth-2">)</span>
                          <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">append</span> requirements <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">cdr</span> current<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
                        <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">cons</span> requirements <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">cdr</span> current<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">setq</span> current <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">cdr</span> current<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">dolist</span> <span class="org-rainbow-delimiters-depth-3">(</span>potential-feature
           <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">append</span> features <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">delq</span> nil <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">mapcar</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-4">(</span>feat<span class="org-rainbow-delimiters-depth-4">)</span>
                                                <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">plist-get</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">cdr</span> feat<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-builtin">:eager</span><span class="org-rainbow-delimiters-depth-1">)</span>
                                                  <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">car</span> feat<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
                                              <span class="org-variable-name">org-latex-feature-implementations</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">when-let</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-1">(</span>prerequisites <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">plist-get</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">cdr</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">assoc</span> potential-feature <span class="org-variable-name">org-latex-feature-implementations</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-builtin">:when</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">setf</span> features <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">listp</span> prerequisites<span class="org-rainbow-delimiters-depth-3">)</span>
                             <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">cl-every</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-1">(</span>preq<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">memq</span> preq features<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span> prerequisites<span class="org-rainbow-delimiters-depth-3">)</span>
                           <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">memq</span> prerequisites features<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
                         <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">append</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">list</span> potential-feature<span class="org-rainbow-delimiters-depth-3">)</span> features<span class="org-rainbow-delimiters-depth-2">)</span>
                       <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">delq</span> potential-feature features<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">dolist</span> <span class="org-rainbow-delimiters-depth-3">(</span>feature features<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">when-let</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-1">(</span>prevents <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">plist-get</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">cdr</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">assoc</span> feature <span class="org-variable-name">org-latex-feature-implementations</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-builtin">:prevents</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">setf</span> features <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">cl-set-difference</span> features <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">listp</span> prevents<span class="org-rainbow-delimiters-depth-3">)</span> prevents <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">list</span> prevents<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">sort</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">delete-dups</span> features<span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-4">(</span>feat1 feat2<span class="org-rainbow-delimiters-depth-4">)</span>
          <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">&lt;</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">or</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">plist-get</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">cdr</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">assoc</span> feat1 <span class="org-variable-name">org-latex-feature-implementations</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-builtin">:order</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-highlight-numbers-number">1</span><span class="org-rainbow-delimiters-depth-2">)</span>
                 <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">or</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">plist-get</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">cdr</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">assoc</span> feat2 <span class="org-variable-name">org-latex-feature-implementations</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-builtin">:order</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-highlight-numbers-number">1</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
              t nil<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>

<details id='orgcf34873' class='code' open><summary><span class="lang">Emacs Lisp</span></summary>
<div class='gutter'>
<a href='#orgcf34873'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">org-latex-generate-features-preamble</span> <span class="org-rainbow-delimiters-depth-2">(</span>features<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Generate the LaTeX preamble content required to provide FEATURES.</span>
<span class="org-doc">This is done according to `</span><span class="org-doc"><span class="org-constant">org-latex-feature-implementations</span></span><span class="org-doc">'"</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>expanded-features <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">org-latex-expand-features</span> features<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">concat</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">format</span> <span class="org-string">"\n%% features: %s\n"</span> expanded-features<span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">mapconcat</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-2">(</span>feature<span class="org-rainbow-delimiters-depth-2">)</span>
                  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">when-let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>snippet <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">plist-get</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">cdr</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">assoc</span> feature <span class="org-variable-name">org-latex-feature-implementations</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-builtin">:snippet</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
                    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">concat</span>
                     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">pcase</span> snippet
                       <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">(</span>pred stringp<span class="org-rainbow-delimiters-depth-2">)</span> snippet<span class="org-rainbow-delimiters-depth-1">)</span>
                       <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">(</span>pred functionp<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">funcall</span> snippet features<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
                       <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">(</span>pred listp<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">eval</span> <span class="org-highlight-quoted-quote">`</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-1">(</span>features <span class="org-highlight-quoted-quote">'</span>,features<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-rainbow-delimiters-depth-4">(</span>,@snippet<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
                       <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">(</span>pred symbolp<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">symbol-value</span> snippet<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
                       <span class="org-rainbow-delimiters-depth-1">(</span>_ <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">user-error</span> <span class="org-string">"org-latex-feature-implementations :snippet value %s unable to be used"</span> snippet<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
                     <span class="org-string">"\n"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
                expanded-features
                <span class="org-string">""</span><span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-string">"% end features\n"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>

<details id='org8bcd31d' class='code' open><summary><span class="lang">Emacs Lisp</span></summary>
<div class='gutter'>
<a href='#org8bcd31d'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">info--tmp</span> nil<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defadvice!</span> org-latex-save-info <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">info</span> <span class="org-type">&amp;optional</span> t_ s_<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:before</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">org-latex-make-preamble</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">info--tmp</span> info<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defadvice!</span> org-splice-latex-header-and-generated-preamble-a <span class="org-rainbow-delimiters-depth-2">(</span>orig-fn tpl def-pkg pkg snippets-p <span class="org-type">&amp;optional</span> extra<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Dynamically insert preamble content based on `</span><span class="org-doc"><span class="org-constant">org-latex-conditional-preambles</span></span><span class="org-doc">'."</span>
  <span class="org-builtin">:around</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">org-splice-latex-header</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>header <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">funcall</span> orig-fn tpl def-pkg pkg snippets-p extra<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">if</span> snippets-p header
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">concat</span> header
              <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">org-latex-generate-features-preamble</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">org-latex-detect-features</span> nil <span class="org-variable-name">info--tmp</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
              <span class="org-string">"\n"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>
</div>
</li>

<li><a id="orgc5741bc"></a>Tectonic<br>
<div class="outline-text-5" id="text-5-4-0-2">
<p>
Use tectonic
</p>
<details id='org500c33e' class='code' open><summary><span class="lang">Emacs Lisp</span></summary>
<div class='gutter'>
<a href='#org500c33e'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">org-latex-pdf-process</span> <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"tectonic -X compile --outdir=%o -Z shell-escape %f"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>

<p>
With that, we can disable auctex
</p>
<details id='org7f1b63e' class='code' open><summary><span class="lang">Emacs Lisp</span></summary>
<div class='gutter'>
<a href='#org7f1b63e'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defadvice!</span> no-auto-mode-alist <span class="org-rainbow-delimiters-depth-2">(</span>orig-fn <span class="org-type">&amp;rest</span> args<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Wrap ORIG-FN in a let-binding that sets `</span><span class="org-doc"><span class="org-constant">auto-mode-alist</span></span><span class="org-doc">' to nil."</span>
  <span class="org-builtin">:around</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">org-export-to-file</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span><span class="org-variable-name">auto-mode-alist</span> nil<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">apply</span> orig-fn args<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>
</div>
</li>

<li><a id="orgfb4737b"></a>Classes<br>
<div class="outline-text-5" id="text-5-4-0-3">
<p>
Now for some class setup (likely to change over time)
</p>
<details id='org07489f0' class='code' open><summary><span class="lang">Emacs Lisp</span></summary>
<div class='gutter'>
<a href='#org07489f0'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">after!</span> ox-latex
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">add-to-list</span> <span class="org-highlight-quoted-quote">'</span><span class="org-variable-name">org-latex-classes</span>
               <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"cb-doc"</span> <span class="org-string">"\\documentclass{scrartcl}"</span>
                 <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"\\section{%s}"</span> . <span class="org-string">"\\section*{%s}"</span><span class="org-rainbow-delimiters-depth-4">)</span>
                 <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"\\subsection{%s}"</span> . <span class="org-string">"\\subsection*{%s}"</span><span class="org-rainbow-delimiters-depth-4">)</span>
                 <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"\\subsubsection{%s}"</span> . <span class="org-string">"\\subsubsection*{%s}"</span><span class="org-rainbow-delimiters-depth-4">)</span>
                 <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"\\paragraph{%s}"</span> . <span class="org-string">"\\paragraph*{%s}"</span><span class="org-rainbow-delimiters-depth-4">)</span>
                 <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"\\subparagraph{%s}"</span> . <span class="org-string">"\\subparagraph*{%s}"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>

<p>
And some saner default for them
</p>
<details id='orgd92f304' class='code' open><summary><span class="lang">Emacs Lisp</span></summary>
<div class='gutter'>
<a href='#orgd92f304'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">after!</span> ox-latex
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">org-latex-default-class</span> <span class="org-string">"cb-doc"</span>
        <span class="org-variable-name">org-latex-tables-booktabs</span> t
        <span class="org-variable-name">org-latex-hyperref-template</span> <span class="org-string">"\\colorlet{greenyblue}{blue!70!green}</span>
<span class="org-string">\\colorlet{blueygreen}{blue!40!green}</span>
<span class="org-string">\\providecolor{link}{named}{greenyblue}</span>
<span class="org-string">\\providecolor{cite}{named}{blueygreen}</span>
<span class="org-string">\\hypersetup{</span>
<span class="org-string">  pdfauthor={%a},</span>
<span class="org-string">  pdftitle={%t},</span>
<span class="org-string">  pdfkeywords={%k},</span>
<span class="org-string">  pdfsubject={%d},</span>
<span class="org-string">  pdfcreator={%c},</span>
<span class="org-string">  pdflang={%L},</span>
<span class="org-string">  breaklinks=true,</span>
<span class="org-string">  colorlinks=true,</span>
<span class="org-string">  linkcolor=,</span>
<span class="org-string">  urlcolor=link,</span>
<span class="org-string">  citecolor=cite\n}</span>
<span class="org-string">\\urlstyle{same}</span>
<span class="org-string">"</span>
        <span class="org-variable-name">org-latex-reference-command</span> <span class="org-string">"\\cref{%s}"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>
</div>
</li>

<li><a id="orgf739195"></a>Packages<br>
<div class="outline-text-5" id="text-5-4-0-4">
<p>
Add some packages (also very likely to change)
</p>
<details id='orgcedddf4' class='code' open><summary><span class="lang">Emacs Lisp</span></summary>
<div class='gutter'>
<a href='#orgcedddf4'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">org-latex-default-packages-alist</span>
      <span class="org-highlight-quoted-quote">`</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"AUTO"</span> <span class="org-string">"inputenc"</span> t
         <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"pdflatex"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"T1"</span> <span class="org-string">"fontenc"</span> t
         <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"pdflatex"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">""</span> <span class="org-string">"fontspec"</span> t<span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">""</span> <span class="org-string">"graphicx"</span> t<span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">""</span> <span class="org-string">"grffile"</span> t<span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">""</span> <span class="org-string">"longtable"</span> nil<span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">""</span> <span class="org-string">"wrapfig"</span> nil<span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">""</span> <span class="org-string">"rotating"</span> nil<span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"normalem"</span> <span class="org-string">"ulem"</span> t<span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">""</span> <span class="org-string">"amsmath"</span> t<span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">""</span> <span class="org-string">"textcomp"</span> t<span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">""</span> <span class="org-string">"amssymb"</span> t<span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">""</span> <span class="org-string">"capt-of"</span> nil<span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"dvipsnames"</span> <span class="org-string">"xcolor"</span> nil<span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"colorlinks=true, linkcolor=Blue, citecolor=BrickRed, urlcolor=PineGreen"</span> <span class="org-string">"hyperref"</span> nil<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">""</span> <span class="org-string">"indentfirst"</span> nil<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-comment-delimiter">;;</span><span class="org-comment">for fonts I tried sfpro+mono, mono is nice pro is ok</span>
    <span class="org-comment-delimiter">;;</span><span class="org-comment">"\\setmainfont[Ligatures=TeX]{SF Pro}"</span>
    <span class="org-string">"\\setmonofont[Ligatures=TeX]{Liga SFMono Nerd Font}"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>
</div>
</li>

<li><a id="org02f950d"></a>Pretty code blocks<br>
<div class="outline-text-5" id="text-5-4-0-5">
<details id='orgc7b224a' class='code' open><summary><span class="lang">Emacs Lisp</span></summary>
<div class='gutter'>
<a href='#orgc7b224a'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package!</span> engrave-faces-latex
  <span class="org-builtin">:after</span> ox-latex
  <span class="org-builtin">:config</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">org-latex-listings</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">engraved</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>

<details id='org16e72dc' class='code' open><summary><span class="lang">Emacs Lisp</span></summary>
<div class='gutter'>
<a href='#org16e72dc'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defadvice!</span> org-latex-src-block-engraved <span class="org-rainbow-delimiters-depth-2">(</span>orig-fn src-block contents info<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Like `</span><span class="org-doc"><span class="org-constant">org-latex-src-block</span></span><span class="org-doc">', but supporting an engraved backend"</span>
  <span class="org-builtin">:around</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">org-latex-src-block</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">eq</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">engraved</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">plist-get</span> info <span class="org-builtin">:latex-listings</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
      <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">org-latex-scr-block--engraved</span> src-block contents info<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">funcall</span> orig-fn src-block contents info<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defadvice!</span> org-latex-inline-src-block-engraved <span class="org-rainbow-delimiters-depth-2">(</span>orig-fn inline-src-block contents info<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Like `</span><span class="org-doc"><span class="org-constant">org-latex-inline-src-block</span></span><span class="org-doc">', but supporting an engraved backend"</span>
  <span class="org-builtin">:around</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">org-latex-inline-src-block</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">eq</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">engraved</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">plist-get</span> info <span class="org-builtin">:latex-listings</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
      <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">org-latex-inline-scr-block--engraved</span> inline-src-block contents info<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">funcall</span> orig-fn src-block contents info<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar-local</span> <span class="org-variable-name">org-export-has-code-p</span> nil<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defadvice!</span> org-export-expect-no-code <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">&amp;rest</span> _<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:before</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">org-export-as</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">org-export-has-code-p</span> nil<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defadvice!</span> org-export-register-code <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">&amp;rest</span> _<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:after</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">org-latex-src-block-engraved</span>
  <span class="org-builtin">:after</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">org-latex-inline-src-block-engraved</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">org-export-has-code-p</span> t<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> org-latex-engraved-code-preamble <span class="org-string">"</span>
<span class="org-string">\\usepackage{fvextra}</span>
<span class="org-string">\\fvset{</span>
<span class="org-string">  commandchars=\\\\\\{\\},</span>
<span class="org-string">  highlightcolor=white!95!black!80!blue,</span>
<span class="org-string">  breaklines=true,</span>
<span class="org-string">  breaksymbol=\\color{white!60!black}\\tiny\\ensuremath{\\hookrightarrow}}</span>
<span class="org-string">\\renewcommand\\theFancyVerbLine{\\footnotesize\\color{black!40!white}\\arabic{FancyVerbLine}}</span>

<span class="org-string">\\definecolor{codebackground}{HTML}{f7f7f7}</span>
<span class="org-string">\\definecolor{codeborder}{HTML}{f0f0f0}</span>

<span class="org-string">% </span><span class="org-string"><span class="org-bold"><span class="org-warning">TODO</span></span></span><span class="org-string"> have code boxes keep line vertical alignment</span>
<span class="org-string">\\usepackage[breakable,xparse]{tcolorbox}</span>
<span class="org-string">\\DeclareTColorBox[]{Code}{o}%</span>
<span class="org-string">{colback=codebackground, colframe=codeborder,</span>
<span class="org-string">  fontupper=\\footnotesize,</span>
<span class="org-string">  colupper=EFD,</span>
<span class="org-string">  IfNoValueTF={#1}%</span>
<span class="org-string">  {boxsep=2pt, arc=2.5pt, outer arc=2.5pt,</span>
<span class="org-string">    boxrule=0.5pt, left=2pt}%</span>
<span class="org-string">  {boxsep=2.5pt, arc=0pt, outer arc=0pt,</span>
<span class="org-string">    boxrule=0pt, leftrule=1.5pt, left=0.5pt},</span>
<span class="org-string">  right=2pt, top=1pt, bottom=0.5pt,</span>
<span class="org-string">  breakable}</span>
<span class="org-string">"</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">add-to-list</span> <span class="org-highlight-quoted-quote">'</span><span class="org-variable-name">org-latex-conditional-features</span> <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">and</span> <span class="org-variable-name">org-export-has-code-p</span> <span class="org-string">"^[ \t]*#\\+begin_src</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">^[ \t]*#\\+BEGIN_SRC</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">src_[A-Za-z]"</span><span class="org-rainbow-delimiters-depth-3">)</span> . engraved-code<span class="org-rainbow-delimiters-depth-2">)</span> t<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">add-to-list</span> <span class="org-highlight-quoted-quote">'</span><span class="org-variable-name">org-latex-conditional-features</span> <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"^[ \t]*#\\+begin_example</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">^[ \t]*#\\+BEGIN_EXAMPLE"</span> . engraved-code-setup<span class="org-rainbow-delimiters-depth-2">)</span> t<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">add-to-list</span> <span class="org-highlight-quoted-quote">'</span><span class="org-variable-name">org-latex-feature-implementations</span> <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-2">(</span>engraved-code <span class="org-builtin">:requires</span> engraved-code-setup <span class="org-builtin">:snippet</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">engrave-faces-latex-gen-preamble</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-builtin">:order</span> <span class="org-highlight-numbers-number">99</span><span class="org-rainbow-delimiters-depth-2">)</span> t<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">add-to-list</span> <span class="org-highlight-quoted-quote">'</span><span class="org-variable-name">org-latex-feature-implementations</span> <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-2">(</span>engraved-code-setup <span class="org-builtin">:snippet</span> org-latex-engraved-code-preamble <span class="org-builtin">:order</span> <span class="org-highlight-numbers-number">98</span><span class="org-rainbow-delimiters-depth-2">)</span> t<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">org-latex-scr-block--engraved</span> <span class="org-rainbow-delimiters-depth-2">(</span>src-block contents info<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let*</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>lang <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">org-element-property</span> <span class="org-builtin">:language</span> src-block<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>attributes <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">org-export-read-attribute</span> <span class="org-builtin">:attr_latex</span> src-block<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">float</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">plist-get</span> attributes <span class="org-builtin">:float</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>num-start <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">org-export-get-loc</span> src-block info<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>retain-labels <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">org-element-property</span> <span class="org-builtin">:retain-labels</span> src-block<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>caption <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">org-element-property</span> <span class="org-builtin">:caption</span> src-block<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>caption-above-p <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">org-latex--caption-above-p</span> src-block info<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>caption-str <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">org-latex--caption/label-string</span> src-block info<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>placement <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">or</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">org-unbracket-string</span> <span class="org-string">"["</span> <span class="org-string">"]"</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">plist-get</span> attributes <span class="org-builtin">:placement</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
                        <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">plist-get</span> info <span class="org-builtin">:latex-default-figure-position</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>float-env
          <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">cond</span>
           <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">string=</span> <span class="org-string">"multicolumn"</span> float<span class="org-rainbow-delimiters-depth-3">)</span>
            <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">format</span> <span class="org-string">"\\begin{listing*}[%s]\n%s%%s\n%s\\end{listing*}"</span>
                    placement
                    <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">if</span> caption-above-p caption-str <span class="org-string">""</span><span class="org-rainbow-delimiters-depth-4">)</span>
                    <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">if</span> caption-above-p <span class="org-string">""</span> caption-str<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
           <span class="org-rainbow-delimiters-depth-2">(</span>caption
            <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">format</span> <span class="org-string">"\\begin{listing}[%s]\n%s%%s\n%s\\end{listing}"</span>
                    placement
                    <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">if</span> caption-above-p caption-str <span class="org-string">""</span><span class="org-rainbow-delimiters-depth-4">)</span>
                    <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">if</span> caption-above-p <span class="org-string">""</span> caption-str<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
           <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">string=</span> <span class="org-string">"t"</span> float<span class="org-rainbow-delimiters-depth-3">)</span>
            <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">concat</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">format</span> <span class="org-string">"\\begin{listing}[%s]\n"</span>
                            placement<span class="org-rainbow-delimiters-depth-4">)</span>
                    <span class="org-string">"%s\n\\end{listing}"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
           <span class="org-rainbow-delimiters-depth-2">(</span>t <span class="org-string">"%s"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>options <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">plist-get</span> info <span class="org-builtin">:latex-minted-options</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>content-buffer
          <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">with-temp-buffer</span>
            <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">insert</span>
             <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">let*</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-1">(</span>code-info <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">org-export-unravel-code</span> src-block<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
                    <span class="org-rainbow-delimiters-depth-1">(</span>max-width
                     <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">apply</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">max</span>
                            <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">mapcar</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">length</span>
                                    <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-function-name">org-split-string</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">car</span> code-info<span class="org-rainbow-delimiters-depth-1">)</span>
                                                      <span class="org-string">"\n"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
               <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-function-name">org-export-format-code</span>
                <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">car</span> code-info<span class="org-rainbow-delimiters-depth-1">)</span>
                <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-2">(</span>loc _num ref<span class="org-rainbow-delimiters-depth-2">)</span>
                  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">concat</span>
                   loc
                   <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">when</span> ref
                     <span class="org-comment-delimiter">;; </span><span class="org-comment">Ensure references are flushed to the right,</span>
                     <span class="org-comment-delimiter">;; </span><span class="org-comment">separated with 6 spaces from the widest line</span>
                     <span class="org-comment-delimiter">;; </span><span class="org-comment">of code.</span>
                     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">concat</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">make-string</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">+</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">-</span> max-width <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">length</span> loc<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-highlight-numbers-number">6</span><span class="org-rainbow-delimiters-depth-2">)</span>
                                          ?\s<span class="org-rainbow-delimiters-depth-1">)</span>
                             <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">format</span> <span class="org-string">"(%s)"</span> ref<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
                nil <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">and</span> retain-labels <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">cdr</span> code-info<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
            <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">funcall</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">org-src-get-lang-mode</span> lang<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
            <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">engrave-faces-latex-buffer</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>content
          <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">with-current-buffer</span> content-buffer
            <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">buffer-string</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>body
          <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">format</span>
           <span class="org-string">"\\begin{Code}\n\\begin{Verbatim}[%s]\n%s\\end{Verbatim}\n\\end{Code}"</span>
           <span class="org-comment-delimiter">;; </span><span class="org-comment">Options.</span>
           <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">concat</span>
            <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">org-latex--make-option-string</span>
             <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">or</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">not</span> num-start<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">assoc</span> <span class="org-string">"linenos"</span> options<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
                 options
               <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">append</span>
                <span class="org-highlight-quoted-quote">`</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"linenos"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                  <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"firstnumber"</span> ,<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">number-to-string</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1+</span> num-start<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
                options<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
            <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-1">(</span>local-options <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">plist-get</span> attributes <span class="org-builtin">:options</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
              <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">and</span> local-options <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">concat</span> <span class="org-string">","</span> local-options<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
           content<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">kill-buffer</span> content-buffer<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-comment-delimiter">;; </span><span class="org-comment">Return value.</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">format</span> float-env body<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">org-latex-inline-scr-block--engraved</span> <span class="org-rainbow-delimiters-depth-2">(</span>inline-src-block _contents info<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>options <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">org-latex--make-option-string</span>
                  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">plist-get</span> info <span class="org-builtin">:latex-minted-options</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
        code-buffer code<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">setq</span> code-buffer
          <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">with-temp-buffer</span>
            <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">insert</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">org-element-property</span> <span class="org-builtin">:value</span> inline-src-block<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
            <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">funcall</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">org-src-get-lang-mode</span>
                      <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">org-element-property</span> <span class="org-builtin">:language</span> inline-src-block<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
            <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">engrave-faces-latex-buffer</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">setq</span> code <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">with-current-buffer</span> code-buffer
                 <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">buffer-string</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">kill-buffer</span> code-buffer<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">format</span> <span class="org-string">"\\Verb%s{%s}"</span>
            <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">string=</span> options <span class="org-string">""</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">""</span>
              <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">format</span> <span class="org-string">"[%s]"</span> options<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
            code<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defadvice!</span> org-latex-example-block-engraved <span class="org-rainbow-delimiters-depth-2">(</span>orig-fn example-block contents info<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Like `</span><span class="org-doc"><span class="org-constant">org-latex-example-block</span></span><span class="org-doc">', but supporting an engraved backend"</span>
  <span class="org-builtin">:around</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">org-latex-example-block</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>output-block <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">funcall</span> orig-fn example-block contents info<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">eq</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">engraved</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">plist-get</span> info <span class="org-builtin">:latex-listings</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">format</span> <span class="org-string">"\\begin{Code}[alt]\n%s\n\\end{Code}"</span> output-block<span class="org-rainbow-delimiters-depth-4">)</span>
      output-block<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>
</div>
</li>

<li><a id="org32e66e8"></a>Chameleon<br>
<div class="outline-text-5" id="text-5-4-0-6">
<p>
Attempt to improve default PDF export by using the current theme
</p>

<details id='orgc084d8d' class='code' open><summary><span class="lang">elisp</span></summary>
<div class='gutter'>
<a href='#orgc084d8d'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-elisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defface</span> <span class="org-variable-name">org-cite</span>
  <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>t <span class="org-builtin">:foreground</span> <span class="org-string">"#800080"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Face for org-cite."</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>

<details id='org37af5e7' class='code' open><summary><span class="lang">elisp</span></summary>
<div class='gutter'>
<a href='#org37af5e7'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-elisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">after!</span> ox
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">ox-chameleon-base-class</span> <span class="org-string">"cb-doc"</span>
    <span class="org-doc">"The base class that chameleon builds on"</span><span class="org-rainbow-delimiters-depth-2">)</span>

<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">ox-chameleon--p</span> nil
    <span class="org-doc">"Used to indicate whether the current export is trying to blend in. Set just before being accessed."</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">(setf (alist-get :filter-latex-class</span>
  <span class="org-comment-delimiter">;;                  </span><span class="org-comment">(org-export-backend-filters</span>
  <span class="org-comment-delimiter">;;                   </span><span class="org-comment">(org-export-get-backend 'latex)))</span>
  <span class="org-comment-delimiter">;;       </span><span class="org-comment">'ox-chameleon-latex-class-detector-filter)</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">(defun ox-chameleon-latex-class-detector-filter (info backend)</span>
  <span class="org-comment-delimiter">;;   </span><span class="org-comment">""</span>
  <span class="org-comment-delimiter">;;   </span><span class="org-comment">(setq ox-chameleon--p (when (equal (plist-get info :latex-class)</span>
  <span class="org-comment-delimiter">;;                                      </span><span class="org-comment">"chameleon")</span>
  <span class="org-comment-delimiter">;;                           </span><span class="org-comment">(plist-put info :latex-class ox-chameleon-base-class)</span>
  <span class="org-comment-delimiter">;;                           </span><span class="org-comment">t)))</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment"><span class="org-bold"><span class="org-warning">TODO</span></span></span><span class="org-comment"> make this less hacky. One ideas was as follows</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">(map-put (org-export-backend-filters (org-export-get-backend 'latex))</span>
  <span class="org-comment-delimiter">;;           </span><span class="org-comment">:filter-latex-class 'ox-chameleon-latex-class-detector-filter))</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">Never seemed to execute though</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defadvice!</span> ox-chameleon-org-latex-detect <span class="org-rainbow-delimiters-depth-3">(</span>orig-fun info<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-builtin">:around</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">org-export-install-filters</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">ox-chameleon--p</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">equal</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">plist-get</span> info <span class="org-builtin">:latex-class</span><span class="org-rainbow-delimiters-depth-2">)</span>
                                       <span class="org-string">"chameleon"</span><span class="org-rainbow-delimiters-depth-1">)</span>
                            <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">plist-put</span> info <span class="org-builtin">:latex-class</span>
                                       <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">plist-get</span> info <span class="org-builtin">:beamer-theme</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-string">"beamer"</span>
                                         <span class="org-variable-name">ox-chameleon-base-class</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
                            t<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">funcall</span> orig-fun info<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defadvice!</span> ox-chameleon-org-latex-export <span class="org-rainbow-delimiters-depth-3">(</span>orig-fn info <span class="org-type">&amp;optional</span> template snippet?<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-builtin">:around</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">org-latex-make-preamble</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">setq</span> .info info<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">and</span> <span class="org-variable-name">ox-chameleon--p</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">not</span> snippet?<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-variable-name">engrave-faces-preset-styles</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">engrave-faces-generate-preset</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
          <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">concat</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">funcall</span> orig-fn info template snippet?<span class="org-rainbow-delimiters-depth-2">)</span>
                  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">ox-chameleon-generate-colourings</span> info<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">funcall</span> orig-fn info template snippet?<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defun</span> <span class="org-function-name">ox-chameleon-generate-colourings</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">info</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">concat</span>
     <span class="org-string">"\n%% make document follow Emacs theme\n"</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-function-name">ox-chameleon--generate-fgbg-colours</span><span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">plist-get</span> info <span class="org-builtin">:beamer-theme</span><span class="org-rainbow-delimiters-depth-1">)</span>
         <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">concat</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">ox-chameleon--generate-beamer-colourings</span><span class="org-rainbow-delimiters-depth-2">)</span>
                 <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">ox-chameleon--generate-beamer-list-colourings</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
       <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">concat</span> <span class="org-string">"\n\\pagecolor{obg}\n\\color{ofg}\n"</span>
               <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">ox-chameleon--generate-list-colourings</span><span class="org-rainbow-delimiters-depth-2">)</span>
               <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">ox-chameleon--generate-koma-structural-colourings</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-function-name">ox-chameleon--generate-text-colourings</span><span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-function-name">ox-chameleon--generate-src-colourings</span><span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-string">"\n%% end customisations\n\n"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defun</span> <span class="org-function-name">ox-chameleon--generate-fgbg-colours</span> <span class="org-rainbow-delimiters-depth-3">()</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">apply</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">format</span>
           <span class="org-string">"\n\\definecolor{obg}{HTML}{%s}\n\\definecolor{ofg}{HTML}{%s}\n"</span>
           <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">mapcar</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">doom-rpartial</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">substring</span> <span class="org-highlight-numbers-number">1</span><span class="org-rainbow-delimiters-depth-1">)</span>
                   <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">list</span>
                    <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">face-attribute</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">default</span> <span class="org-builtin">:background</span><span class="org-rainbow-delimiters-depth-2">)</span>
                    <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">face-attribute</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">default</span> <span class="org-builtin">:foreground</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defun</span> <span class="org-function-name">ox-chameleon--generate-text-colourings</span> <span class="org-rainbow-delimiters-depth-3">()</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">apply</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">format</span>
           <span class="org-string">"</span>
<span class="org-string">%% textual elements</span>

<span class="org-string">\\definecolor{link}{HTML}{%s}</span>
<span class="org-string">\\definecolor{cite}{HTML}{%s}</span>
<span class="org-string">\\definecolor{itemlabel}{HTML}{%s}</span>
<span class="org-string">\\definecolor{code}{HTML}{%s}</span>
<span class="org-string">\\definecolor{verbatim}{HTML}{%s}</span>

<span class="org-string">\\renewcommand{\\labelitemi}{\\textcolor{itemlabel}{\\textbullet}}</span>
<span class="org-string">\\renewcommand{\\labelitemii}{\\textcolor{itemlabel}{\\normalfont\\bfseries \\textendash}}</span>
<span class="org-string">\\renewcommand{\\labelitemiii}{\\textcolor{itemlabel}{\\textasteriskcentered}}</span>
<span class="org-string">\\renewcommand{\\labelitemiv}{\\textcolor{itemlabel}{\\textperiodcentered}}</span>

<span class="org-string">\\renewcommand{\\labelenumi}{\\textcolor{itemlabel}{\\theenumi.}}</span>
<span class="org-string">\\renewcommand{\\labelenumii}{\\textcolor{itemlabel}{(\\theenumii)}}</span>
<span class="org-string">\\renewcommand{\\labelenumiii}{\\textcolor{itemlabel}{\\theenumiii.}}</span>
<span class="org-string">\\renewcommand{\\labelenumiv}{\\textcolor{itemlabel}{\\theenumiv.}}</span>

<span class="org-string">\\DeclareTextFontCommand{\\texttt}{\\color{code}\\ttfamily}</span>
<span class="org-string">\\makeatletter</span>
<span class="org-string">\\def\\verbatim@font{\\color{verbatim}\\normalfont\\ttfamily}</span>
<span class="org-string">\\makeatother</span>
<span class="org-string">"</span>
           <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">mapcar</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">doom-rpartial</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">substring</span> <span class="org-highlight-numbers-number">1</span><span class="org-rainbow-delimiters-depth-1">)</span>
                   <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">list</span>
                    <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">face-attribute</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">link</span> <span class="org-builtin">:foreground</span><span class="org-rainbow-delimiters-depth-2">)</span>
                    <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">face-attribute</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">org-cite</span> <span class="org-builtin">:foreground</span><span class="org-rainbow-delimiters-depth-2">)</span>
                    <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">face-attribute</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">org-list-dt</span> <span class="org-builtin">:foreground</span><span class="org-rainbow-delimiters-depth-2">)</span>
                    <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">face-attribute</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">org-code</span> <span class="org-builtin">:foreground</span><span class="org-rainbow-delimiters-depth-2">)</span>
                    <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">face-attribute</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">org-verbatim</span> <span class="org-builtin">:foreground</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defun</span> <span class="org-function-name">ox-chameleon--generate-list-colourings</span> <span class="org-rainbow-delimiters-depth-3">()</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">format</span> <span class="org-string">"</span>
<span class="org-string">%% list labels</span>

<span class="org-string">\\definecolor{itemlabel}{HTML}{%s}</span>

<span class="org-string">\\renewcommand{\\labelitemi}{\\textcolor{itemlabel}{\\textbullet}}</span>
<span class="org-string">\\renewcommand{\\labelitemii}{\\textcolor{itemlabel}{\\normalfont\\bfseries \\textendash}}</span>
<span class="org-string">\\renewcommand{\\labelitemiii}{\\textcolor{itemlabel}{\\textasteriskcentered}}</span>
<span class="org-string">\\renewcommand{\\labelitemiv}{\\textcolor{itemlabel}{\\textperiodcentered}}</span>

<span class="org-string">\\renewcommand{\\labelenumi}{\\textcolor{itemlabel}{\\theenumi.}}</span>
<span class="org-string">\\renewcommand{\\labelenumii}{\\textcolor{itemlabel}{(\\theenumii)}}</span>
<span class="org-string">\\renewcommand{\\labelenumiii}{\\textcolor{itemlabel}{\\theenumiii.}}</span>
<span class="org-string">\\renewcommand{\\labelenumiv}{\\textcolor{itemlabel}{\\theenumiv.}}</span>
<span class="org-string">"</span>
            <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">substring</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">face-attribute</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">org-list-dt</span> <span class="org-builtin">:foreground</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-highlight-numbers-number">1</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defun</span> <span class="org-function-name">ox-chameleon--generate-src-colourings</span> <span class="org-rainbow-delimiters-depth-3">()</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">apply</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">format</span>
           <span class="org-string">"</span>
<span class="org-string">%% code blocks</span>

<span class="org-string">\\definecolor{codebackground}{HTML}{%s}</span>
<span class="org-string">\\colorlet{EFD}{ofg}</span>
<span class="org-string">\\definecolor{codeborder}{HTML}{%s}</span>
<span class="org-string">"</span>
           <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">mapcar</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">doom-rpartial</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">substring</span> <span class="org-highlight-numbers-number">1</span><span class="org-rainbow-delimiters-depth-1">)</span>
                   <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">list</span>
                    <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">face-attribute</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">default</span> <span class="org-builtin">:background</span><span class="org-rainbow-delimiters-depth-2">)</span>
                    <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">doom-blend</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">face-attribute</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">default</span> <span class="org-builtin">:background</span><span class="org-rainbow-delimiters-depth-3">)</span>
                                <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">face-attribute</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">default</span> <span class="org-builtin">:foreground</span><span class="org-rainbow-delimiters-depth-3">)</span>
                                <span class="org-highlight-numbers-number">0.95</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defun</span> <span class="org-function-name">ox-chameleon--generate-koma-structural-colourings</span> <span class="org-rainbow-delimiters-depth-3">()</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">apply</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">format</span>
           <span class="org-string">"</span>
<span class="org-string">%% structural elements</span>

<span class="org-string">\\definecolor{documentTitle}{HTML}{%s}</span>
<span class="org-string">\\definecolor{documentInfo}{HTML}{%s}</span>
<span class="org-string">\\definecolor{level1}{HTML}{%s}</span>
<span class="org-string">\\definecolor{level2}{HTML}{%s}</span>
<span class="org-string">\\definecolor{level3}{HTML}{%s}</span>
<span class="org-string">\\definecolor{level4}{HTML}{%s}</span>
<span class="org-string">\\definecolor{level5}{HTML}{%s}</span>
<span class="org-string">\\definecolor{level6}{HTML}{%s}</span>
<span class="org-string">\\definecolor{level7}{HTML}{%s}</span>
<span class="org-string">\\definecolor{level8}{HTML}{%s}</span>

<span class="org-string">\\addtokomafont{title}{\\color{documentTitle}}</span>
<span class="org-string">\\addtokomafont{author}{\\color{documentInfo}}</span>
<span class="org-string">\\addtokomafont{date}{\\color{documentInfo}}</span>
<span class="org-string">\\addtokomafont{section}{\\color{level1}}</span>
<span class="org-string">\\newkomafont{sectionprefix}{\\color{level1}}</span>
<span class="org-string">\\addtokomafont{subsection}{\\color{level2}}</span>
<span class="org-string">\\newkomafont{subsectionprefix}{\\color{level2}}</span>
<span class="org-string">\\addtokomafont{subsubsection}{\\color{level3}}</span>
<span class="org-string">\\newkomafont{subsubsectionprefix}{\\color{level3}}</span>
<span class="org-string">\\addtokomafont{paragraph}{\\color{level4}}</span>
<span class="org-string">\\newkomafont{paragraphprefix}{\\color{level4}}</span>
<span class="org-string">\\addtokomafont{subparagraph}{\\color{level5}}</span>
<span class="org-string">\\newkomafont{subparagraphprefix}{\\color{level5}}</span>
<span class="org-string">"</span>
           <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">mapcar</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">doom-rpartial</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">substring</span> <span class="org-highlight-numbers-number">1</span><span class="org-rainbow-delimiters-depth-1">)</span>
                   <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">list</span>
                    <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">face-attribute</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">org-document-title</span> <span class="org-builtin">:foreground</span><span class="org-rainbow-delimiters-depth-2">)</span>
                    <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">face-attribute</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">org-document-info</span> <span class="org-builtin">:foreground</span><span class="org-rainbow-delimiters-depth-2">)</span>
                    <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">face-attribute</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">outline-1</span> <span class="org-builtin">:foreground</span><span class="org-rainbow-delimiters-depth-2">)</span>
                    <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">face-attribute</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">outline-2</span> <span class="org-builtin">:foreground</span><span class="org-rainbow-delimiters-depth-2">)</span>
                    <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">face-attribute</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">outline-3</span> <span class="org-builtin">:foreground</span><span class="org-rainbow-delimiters-depth-2">)</span>
                    <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">face-attribute</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">outline-4</span> <span class="org-builtin">:foreground</span><span class="org-rainbow-delimiters-depth-2">)</span>
                    <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">face-attribute</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">outline-5</span> <span class="org-builtin">:foreground</span><span class="org-rainbow-delimiters-depth-2">)</span>
                    <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">face-attribute</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">outline-6</span> <span class="org-builtin">:foreground</span><span class="org-rainbow-delimiters-depth-2">)</span>
                    <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">face-attribute</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">outline-7</span> <span class="org-builtin">:foreground</span><span class="org-rainbow-delimiters-depth-2">)</span>
                    <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">face-attribute</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">outline-8</span> <span class="org-builtin">:foreground</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defun</span> <span class="org-function-name">ox-chameleon--generate-beamer-colourings</span> <span class="org-rainbow-delimiters-depth-3">()</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">format</span>
     <span class="org-string">"</span>
<span class="org-string">%% beamer</span>

<span class="org-string">\\definecolor{builtin}{HTML}{%s}</span>

<span class="org-string">\\NewCommandCopy{\\oldusetheme}{\\usetheme}</span>
<span class="org-string">\\renewcommand*{\\usetheme}[2][]{\\oldusetheme[#1]{#2}</span>
<span class="org-string">  \\setbeamercolor{normal text}{fg=ofg, bg=obg}</span>
<span class="org-string">  \\setbeamercolor{alerted text}{fg=builtin}</span>
<span class="org-string">  \\setbeamercolor{progress bar}{fg=builtin}</span>
<span class="org-string">  \\setbeamercolor{title separator}{fg=builtin}</span>
<span class="org-string">  \\setbeamercolor{progress bar in head/foot}{fg=builtin}</span>
<span class="org-string">  \\setbeamercolor{progress bar in section page}{fg=builtin}}</span>
<span class="org-string">"</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">substring</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">face-attribute</span> <span class="org-highlight-quoted-quote">'</span><span class="org-variable-name">font-lock-builtin-face</span> <span class="org-builtin">:foreground</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-highlight-numbers-number">1</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defun</span> <span class="org-function-name">ox-chameleon--generate-beamer-list-colourings</span> <span class="org-rainbow-delimiters-depth-3">()</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">format</span> <span class="org-string">"</span>
<span class="org-string">%% beamer list labels</span>

<span class="org-string">\\definecolor{itemlabel}{HTML}{%s}</span>
<span class="org-string">\\setbeamercolor*{item}{fg=itemlabel}</span>
<span class="org-string">"</span>
            <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">substring</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">face-attribute</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">org-list-dt</span> <span class="org-builtin">:foreground</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-highlight-numbers-number">1</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>
</div>
</li>
</ol>
</div>
</div>

<div id="outline-container-orgdcacedd" class="outline-2">
<h2 id="orgdcacedd"><span class="section-number-2">6.</span> Mu4e<a aria-hidden="true" href="#orgdcacedd">#</a> </h2>
<div class="outline-text-2" id="text-6">
<p>
I&rsquo;m trying out emails in emacs, should be nice. Related, check .mbsyncrc to
setup your emails first
</p>

<p>
10 minutes is a reasonable update time
</p>
<details id='org62afc82' class='code' open><summary><span class="lang">Emacs Lisp</span></summary>
<div class='gutter'>
<a href='#org62afc82'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> mu4e-update-interval <span class="org-highlight-numbers-number">300</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>

<details id='orgef91b4d' class='code' open><summary><span class="lang">elisp</span></summary>
<div class='gutter'>
<a href='#orgef91b4d'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-elisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">set-email-account!</span> <span class="org-string">"shaunsingh0207"</span>
  <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>mu4e-sent-folder       . <span class="org-string">"/Sent Mail"</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>mu4e-drafts-folder     . <span class="org-string">"/Drafts"</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>mu4e-trash-folder      . <span class="org-string">"/Trash"</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>mu4e-refile-folder     . <span class="org-string">"/All Mail"</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>smtpmail-smtp-user     . <span class="org-string">"shaunsingh0207@gmail.com"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">;; </span><span class="org-comment">don't need to run cleanup after indexing for gmail</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> mu4e-index-cleanup nil
      mu4e-index-lazy-check t<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">after!</span> mu4e
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> mu4e-headers-fields
        <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span><span class="org-builtin">:flags</span> . <span class="org-highlight-numbers-number">6</span><span class="org-rainbow-delimiters-depth-4">)</span>
          <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-builtin">:account-stripe</span> . <span class="org-highlight-numbers-number">2</span><span class="org-rainbow-delimiters-depth-4">)</span>
          <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-builtin">:from-or-to</span> . <span class="org-highlight-numbers-number">25</span><span class="org-rainbow-delimiters-depth-4">)</span>
          <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-builtin">:folder</span> . <span class="org-highlight-numbers-number">10</span><span class="org-rainbow-delimiters-depth-4">)</span>
          <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-builtin">:recipnum</span> . <span class="org-highlight-numbers-number">2</span><span class="org-rainbow-delimiters-depth-4">)</span>
          <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-builtin">:subject</span> . <span class="org-highlight-numbers-number">80</span><span class="org-rainbow-delimiters-depth-4">)</span>
          <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-builtin">:human-date</span> . <span class="org-highlight-numbers-number">8</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
        +mu4e-min-header-frame-width <span class="org-highlight-numbers-number">142</span>
        mu4e-headers-date-format <span class="org-string">"%d/%m/%y"</span>
        mu4e-headers-time-format <span class="org-string">"&#10710; %H:%M"</span>
        mu4e-headers-results-limit <span class="org-highlight-numbers-number">1000</span>
        mu4e-index-cleanup t<span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">add-to-list</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">mu4e-bookmarks</span>
               <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-builtin">:name</span> <span class="org-string">"Yesterday's messages"</span> <span class="org-builtin">:query</span> <span class="org-string">"date:2d..1d"</span> <span class="org-builtin">:key</span> ?y<span class="org-rainbow-delimiters-depth-3">)</span> t<span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">+mu4e-header--folder-colors</span> nil<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">appendq!</span> mu4e-header-info-custom
            <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span><span class="org-builtin">:folder</span> .
               <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-builtin">:name</span> <span class="org-string">"Folder"</span> <span class="org-builtin">:shortname</span> <span class="org-string">"Folder"</span> <span class="org-builtin">:help</span> <span class="org-string">"Lowest level folder"</span> <span class="org-builtin">:function</span>
                <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-3">(</span>msg<span class="org-rainbow-delimiters-depth-3">)</span>
                  <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">+mu4e-colorize-str</span>
                   <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">replace-regexp-in-string</span> <span class="org-string">"\\`.*/"</span> <span class="org-string">""</span> <span class="org-rainbow-delimiters-depth-1">(</span>mu4e-message-field msg <span class="org-builtin">:maildir</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
                   <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">+mu4e-header--folder-colors</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>

<p>
We can also send messages using msmtp
</p>
<details id='org3b8ad4a' class='code' open><summary><span class="lang">Emacs Lisp</span></summary>
<div class='gutter'>
<a href='#org3b8ad4a'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> sendmail-program <span class="org-string">"/opt/homebrew/bin/msmtp"</span>
        <span class="org-variable-name">send-mail-function</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">smtpmail-send-it</span>
        <span class="org-variable-name">message-sendmail-f-is-evil</span> t
        <span class="org-variable-name">message-sendmail-extra-arguments</span> <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"--read-envelope-from"</span><span class="org-rainbow-delimiters-depth-2">)</span>
        <span class="org-variable-name">message-send-mail-function</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">message-send-mail-with-sendmail</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>

<p>
Notifications are quite nifty, especially if I&rsquo;m as lazy as I am
</p>
<details id='orgf497755' class='code' open><summary><span class="lang">Emacs Lisp</span></summary>
<div class='gutter'>
<a href='#orgf497755'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> alert-default-style <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">osx-notifier</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>
</div>
</div>

<div id="outline-container-org79640b8" class="outline-2">
<h2 id="org79640b8"><span class="section-number-2">7.</span> Magit<a aria-hidden="true" href="#org79640b8">#</a> </h2>
<div class="outline-text-2" id="text-7">
<p>
Show gravatars where possible
</p>
<details id='org0f913b1' class='code' open><summary><span class="lang">elisp</span></summary>
<div class='gutter'>
<a href='#org0f913b1'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>⎘</button></div>
<div class="org-src-container">
<pre class="src src-elisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">magit-revision-show-gravatars</span> <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"^Author:     "</span> . <span class="org-string">"^Commit:     "</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="date">Date: <!--<a href="https://github.com/shaunsingh/vimrc-dotfiles/commit/fatal: not a git repository (or any of the parent directories): .git" style="text-decoration: none"><code style="padding: 0; color: var(--text-light); font-size: inherit; opacity: 0.7">fatal: not a git repository (or any of the parent directories): .git</code></a>--> 2021-08-19 04:46 UTC, <a href="https://github.com/shaunsingh/vimrc-dotfiles/commit/fatal: not a git repository (or any of the parent directories): .git" style="text-decoration: none"><code style="padding: 0; color: var(--text-light); font-size: inherit; opacity: 0.7">fatal: not a git repository (or any of the parent directories): .git</code></a></p>
<p class="author">Author: Shaurya Singh</p>
<p class="date">Created: 2021-08-19 Thu 05:31</p>
</div>
</div>
</body>
</html>
